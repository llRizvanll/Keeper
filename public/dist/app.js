webpackJsonp([0],[function(e,t,n){"use strict";var r=n(1),o=n(3),i=n(23);o.enableProdMode(),r.platformBrowserDynamic().bootstrapModule(i.AppModule)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(24),s=n(21),c=n(28),u=n(29),l=n(40),d=n(116),f=n(71),p=n(117),h=n(118),m=n(74),g=function(){function AppModule(){}return AppModule=r([i.NgModule({imports:[a.FormsModule,s.BrowserModule,l.AppRoutingModule,c.NguiDatetimePickerModule,u.PushNotificationsModule,u.SimpleNotificationsModule.forRoot()],declarations:[f.Spinner,p.Dragula,d.AppComponent,f.BinComponent,f.HomeComponent,f.AboutComponent,f.ArchiveComponent,h.FluidHeightDirective],providers:[m.DragulaService,m.NotesTable,m.NotesTableService],bootstrap:[d.AppComponent]}),o("design:paramtypes",[])],AppModule)}();t.AppModule=g},function(e,t,n){/**
	 * @license Angular v2.4.10
	 * (c) 2010-2017 Google, Inc. https://angular.io/
	 * License: MIT
	 */
!function(e,r){r(t,n(3),n(25),n(6),n(7),n(26))}(this,function(e,t,n,r,o,i){"use strict";function isPresent(e){return null!=e}function isBlank(e){return null==e}function looseIdentical(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function isJsObject(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function isPrimitive(e){return!isJsObject(e)}function isEmptyInputValue(e){return null==e||0===e.length}function _convertToPromise(e){return d(e)?e:n.toPromise.call(e)}function _executeValidators(e,t){return t.map(function(t){return t(e)})}function _executeAsyncValidators(e,t){return t.map(function(t){return t(e)})}function _mergeErrors(e){var t=e.reduce(function(e,t){return isPresent(t)?u.merge(e,t):e},{});return 0===Object.keys(t).length?null:t}/**
	     * @license
	     * Copyright Google Inc. All Rights Reserved.
	     *
	     * Use of this source code is governed by an MIT-style license that can be
	     * found in the LICENSE file at https://angular.io/license
	     */
function normalizeValidator(e){return e.validate?function(t){return e.validate(t)}:e}function normalizeAsyncValidator(e){return e.validate?function(t){return e.validate(t)}:e}function unimplemented(){throw new Error("unimplemented")}function _buildValueString(e,t){return null==e?""+t:(isPrimitive(t)||(t="Object"),(e+": "+t).slice(0,50))}function _extractId(e){return e.split(":")[0]}function _buildValueString$1(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),isPrimitive(t)||(t="Object"),(e+": "+t).slice(0,50))}function _extractId$1(e){return e.split(":")[0]}function controlPath(e,t){return t.path.concat([e])}function setUpControl(e,t){e||_throwError(t,"Cannot find control with"),t.valueAccessor||_throwError(t,"No value accessor for form control with"),e.validator=m.compose([e.validator,t.validator]),e.asyncValidator=m.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),t.valueAccessor.registerOnChange(function(n){t.viewToModelUpdate(n),e.markAsDirty(),e.setValue(n,{emitModelToViewChange:!1})}),t.valueAccessor.registerOnTouched(function(){return e.markAsTouched()}),e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function cleanUpControl(e,t){t.valueAccessor.registerOnChange(function(){return _noControlError(t)}),t.valueAccessor.registerOnTouched(function(){return _noControlError(t)}),t._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}function setUpFormContainer(e,t){isBlank(e)&&_throwError(t,"Cannot find control with"),e.validator=m.compose([e.validator,t.validator]),e.asyncValidator=m.composeAsync([e.asyncValidator,t.asyncValidator])}function _noControlError(e){return _throwError(e,"There is no FormControl instance attached to form control element with")}function _throwError(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function composeValidators(e){return isPresent(e)?m.compose(e.map(normalizeValidator)):null}function composeAsyncValidators(e){return isPresent(e)?m.composeAsync(e.map(normalizeAsyncValidator)):null}function isPropertyUpdated(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!looseIdentical(t,n.currentValue)}function isBuiltInAccessor(e){return F.some(function(t){return e.constructor===t})}function selectValueAccessor(e,t){if(!t)return null;var n,r,o;return t.forEach(function(t){t.constructor===_?n=t:isBuiltInAccessor(t)?(r&&_throwError(e,"More than one built-in value accessor matches form control with"),r=t):(o&&_throwError(e,"More than one custom value accessor matches form control with"),o=t)}),o?o:r?r:n?n:(_throwError(e,"No valid value accessor for form control with"),null)}function _find(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(n)),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof Z?e.controls[t]||null:e instanceof ee?e.at(t)||null:null},e))}function toObservable(e){return d(e)?i.fromPromise(e):e}function coerceToValidator(e){return Array.isArray(e)?composeValidators(e):e}function coerceToAsyncValidator(e){return Array.isArray(e)?composeAsyncValidators(e):e}function _hasInvalidParent(e){return!(e instanceof Se||e instanceof _e||e instanceof ke)}/**
	     * @license
	     * Copyright Google Inc. All Rights Reserved.
	     *
	     * Use of this source code is governed by an MIT-style license that can be
	     * found in the LICENSE file at https://angular.io/license
	     */
var a=function(){function AbstractControlDirective(){}return Object.defineProperty(AbstractControlDirective.prototype,"control",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),AbstractControlDirective.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},AbstractControlDirective.prototype.hasError=function(e,t){return void 0===t&&(t=null),!!this.control&&this.control.hasError(e,t)},AbstractControlDirective.prototype.getError=function(e,t){return void 0===t&&(t=null),this.control?this.control.getError(e,t):null},AbstractControlDirective}(),s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},c=function(e){function ControlContainer(){e.apply(this,arguments)}return s(ControlContainer,e),Object.defineProperty(ControlContainer.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(ControlContainer.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),ControlContainer}(a),u=function(){function StringMapWrapper(){}return StringMapWrapper.merge=function(e,t){for(var n={},r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];n[i]=e[i]}for(var a=0,s=Object.keys(t);a<s.length;a++){var i=s[a];n[i]=t[i]}return n},StringMapWrapper.equals=function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var o=0;o<n.length;o++){var i=n[o];if(e[i]!==t[i])return!1}return!0},StringMapWrapper}(),l=function(){function ListWrapper(){}return ListWrapper.findLast=function(e,t){for(var n=e.length-1;n>=0;n--)if(t(e[n]))return e[n];return null},ListWrapper.removeAll=function(e,t){for(var n=0;n<t.length;++n){var r=e.indexOf(t[n]);r>-1&&e.splice(r,1)}},ListWrapper.remove=function(e,t){var n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)},ListWrapper.equals=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},ListWrapper.flatten=function(e){return e.reduce(function(e,t){var n=Array.isArray(t)?ListWrapper.flatten(t):t;return e.concat(n)},[])},ListWrapper}(),d=t.__core_private__.isPromise,f=t.__core_private__.isObservable,p=new t.OpaqueToken("NgValidators"),h=new t.OpaqueToken("NgAsyncValidators"),m=function(){function Validators(){}return Validators.required=function(e){return isEmptyInputValue(e.value)?{required:!0}:null},Validators.requiredTrue=function(e){return e.value===!0?null:{required:!0}},Validators.minLength=function(e){return function(t){if(isEmptyInputValue(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},Validators.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},Validators.pattern=function(e){if(!e)return Validators.nullValidator;var t,n;return"string"==typeof e?(n="^"+e+"$",t=new RegExp(n)):(n=e.toString(),t=e),function(e){if(isEmptyInputValue(e.value))return null;var r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}},Validators.nullValidator=function(e){return null},Validators.compose=function(e){if(!e)return null;var t=e.filter(isPresent);return 0==t.length?null:function(e){return _mergeErrors(_executeValidators(e,t))}},Validators.composeAsync=function(e){if(!e)return null;var t=e.filter(isPresent);return 0==t.length?null:function(e){var n=_executeAsyncValidators(e,t).map(_convertToPromise);return Promise.all(n).then(_mergeErrors)}},Validators}(),g=new t.OpaqueToken("NgValueAccessor"),v={provide:g,useExisting:t.forwardRef(function(){return y}),multi:!0},y=function(){function CheckboxControlValueAccessor(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return CheckboxControlValueAccessor.prototype.writeValue=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",e)},CheckboxControlValueAccessor.prototype.registerOnChange=function(e){this.onChange=e},CheckboxControlValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},CheckboxControlValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},CheckboxControlValueAccessor.decorators=[{type:t.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[v]}]}],CheckboxControlValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},CheckboxControlValueAccessor}(),b={provide:g,useExisting:t.forwardRef(function(){return _}),multi:!0},_=function(){function DefaultValueAccessor(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return DefaultValueAccessor.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",t)},DefaultValueAccessor.prototype.registerOnChange=function(e){this.onChange=e},DefaultValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},DefaultValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},DefaultValueAccessor.decorators=[{type:t.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[b]}]}],DefaultValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},DefaultValueAccessor}(),C={provide:g,useExisting:t.forwardRef(function(){return w}),multi:!0},w=function(){function NumberValueAccessor(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return NumberValueAccessor.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",t)},NumberValueAccessor.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},NumberValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},NumberValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},NumberValueAccessor.decorators=[{type:t.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[C]}]}],NumberValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},NumberValueAccessor}(),S=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},D=function(e){function NgControl(){e.apply(this,arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}return S(NgControl,e),Object.defineProperty(NgControl.prototype,"validator",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgControl.prototype,"asyncValidator",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),NgControl.prototype.viewToModelUpdate=function(e){},NgControl}(a),k={provide:g,useExisting:t.forwardRef(function(){return A}),multi:!0},E=function(){function RadioControlRegistry(){this._accessors=[]}return RadioControlRegistry.prototype.add=function(e,t){this._accessors.push([e,t])},RadioControlRegistry.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},RadioControlRegistry.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},RadioControlRegistry.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},RadioControlRegistry.decorators=[{type:t.Injectable}],RadioControlRegistry.ctorParameters=function(){return[]},RadioControlRegistry}(),A=function(){function RadioControlValueAccessor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return RadioControlValueAccessor.prototype.ngOnInit=function(){this._control=this._injector.get(D),this._checkName(),this._registry.add(this._control,this)},RadioControlValueAccessor.prototype.ngOnDestroy=function(){this._registry.remove(this)},RadioControlValueAccessor.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",this._state)},RadioControlValueAccessor.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},RadioControlValueAccessor.prototype.fireUncheck=function(e){this.writeValue(e)},RadioControlValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},RadioControlValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},RadioControlValueAccessor.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},RadioControlValueAccessor.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},RadioControlValueAccessor.decorators=[{type:t.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[k]}]}],RadioControlValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef},{type:E},{type:t.Injector}]},RadioControlValueAccessor.propDecorators={name:[{type:t.Input}],formControlName:[{type:t.Input}],value:[{type:t.Input}]},RadioControlValueAccessor}(),x={provide:g,useExisting:t.forwardRef(function(){return N}),multi:!0},N=function(){function RangeValueAccessor(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return RangeValueAccessor.prototype.writeValue=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"value",parseFloat(e))},RangeValueAccessor.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},RangeValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},RangeValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},RangeValueAccessor.decorators=[{type:t.Directive,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[x]}]}],RangeValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},RangeValueAccessor}(),O={provide:g,useExisting:t.forwardRef(function(){return I}),multi:!0},I=function(){function SelectControlValueAccessor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){}}return SelectControlValueAccessor.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setElementProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=_buildValueString(t,e);this._renderer.setElementProperty(this._elementRef.nativeElement,"value",n)},SelectControlValueAccessor.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=n,e(t._getOptionValue(n))}},SelectControlValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},SelectControlValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},SelectControlValueAccessor.prototype._registerOption=function(){return(this._idCounter++).toString()},SelectControlValueAccessor.prototype._getOptionId=function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(looseIdentical(this._optionMap.get(r),e))return r}return null},SelectControlValueAccessor.prototype._getOptionValue=function(e){var t=_extractId(e);return this._optionMap.has(t)?this._optionMap.get(t):e},SelectControlValueAccessor.decorators=[{type:t.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[O]}]}],SelectControlValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},SelectControlValueAccessor}(),P=function(){function NgSelectOption(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(NgSelectOption.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(_buildValueString(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectOption.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),NgSelectOption.prototype._setElementValue=function(e){this._renderer.setElementProperty(this._element.nativeElement,"value",e)},NgSelectOption.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectOption.decorators=[{type:t.Directive,args:[{selector:"option"}]}],NgSelectOption.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer},{type:I,decorators:[{type:t.Optional},{type:t.Host}]}]},NgSelectOption.propDecorators={ngValue:[{type:t.Input,args:["ngValue"]}],value:[{type:t.Input,args:["value"]}]},NgSelectOption}(),R={provide:g,useExisting:t.forwardRef(function(){return T}),multi:!0},T=function(){function SelectMultipleControlValueAccessor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){}}return SelectMultipleControlValueAccessor.prototype.writeValue=function(e){var t=this;this.value=e;var n;if(Array.isArray(e)){var r=e.map(function(e){return t._getOptionId(e)});n=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else n=function(e,t){e._setSelected(!1)};this._optionMap.forEach(n)},SelectMultipleControlValueAccessor.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var o=n.selectedOptions,i=0;i<o.length;i++){var a=o.item(i),s=t._getOptionValue(a.value);r.push(s)}else for(var o=n.options,i=0;i<o.length;i++){var a=o.item(i);if(a.selected){var s=t._getOptionValue(a.value);r.push(s)}}t.value=r,e(r)}},SelectMultipleControlValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e},SelectMultipleControlValueAccessor.prototype.setDisabledState=function(e){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",e)},SelectMultipleControlValueAccessor.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},SelectMultipleControlValueAccessor.prototype._getOptionId=function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(looseIdentical(this._optionMap.get(r)._value,e))return r}return null},SelectMultipleControlValueAccessor.prototype._getOptionValue=function(e){var t=_extractId$1(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},SelectMultipleControlValueAccessor.decorators=[{type:t.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[R]}]}],SelectMultipleControlValueAccessor.ctorParameters=function(){return[{type:t.Renderer},{type:t.ElementRef}]},SelectMultipleControlValueAccessor}(),j=function(){function NgSelectMultipleOption(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(NgSelectMultipleOption.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(_buildValueString$1(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectMultipleOption.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(_buildValueString$1(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),NgSelectMultipleOption.prototype._setElementValue=function(e){this._renderer.setElementProperty(this._element.nativeElement,"value",e)},NgSelectMultipleOption.prototype._setSelected=function(e){this._renderer.setElementProperty(this._element.nativeElement,"selected",e)},NgSelectMultipleOption.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectMultipleOption.decorators=[{type:t.Directive,args:[{selector:"option"}]}],NgSelectMultipleOption.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer},{type:T,decorators:[{type:t.Optional},{type:t.Host}]}]},NgSelectMultipleOption.propDecorators={ngValue:[{type:t.Input,args:["ngValue"]}],value:[{type:t.Input,args:["value"]}]},NgSelectMultipleOption}(),F=[y,N,w,I,T,A],M=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},L=function(e){function AbstractFormGroupDirective(){e.apply(this,arguments)}return M(AbstractFormGroupDirective,e),AbstractFormGroupDirective.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},AbstractFormGroupDirective.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(AbstractFormGroupDirective.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"path",{get:function(){return controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"validator",{get:function(){return composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"asyncValidator",{get:function(){return composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),AbstractFormGroupDirective.prototype._checkParentType=function(){},AbstractFormGroupDirective}(c),V=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},B=function(){function AbstractControlStatus(e){this._cd=e}return Object.defineProperty(AbstractControlStatus.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlStatus.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),AbstractControlStatus}(),q={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},$=function(e){function NgControlStatus(t){e.call(this,t)}return V(NgControlStatus,e),NgControlStatus.decorators=[{type:t.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:q}]}],NgControlStatus.ctorParameters=function(){return[{type:D,decorators:[{type:t.Self}]}]},NgControlStatus}(B),U=function(e){function NgControlStatusGroup(t){e.call(this,t)}return V(NgControlStatusGroup,e),NgControlStatusGroup.decorators=[{type:t.Directive,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:q}]}],NgControlStatusGroup.ctorParameters=function(){return[{type:c,decorators:[{type:t.Self}]}]},NgControlStatusGroup}(B),W=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},z=function(e){function EventEmitter(t){void 0===t&&(t=!1),e.call(this),this.__isAsync=t}return W(EventEmitter,e),EventEmitter.prototype.emit=function(t){e.prototype.next.call(this,t)},EventEmitter.prototype.subscribe=function(t,n,r){var o,i=function(e){return null},a=function(){return null};return t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(i=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(i=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),e.prototype.subscribe.call(this,o,i,a)},EventEmitter}(r.Subject),G=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},H="VALID",K="INVALID",J="PENDING",Q="DISABLED",Y=function(){function AbstractControl(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this._pristine=!0,this._touched=!1,this._onDisabledChange=[]}return Object.defineProperty(AbstractControl.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valid",{get:function(){return this._status===H},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"invalid",{get:function(){return this._status===K},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pending",{get:function(){return this._status==J},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"disabled",{get:function(){return this._status===Q},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"enabled",{get:function(){return this._status!==Q},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pristine",{get:function(){return this._pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"touched",{get:function(){return this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"untouched",{get:function(){return!this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"statusChanges",{get:function(){return this._statusChanges},enumerable:!0,configurable:!0}),AbstractControl.prototype.setValidators=function(e){this.validator=coerceToValidator(e)},AbstractControl.prototype.setAsyncValidators=function(e){this.asyncValidator=coerceToAsyncValidator(e)},AbstractControl.prototype.clearValidators=function(){this.validator=null},AbstractControl.prototype.clearAsyncValidators=function(){this.asyncValidator=null},AbstractControl.prototype.markAsTouched=function(e){var t=(void 0===e?{}:e).onlySelf;this._touched=!0,this._parent&&!t&&this._parent.markAsTouched({onlySelf:t})},AbstractControl.prototype.markAsUntouched=function(e){var t=(void 0===e?{}:e).onlySelf;this._touched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!t&&this._parent._updateTouched({onlySelf:t})},AbstractControl.prototype.markAsDirty=function(e){var t=(void 0===e?{}:e).onlySelf;this._pristine=!1,this._parent&&!t&&this._parent.markAsDirty({onlySelf:t})},AbstractControl.prototype.markAsPristine=function(e){var t=(void 0===e?{}:e).onlySelf;this._pristine=!0,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!t&&this._parent._updatePristine({onlySelf:t})},AbstractControl.prototype.markAsPending=function(e){var t=(void 0===e?{}:e).onlySelf;this._status=J,this._parent&&!t&&this._parent.markAsPending({onlySelf:t})},AbstractControl.prototype.disable=function(e){var t=void 0===e?{}:e,n=t.onlySelf,r=t.emitEvent;this._status=Q,this._errors=null,this._forEachChild(function(e){e.disable({onlySelf:!0})}),this._updateValue(),r!==!1&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),this._updateAncestors(n),this._onDisabledChange.forEach(function(e){return e(!0)})},AbstractControl.prototype.enable=function(e){var t=void 0===e?{}:e,n=t.onlySelf,r=t.emitEvent;this._status=H,this._forEachChild(function(e){e.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r}),this._updateAncestors(n),this._onDisabledChange.forEach(function(e){return e(!1)})},AbstractControl.prototype._updateAncestors=function(e){this._parent&&!e&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())},AbstractControl.prototype.setParent=function(e){this._parent=e},AbstractControl.prototype.setValue=function(e,t){},AbstractControl.prototype.patchValue=function(e,t){},AbstractControl.prototype.reset=function(e,t){},AbstractControl.prototype.updateValueAndValidity=function(e){var t=void 0===e?{}:e,n=t.onlySelf,r=t.emitEvent;this._setInitialStatus(),this._updateValue(),this.enabled&&(this._errors=this._runValidator(),this._status=this._calculateStatus(),this._status!==H&&this._status!==J||this._runAsyncValidator(r)),r!==!1&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),this._parent&&!n&&this._parent.updateValueAndValidity({onlySelf:n,emitEvent:r})},AbstractControl.prototype._updateTreeValidity=function(e){var t=(void 0===e?{emitEvent:!0}:e).emitEvent;this._forEachChild(function(e){return e._updateTreeValidity({emitEvent:t})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t})},AbstractControl.prototype._setInitialStatus=function(){this._status=this._allControlsDisabled()?Q:H},AbstractControl.prototype._runValidator=function(){return this.validator?this.validator(this):null},AbstractControl.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this._status=J,this._cancelExistingSubscription();var n=toObservable(this.asyncValidator(this));if(!f(n))throw new Error("expected the following validator to return Promise or Observable: "+this.asyncValidator+". If you are using FormBuilder; did you forget to brace your validators in an array?");this._asyncValidationSubscription=n.subscribe({next:function(n){return t.setErrors(n,{emitEvent:e})}})}},AbstractControl.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},AbstractControl.prototype.setErrors=function(e,t){var n=(void 0===t?{}:t).emitEvent;
this._errors=e,this._updateControlsErrors(n!==!1)},AbstractControl.prototype.get=function(e){return _find(this,e,".")},AbstractControl.prototype.getError=function(e,t){void 0===t&&(t=null);var n=t?this.get(t):this;return n&&n._errors?n._errors[e]:null},AbstractControl.prototype.hasError=function(e,t){return void 0===t&&(t=null),!!this.getError(e,t)},Object.defineProperty(AbstractControl.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),AbstractControl.prototype._updateControlsErrors=function(e){this._status=this._calculateStatus(),e&&this._statusChanges.emit(this._status),this._parent&&this._parent._updateControlsErrors(e)},AbstractControl.prototype._initObservables=function(){this._valueChanges=new z,this._statusChanges=new z},AbstractControl.prototype._calculateStatus=function(){return this._allControlsDisabled()?Q:this._errors?K:this._anyControlsHaveStatus(J)?J:this._anyControlsHaveStatus(K)?K:H},AbstractControl.prototype._updateValue=function(){},AbstractControl.prototype._forEachChild=function(e){},AbstractControl.prototype._anyControls=function(e){},AbstractControl.prototype._allControlsDisabled=function(){},AbstractControl.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},AbstractControl.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},AbstractControl.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},AbstractControl.prototype._updatePristine=function(e){var t=(void 0===e?{}:e).onlySelf;this._pristine=!this._anyControlsDirty(),this._parent&&!t&&this._parent._updatePristine({onlySelf:t})},AbstractControl.prototype._updateTouched=function(e){var t=(void 0===e?{}:e).onlySelf;this._touched=this._anyControlsTouched(),this._parent&&!t&&this._parent._updateTouched({onlySelf:t})},AbstractControl.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},AbstractControl.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},AbstractControl}(),X=function(e){function FormControl(t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),e.call(this,coerceToValidator(n),coerceToAsyncValidator(r)),this._onChange=[],this._applyFormState(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}return G(FormControl,e),FormControl.prototype.setValue=function(e,t){var n=this,r=void 0===t?{}:t,o=r.onlySelf,i=r.emitEvent,a=r.emitModelToViewChange,s=r.emitViewToModelChange;this._value=e,this._onChange.length&&a!==!1&&this._onChange.forEach(function(e){return e(n._value,s!==!1)}),this.updateValueAndValidity({onlySelf:o,emitEvent:i})},FormControl.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},FormControl.prototype.reset=function(e,t){void 0===e&&(e=null);var n=void 0===t?{}:t,r=n.onlySelf,o=n.emitEvent;this._applyFormState(e),this.markAsPristine({onlySelf:r}),this.markAsUntouched({onlySelf:r}),this.setValue(this._value,{onlySelf:r,emitEvent:o})},FormControl.prototype._updateValue=function(){},FormControl.prototype._anyControls=function(e){return!1},FormControl.prototype._allControlsDisabled=function(){return this.disabled},FormControl.prototype.registerOnChange=function(e){this._onChange.push(e)},FormControl.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},FormControl.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},FormControl.prototype._forEachChild=function(e){},FormControl.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this._value=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this._value=e},FormControl}(Y),Z=function(e){function FormGroup(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),e.call(this,n,r),this.controls=t,this._initObservables(),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return G(FormGroup,e),FormGroup.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},FormGroup.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},FormGroup.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},FormGroup.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},FormGroup.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},FormGroup.prototype.setValue=function(e,t){var n=this,r=void 0===t?{}:t,o=r.onlySelf,i=r.emitEvent;this._checkAllValuesPresent(e),Object.keys(e).forEach(function(t){n._throwIfControlMissing(t),n.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:o,emitEvent:i})},FormGroup.prototype.patchValue=function(e,t){var n=this,r=void 0===t?{}:t,o=r.onlySelf,i=r.emitEvent;Object.keys(e).forEach(function(t){n.controls[t]&&n.controls[t].patchValue(e[t],{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:o,emitEvent:i})},FormGroup.prototype.reset=function(e,t){void 0===e&&(e={});var n=void 0===t?{}:t,r=n.onlySelf,o=n.emitEvent;this._forEachChild(function(t,n){t.reset(e[n],{onlySelf:!0,emitEvent:o})}),this.updateValueAndValidity({onlySelf:r,emitEvent:o}),this._updatePristine({onlySelf:r}),this._updateTouched({onlySelf:r})},FormGroup.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof X?t.value:t.getRawValue(),e})},FormGroup.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},FormGroup.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},FormGroup.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},FormGroup.prototype._updateValue=function(){this._value=this._reduceValue()},FormGroup.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(r,o){n=n||t.contains(o)&&e(r)}),n},FormGroup.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})},FormGroup.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n},FormGroup.prototype._allControlsDisabled=function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled},FormGroup.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},FormGroup}(Y),ee=function(e){function FormArray(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),e.call(this,n,r),this.controls=t,this._initObservables(),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return G(FormArray,e),FormArray.prototype.at=function(e){return this.controls[e]},FormArray.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},FormArray.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},FormArray.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity(),this._onCollectionChange()},FormArray.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(FormArray.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),FormArray.prototype.setValue=function(e,t){var n=this,r=void 0===t?{}:t,o=r.onlySelf,i=r.emitEvent;this._checkAllValuesPresent(e),e.forEach(function(e,t){n._throwIfControlMissing(t),n.at(t).setValue(e,{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:o,emitEvent:i})},FormArray.prototype.patchValue=function(e,t){var n=this,r=void 0===t?{}:t,o=r.onlySelf,i=r.emitEvent;e.forEach(function(e,t){n.at(t)&&n.at(t).patchValue(e,{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:o,emitEvent:i})},FormArray.prototype.reset=function(e,t){void 0===e&&(e=[]);var n=void 0===t?{}:t,r=n.onlySelf,o=n.emitEvent;this._forEachChild(function(t,n){t.reset(e[n],{onlySelf:!0,emitEvent:o})}),this.updateValueAndValidity({onlySelf:r,emitEvent:o}),this._updatePristine({onlySelf:r}),this._updateTouched({onlySelf:r})},FormArray.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof X?e.value:e.getRawValue()})},FormArray.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},FormArray.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},FormArray.prototype._updateValue=function(){var e=this;this._value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},FormArray.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},FormArray.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},FormArray.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},FormArray.prototype._allControlsDisabled=function(){for(var e=0,t=this.controls;e<t.length;e++){var n=t[e];if(n.enabled)return!1}return this.controls.length>0||this.disabled},FormArray.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},FormArray}(Y),te=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ne={provide:c,useExisting:t.forwardRef(function(){return oe})},re=Promise.resolve(null),oe=function(e){function NgForm(t,n){e.call(this),this._submitted=!1,this.ngSubmit=new z,this.form=new Z({},composeValidators(t),composeAsyncValidators(n))}return te(NgForm,e),Object.defineProperty(NgForm.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),NgForm.prototype.addControl=function(e){var t=this;re.then(function(){var n=t._findContainer(e.path);e._control=n.registerControl(e.name,e.control),setUpControl(e.control,e),e.control.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.getControl=function(e){return this.form.get(e.path)},NgForm.prototype.removeControl=function(e){var t=this;re.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},NgForm.prototype.addFormGroup=function(e){var t=this;re.then(function(){var n=t._findContainer(e.path),r=new Z({});setUpFormContainer(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.removeFormGroup=function(e){var t=this;re.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},NgForm.prototype.getFormGroup=function(e){return this.form.get(e.path)},NgForm.prototype.updateModel=function(e,t){var n=this;re.then(function(){var r=n.form.get(e.path);r.setValue(t)})},NgForm.prototype.setValue=function(e){this.control.setValue(e)},NgForm.prototype.onSubmit=function(e){return this._submitted=!0,this.ngSubmit.emit(e),!1},NgForm.prototype.onReset=function(){this.resetForm()},NgForm.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this._submitted=!1},NgForm.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},NgForm.decorators=[{type:t.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[ne],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],NgForm.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]}]},NgForm}(c),ie={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; let i=index">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '},ae=function(){function TemplateDrivenErrors(){}return TemplateDrivenErrors.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+ie.formControlName+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+ie.ngModelWithFormGroup)},TemplateDrivenErrors.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+ie.formGroupName+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+ie.ngModelGroup)},TemplateDrivenErrors.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},TemplateDrivenErrors.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+ie.formGroupName+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+ie.ngModelGroup)},TemplateDrivenErrors}(),se=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ce={provide:c,useExisting:t.forwardRef(function(){return ue})},ue=function(e){function NgModelGroup(t,n,r){e.call(this),this._parent=t,this._validators=n,this._asyncValidators=r}return se(NgModelGroup,e),NgModelGroup.prototype._checkParentType=function(){this._parent instanceof NgModelGroup||this._parent instanceof oe||ae.modelGroupParentException()},NgModelGroup.decorators=[{type:t.Directive,args:[{selector:"[ngModelGroup]",providers:[ce],exportAs:"ngModelGroup"}]}],NgModelGroup.ctorParameters=function(){return[{type:c,decorators:[{type:t.Host},{type:t.SkipSelf}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]}]},NgModelGroup.propDecorators={name:[{type:t.Input,args:["ngModelGroup"]}]},NgModelGroup}(L),le=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},de={provide:D,useExisting:t.forwardRef(function(){return pe})},fe=Promise.resolve(null),pe=function(e){function NgModel(t,n,r,o){e.call(this),this._control=new X,this._registered=!1,this.update=new z,this._parent=t,this._rawValidators=n||[],this._rawAsyncValidators=r||[],this.valueAccessor=selectValueAccessor(this,o)}return le(NgModel,e),NgModel.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),isPropertyUpdated(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},NgModel.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(NgModel.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"path",{get:function(){return this._parent?controlPath(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"validator",{get:function(){return composeValidators(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"asyncValidator",{get:function(){return composeAsyncValidators(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),NgModel.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},NgModel.prototype._setUpControl=function(){this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},NgModel.prototype._isStandalone=function(){return!this._parent||this.options&&this.options.standalone},NgModel.prototype._setUpStandalone=function(){setUpControl(this._control,this),this._control.updateValueAndValidity({emitEvent:!1})},NgModel.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},NgModel.prototype._checkParentType=function(){!(this._parent instanceof ue)&&this._parent instanceof L?ae.formGroupNameException():this._parent instanceof ue||this._parent instanceof oe||ae.modelParentException()},NgModel.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ae.missingNameException()},NgModel.prototype._updateValue=function(e){var t=this;fe.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},NgModel.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;fe.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},NgModel.decorators=[{type:t.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[de],exportAs:"ngModel"}]}],NgModel.ctorParameters=function(){return[{type:c,decorators:[{type:t.Optional},{type:t.Host}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[g]}]}]},NgModel.propDecorators={name:[{type:t.Input}],isDisabled:[{type:t.Input,args:["disabled"]}],model:[{type:t.Input,args:["ngModel"]}],options:[{type:t.Input,args:["ngModelOptions"]}],update:[{type:t.Output,args:["ngModelChange"]}]},NgModel}(D),he=function(){function ReactiveErrors(){}return ReactiveErrors.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ie.formControlName)},ReactiveErrors.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+ie.formGroupName+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+ie.ngModelGroup)},ReactiveErrors.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+ie.formControlName)},ReactiveErrors.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ie.formGroupName)},ReactiveErrors.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+ie.formArrayName)},ReactiveErrors.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},ReactiveErrors}(),me=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ge={provide:D,useExisting:t.forwardRef(function(){return ve})},ve=function(e){function FormControlDirective(t,n,r){e.call(this),this.update=new z,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=selectValueAccessor(this,r)}return me(FormControlDirective,e),Object.defineProperty(FormControlDirective.prototype,"isDisabled",{set:function(e){he.disabledAttrWarning()},enumerable:!0,configurable:!0}),FormControlDirective.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(setUpControl(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),isPropertyUpdated(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(FormControlDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"validator",{get:function(){return composeValidators(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"asyncValidator",{get:function(){return composeAsyncValidators(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),FormControlDirective.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},FormControlDirective.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},FormControlDirective.decorators=[{type:t.Directive,args:[{selector:"[formControl]",providers:[ge],exportAs:"ngForm"}]}],FormControlDirective.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[g]}]}]},FormControlDirective.propDecorators={form:[{type:t.Input,args:["formControl"]}],model:[{type:t.Input,args:["ngModel"]}],update:[{type:t.Output,args:["ngModelChange"]}],isDisabled:[{type:t.Input,args:["disabled"]}]},FormControlDirective}(D),ye=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},be={provide:c,useExisting:t.forwardRef(function(){return _e})},_e=function(e){function FormGroupDirective(t,n){e.call(this),this._validators=t,this._asyncValidators=n,this._submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new z}return ye(FormGroupDirective,e),FormGroupDirective.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(FormGroupDirective.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),FormGroupDirective.prototype.addControl=function(e){var t=this.form.get(e.path);return setUpControl(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},FormGroupDirective.prototype.getControl=function(e){return this.form.get(e.path)},FormGroupDirective.prototype.removeControl=function(e){l.remove(this.directives,e)},FormGroupDirective.prototype.addFormGroup=function(e){var t=this.form.get(e.path);setUpFormContainer(t,e),t.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormGroup=function(e){},FormGroupDirective.prototype.getFormGroup=function(e){return this.form.get(e.path)},FormGroupDirective.prototype.addFormArray=function(e){var t=this.form.get(e.path);setUpFormContainer(t,e),t.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormArray=function(e){},FormGroupDirective.prototype.getFormArray=function(e){return this.form.get(e.path)},FormGroupDirective.prototype.updateModel=function(e,t){var n=this.form.get(e.path);n.setValue(t)},FormGroupDirective.prototype.onSubmit=function(e){return this._submitted=!0,this.ngSubmit.emit(e),!1},FormGroupDirective.prototype.onReset=function(){this.resetForm()},FormGroupDirective.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this._submitted=!1},FormGroupDirective.prototype._updateDomValue=function(){var e=this;this.directives.forEach(function(t){var n=e.form.get(t.path);t._control!==n&&(cleanUpControl(t._control,t),n&&setUpControl(n,t),t._control=n)}),this.form._updateTreeValidity({emitEvent:!1})},FormGroupDirective.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},FormGroupDirective.prototype._updateValidators=function(){var e=composeValidators(this._validators);this.form.validator=m.compose([this.form.validator,e]);var t=composeAsyncValidators(this._asyncValidators);this.form.asyncValidator=m.composeAsync([this.form.asyncValidator,t])},FormGroupDirective.prototype._checkFormPresent=function(){this.form||he.missingFormException()},FormGroupDirective.decorators=[{type:t.Directive,args:[{selector:"[formGroup]",providers:[be],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],FormGroupDirective.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]}]},FormGroupDirective.propDecorators={form:[{type:t.Input,args:["formGroup"]}],ngSubmit:[{type:t.Output}]},FormGroupDirective}(c),Ce=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},we={provide:c,useExisting:t.forwardRef(function(){return Se})},Se=function(e){function FormGroupName(t,n,r){e.call(this),this._parent=t,this._validators=n,this._asyncValidators=r}return Ce(FormGroupName,e),FormGroupName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&he.groupParentException()},FormGroupName.decorators=[{type:t.Directive,args:[{selector:"[formGroupName]",providers:[we]}]}],FormGroupName.ctorParameters=function(){return[{type:c,decorators:[{type:t.Optional},{type:t.Host},{type:t.SkipSelf}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]}]},FormGroupName.propDecorators={name:[{type:t.Input,args:["formGroupName"]}]},FormGroupName}(L),De={provide:c,useExisting:t.forwardRef(function(){return ke})},ke=function(e){function FormArrayName(t,n,r){e.call(this),this._parent=t,this._validators=n,this._asyncValidators=r}return Ce(FormArrayName,e),FormArrayName.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},FormArrayName.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(FormArrayName.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"path",{get:function(){return controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"validator",{
get:function(){return composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"asyncValidator",{get:function(){return composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),FormArrayName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&he.arrayParentException()},FormArrayName.decorators=[{type:t.Directive,args:[{selector:"[formArrayName]",providers:[De]}]}],FormArrayName.ctorParameters=function(){return[{type:c,decorators:[{type:t.Optional},{type:t.Host},{type:t.SkipSelf}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]}]},FormArrayName.propDecorators={name:[{type:t.Input,args:["formArrayName"]}]},FormArrayName}(c),Ee=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Ae={provide:D,useExisting:t.forwardRef(function(){return xe})},xe=function(e){function FormControlName(t,n,r,o){e.call(this),this._added=!1,this.update=new z,this._parent=t,this._rawValidators=n||[],this._rawAsyncValidators=r||[],this.valueAccessor=selectValueAccessor(this,o)}return Ee(FormControlName,e),Object.defineProperty(FormControlName.prototype,"isDisabled",{set:function(e){he.disabledAttrWarning()},enumerable:!0,configurable:!0}),FormControlName.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),isPropertyUpdated(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},FormControlName.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},FormControlName.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(FormControlName.prototype,"path",{get:function(){return controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"validator",{get:function(){return composeValidators(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"asyncValidator",{get:function(){return composeAsyncValidators(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),FormControlName.prototype._checkParentType=function(){!(this._parent instanceof Se)&&this._parent instanceof L?he.ngModelGroupException():this._parent instanceof Se||this._parent instanceof _e||this._parent instanceof ke||he.controlParentException()},FormControlName.prototype._setUpControl=function(){this._checkParentType(),this._control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},FormControlName.decorators=[{type:t.Directive,args:[{selector:"[formControlName]",providers:[Ae]}]}],FormControlName.ctorParameters=function(){return[{type:c,decorators:[{type:t.Optional},{type:t.Host},{type:t.SkipSelf}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[p]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[h]}]},{type:Array,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[g]}]}]},FormControlName.propDecorators={name:[{type:t.Input,args:["formControlName"]}],model:[{type:t.Input,args:["ngModel"]}],update:[{type:t.Output,args:["ngModelChange"]}],isDisabled:[{type:t.Input,args:["disabled"]}]},FormControlName}(D),Ne=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Oe={provide:p,useExisting:t.forwardRef(function(){return Pe}),multi:!0},Ie={provide:p,useExisting:t.forwardRef(function(){return Re}),multi:!0},Pe=function(){function RequiredValidator(){}return Object.defineProperty(RequiredValidator.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&e!==!1&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),RequiredValidator.prototype.validate=function(e){return this.required?m.required(e):null},RequiredValidator.prototype.registerOnValidatorChange=function(e){this._onChange=e},RequiredValidator.decorators=[{type:t.Directive,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[Oe],host:{"[attr.required]":'required ? "" : null'}}]}],RequiredValidator.ctorParameters=function(){return[]},RequiredValidator.propDecorators={required:[{type:t.Input}]},RequiredValidator}(),Re=function(e){function CheckboxRequiredValidator(){e.apply(this,arguments)}return Ne(CheckboxRequiredValidator,e),CheckboxRequiredValidator.prototype.validate=function(e){return this.required?m.requiredTrue(e):null},CheckboxRequiredValidator.decorators=[{type:t.Directive,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[Ie],host:{"[attr.required]":'required ? "" : null'}}]}],CheckboxRequiredValidator.ctorParameters=function(){return[]},CheckboxRequiredValidator}(Pe),Te={provide:p,useExisting:t.forwardRef(function(){return je}),multi:!0},je=function(){function MinLengthValidator(){}return MinLengthValidator.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},MinLengthValidator.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},MinLengthValidator.prototype.registerOnValidatorChange=function(e){this._onChange=e},MinLengthValidator.prototype._createValidator=function(){this._validator=m.minLength(parseInt(this.minlength,10))},MinLengthValidator.decorators=[{type:t.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[Te],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],MinLengthValidator.ctorParameters=function(){return[]},MinLengthValidator.propDecorators={minlength:[{type:t.Input}]},MinLengthValidator}(),Fe={provide:p,useExisting:t.forwardRef(function(){return Me}),multi:!0},Me=function(){function MaxLengthValidator(){}return MaxLengthValidator.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},MaxLengthValidator.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},MaxLengthValidator.prototype.registerOnValidatorChange=function(e){this._onChange=e},MaxLengthValidator.prototype._createValidator=function(){this._validator=m.maxLength(parseInt(this.maxlength,10))},MaxLengthValidator.decorators=[{type:t.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[Fe],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],MaxLengthValidator.ctorParameters=function(){return[]},MaxLengthValidator.propDecorators={maxlength:[{type:t.Input}]},MaxLengthValidator}(),Le={provide:p,useExisting:t.forwardRef(function(){return Ve}),multi:!0},Ve=function(){function PatternValidator(){}return PatternValidator.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},PatternValidator.prototype.validate=function(e){return this._validator(e)},PatternValidator.prototype.registerOnValidatorChange=function(e){this._onChange=e},PatternValidator.prototype._createValidator=function(){this._validator=m.pattern(this.pattern)},PatternValidator.decorators=[{type:t.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Le],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],PatternValidator.ctorParameters=function(){return[]},PatternValidator.propDecorators={pattern:[{type:t.Input}]},PatternValidator}(),Be=function(){function FormBuilder(){}return FormBuilder.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=isPresent(t)?t.validator:null,o=isPresent(t)?t.asyncValidator:null;return new Z(n,r,o)},FormBuilder.prototype.control=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),new X(e,t,n)},FormBuilder.prototype.array=function(e,t,n){var r=this;void 0===t&&(t=null),void 0===n&&(n=null);var o=e.map(function(e){return r._createControl(e)});return new ee(o,t,n)},FormBuilder.prototype._reduceControls=function(e){var t=this,n={};return Object.keys(e).forEach(function(r){n[r]=t._createControl(e[r])}),n},FormBuilder.prototype._createControl=function(e){if(e instanceof X||e instanceof Z||e instanceof ee)return e;if(Array.isArray(e)){var t=e[0],n=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(t,n,r)}return this.control(e)},FormBuilder.decorators=[{type:t.Injectable}],FormBuilder.ctorParameters=function(){return[]},FormBuilder}(),qe=new t.Version("2.4.10"),$e=[P,j,_,w,N,y,I,T,A,$,U,Pe,je,Me,Ve,Re],Ue=[pe,ue,oe],We=[ve,_e,xe,Se,ke],ze=function(){function InternalFormsSharedModule(){}return InternalFormsSharedModule.decorators=[{type:t.NgModule,args:[{declarations:$e,exports:$e}]}],InternalFormsSharedModule.ctorParameters=function(){return[]},InternalFormsSharedModule}(),Ge=function(){function FormsModule(){}return FormsModule.decorators=[{type:t.NgModule,args:[{declarations:Ue,providers:[E],exports:[ze,Ue]}]}],FormsModule.ctorParameters=function(){return[]},FormsModule}(),He=function(){function ReactiveFormsModule(){}return ReactiveFormsModule.decorators=[{type:t.NgModule,args:[{declarations:[We],providers:[Be,E],exports:[ze,We]}]}],ReactiveFormsModule.ctorParameters=function(){return[]},ReactiveFormsModule}();e.AbstractControlDirective=a,e.AbstractFormGroupDirective=L,e.CheckboxControlValueAccessor=y,e.ControlContainer=c,e.NG_VALUE_ACCESSOR=g,e.DefaultValueAccessor=_,e.NgControl=D,e.NgControlStatus=$,e.NgControlStatusGroup=U,e.NgForm=oe,e.NgModel=pe,e.NgModelGroup=ue,e.RadioControlValueAccessor=A,e.FormControlDirective=ve,e.FormControlName=xe,e.FormGroupDirective=_e,e.FormArrayName=ke,e.FormGroupName=Se,e.NgSelectOption=P,e.SelectControlValueAccessor=I,e.SelectMultipleControlValueAccessor=T,e.CheckboxRequiredValidator=Re,e.MaxLengthValidator=Me,e.MinLengthValidator=je,e.PatternValidator=Ve,e.RequiredValidator=Pe,e.FormBuilder=Be,e.AbstractControl=Y,e.FormArray=ee,e.FormControl=X,e.FormGroup=Z,e.NG_ASYNC_VALIDATORS=h,e.NG_VALIDATORS=p,e.Validators=m,e.VERSION=qe,e.FormsModule=Ge,e.ReactiveFormsModule=He})},,,,function(e,t,n){!function(t,r){e.exports=r(n(3),n(24),n(22))}(this,function(e,t,n){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){"use strict";var r=n(1);t.NguiDatetime=r.NguiDatetime;var o=n(3);t.NguiDatetimePickerComponent=o.NguiDatetimePickerComponent;var i=n(4);t.NguiDatetimePickerDirective=i.NguiDatetimePickerDirective;var a=n(6);t.NguiDatetimePickerModule=a.NguiDatetimePickerModule},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(2),a=function(){function NguiDatetime(){}return NguiDatetime.formatDate=function(e,t,n){var r;if(e&&!t){var o=function(e){return("0"+e).slice(-2)};return r=e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate()),r+=n?"":" "+o(e.getHours())+":"+o(e.getMinutes())}return e&&"undefined"!=typeof moment?moment(e).format(t):""},NguiDatetime.parseDate=function(e,t,n){if("undefined"==typeof moment)return e=NguiDatetime.removeTimezone(e),e+=NguiDatetime.addDSTOffset(e),NguiDatetime.parseFromDefaultFormat(e);if(n||t){var r=[];t&&r.push(t),n&&r.push(n);var o=moment(e,r),i=o.toDate();return o.isValid()||(i=moment(e,moment.ISO_8601).toDate()),i}if(e.length>4){var i=moment(e,"YYYY-MM-DD HH:mm").toDate();return i}return new Date},NguiDatetime.getWeekNumber=function(e){e instanceof Date||(e=new Date);var t=(e.getDay()+6)%7;e.setDate(e.getDate()-t+3);var n=e.valueOf();return e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((n-e)/6048e5)},NguiDatetime.removeTimezone=function(e){var t=e.match(/[0-9]{2}:/);return e+=t?"":" 00:00:00",e.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1").replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2").replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,"").replace(/\s*\(\)\s*/,"").replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,"").replace(/000Z$/,"00")},NguiDatetime.addDSTOffset=function(e){var t=NguiDatetime.parseFromDefaultFormat(e),n=new Date(t.getFullYear(),0,1),r=new Date(t.getFullYear(),6,1),o=Math.max(n.getTimezoneOffset(),r.getTimezoneOffset()),i=t.getTimezoneOffset()<o,a=i?o-60:o,s=a>=0?"-":"+";return a=Math.abs(a),s+("0"+a/60).slice(-2)+":"+("0"+a%60).slice(-2)},NguiDatetime.parseFromDefaultFormat=function(e){var t=e.split(/[\+\-:\ T]/);return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10),parseInt(t[3]||"0",10),parseInt(t[4]||"0",10),parseInt(t[5]||"0",10))},NguiDatetime.prototype.getMonthData=function(e,t){e=t>11?e+1:t<0?e-1:e,t=(t+12)%12;var n=new Date(e,t,1),r=new Date(e,t+1,0),o=new Date(e,t,0),i=r.getDate(),a=o.getDate(),s=n.getDay(),c=(s-NguiDatetime.firstDayOfWeek+7)%7||7,u=NguiDatetime.days.slice(0,42-(c+i));u.length>7&&(u=u.slice(0,u.length-7));var l=new Date(n);l.setDate(n.getDate()-c%7);var d=NguiDatetime.getWeekNumber(l),f=Math.ceil((i+c%7)/7),p=Array(f).fill(0).map(function(e,t){var n=(t+d+52)%52;return 0===n?52:n}),h=NguiDatetime.daysOfWeek.concat(NguiDatetime.daysOfWeek).splice(NguiDatetime.firstDayOfWeek,7),m={year:e,month:t,weekends:NguiDatetime.weekends,firstDayOfWeek:NguiDatetime.firstDayOfWeek,fullName:NguiDatetime.months[t].fullName,shortName:NguiDatetime.months[t].shortName,localizedDaysOfWeek:h,days:NguiDatetime.days.slice(0,i),leadingDays:NguiDatetime.days.slice(-c-(31-a),a),trailingDays:u,weekNumbers:p};return m},NguiDatetime.locale={date:"date",time:"time",year:"year",month:"month",day:"day",hour:"hour",minute:"minute",currentTime:"current time"},NguiDatetime.days=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],NguiDatetime.weekends=[0,6],NguiDatetime.daysOfWeek="undefined"==typeof moment?[{fullName:"Sunday",shortName:"Su"},{fullName:"Monday",shortName:"Mo"},{fullName:"Tuesday",shortName:"Tu"},{fullName:"Wednesday",shortName:"We"},{fullName:"Thursday",shortName:"Th"},{fullName:"Friday",shortName:"Fr"},{fullName:"Saturday",shortName:"Sa"}]:moment.weekdays().map(function(e,t){return{fullName:e,shortName:moment.weekdaysShort()[t].substr(0,2)}}),NguiDatetime.firstDayOfWeek="undefined"==typeof moment?0:moment.localeData().firstDayOfWeek(),NguiDatetime.months="undefined"==typeof moment?[{fullName:"January",shortName:"Jan"},{fullName:"February",shortName:"Feb"},{fullName:"March",shortName:"Mar"},{fullName:"April",shortName:"Apr"},{fullName:"May",shortName:"May"},{fullName:"June",shortName:"Jun"},{fullName:"July",shortName:"Jul"},{fullName:"August",shortName:"Aug"},{fullName:"September",shortName:"Sep"},{fullName:"October",shortName:"Oct"},{fullName:"November",shortName:"Nov"},{fullName:"December",shortName:"Dec"}]:moment.months().map(function(e,t){return{fullName:e,shortName:moment.monthsShort()[t]}}),NguiDatetime=r([i.Injectable(),o("design:paramtypes",[])],NguiDatetime)}();t.NguiDatetime=a},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(2),a=n(1),s=function(){function NguiDatetimePickerComponent(e,t,n){this.nguiDatetime=t,this.cdRef=n,this.minuteStep=1,this.showWeekNumbers=!1,this.showTodayShortcut=!1,this.showAmPm=!1,this.selected$=new i.EventEmitter,this.closing$=new i.EventEmitter,this.locale=a.NguiDatetime.locale,this.showYearSelector=!1,this.el=e.nativeElement}return Object.defineProperty(NguiDatetimePickerComponent.prototype,"yearsSelectable",{get:function(){for(var e=this.year-100,t=this.year+50,n=[],r=e;r<t;r++)n.push(r);return n},enumerable:!0,configurable:!0}),Object.defineProperty(NguiDatetimePickerComponent.prototype,"year",{get:function(){return this.selectedDate.getFullYear()},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(NguiDatetimePickerComponent.prototype,"month",{get:function(){return this.selectedDate.getMonth()},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(NguiDatetimePickerComponent.prototype,"day",{get:function(){return this.selectedDate.getDate()},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(NguiDatetimePickerComponent.prototype,"monthData",{get:function(){return this._monthData},enumerable:!0,configurable:!0}),Object.defineProperty(NguiDatetimePickerComponent.prototype,"today",{get:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},set:function(e){},enumerable:!0,configurable:!0}),NguiDatetimePickerComponent.prototype.ngOnInit=function(){if(this.defaultValue&&!isNaN(this.defaultValue.getTime())||(this.defaultValue=new Date),this.selectedDate=this.defaultValue,"undefined"==typeof moment)this.hour=this.selectedDate.getHours(),this.minute=this.selectedDate.getMinutes();else{var e=moment(this.selectedDate);this.hour=e.hours(),this.minute=e.minute()}this._monthData=this.nguiDatetime.getMonthData(this.year,this.month)},NguiDatetimePickerComponent.prototype.isWeekend=function(e,t){if("undefined"==typeof t)return a.NguiDatetime.weekends.indexOf(e%7)!==-1;var n=this.toDate(e,t).getDay();return a.NguiDatetime.weekends.indexOf(n)!==-1},NguiDatetimePickerComponent.prototype.selectYear=function(e){this._monthData=this.nguiDatetime.getMonthData(e,this._monthData.month),this.showYearSelector=!1},NguiDatetimePickerComponent.prototype.toDate=function(e,t){return new Date(this._monthData.year,t||this._monthData.month,e)},NguiDatetimePickerComponent.prototype.toDateOnly=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)},NguiDatetimePickerComponent.prototype.selectCurrentTime=function(){this.hour=(new Date).getHours(),this.minute=(new Date).getMinutes(),this.selectDateTime()},NguiDatetimePickerComponent.prototype.selectDateTime=function(e){var t=this;if(this.selectedDate=e||this.selectedDate,this.isDateDisabled(this.selectedDate))return!1;var n=parseInt(""+this.hour||"0",10),r=parseInt(""+this.minute||"0",10);if("undefined"!=typeof moment){var o=moment([this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()]);o.hours(n),o.minutes(r),this.selectedDate=o.toDate()}else this.selectedDate.setHours(n),this.selectedDate.setMinutes(r);this.selectedDate.toString=function(){return a.NguiDatetime.formatDate(t.selectedDate,t.dateFormat,t.dateOnly)},this.selected$.emit(this.selectedDate)},NguiDatetimePickerComponent.prototype.updateMonthData=function(e){this._monthData=this.nguiDatetime.getMonthData(this._monthData.year,this._monthData.month+e)},NguiDatetimePickerComponent.prototype.isDateDisabled=function(e){var t=e.getTime();return this.disabledDatesInTime=this.disabledDatesInTime||(this.disabledDates||[]).map(function(e){return e.getTime()}),!!(this.minDate&&t<this.minDate.getTime())||(!!(this.maxDate&&t>this.maxDate.getTime())||this.disabledDatesInTime.indexOf(t)>=0)},NguiDatetimePickerComponent.prototype.close=function(){this.closing$.emit(!0)},NguiDatetimePickerComponent.prototype.selectToday=function(){this.selectDateTime(new Date)},NguiDatetimePickerComponent.prototype.convertHours=function(e){return this.showAmPm?(this.timeSuffix=e>=12?"PM":"AM",e=0==e?12:e>12?e-12:e):this.timeSuffix=null,("0"+e).slice(-2)},r([i.Input("date-format"),o("design:type",String)],NguiDatetimePickerComponent.prototype,"dateFormat",void 0),r([i.Input("date-only"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"dateOnly",void 0),r([i.Input("time-only"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"timeOnly",void 0),r([i.Input("selected-date"),o("design:type",Date)],NguiDatetimePickerComponent.prototype,"selectedDate",void 0),r([i.Input("hour"),o("design:type",Number)],NguiDatetimePickerComponent.prototype,"hour",void 0),r([i.Input("minute"),o("design:type",Number)],NguiDatetimePickerComponent.prototype,"minute",void 0),r([i.Input("minuteStep"),o("design:type",Number)],NguiDatetimePickerComponent.prototype,"minuteStep",void 0),r([i.Input("default-value"),o("design:type",Date)],NguiDatetimePickerComponent.prototype,"defaultValue",void 0),r([i.Input("min-date"),o("design:type",Date)],NguiDatetimePickerComponent.prototype,"minDate",void 0),r([i.Input("max-date"),o("design:type",Date)],NguiDatetimePickerComponent.prototype,"maxDate",void 0),r([i.Input("min-hour"),o("design:type",Number)],NguiDatetimePickerComponent.prototype,"minHour",void 0),r([i.Input("max-hour"),o("design:type",Number)],NguiDatetimePickerComponent.prototype,"maxHour",void 0),r([i.Input("disabled-dates"),o("design:type",Array)],NguiDatetimePickerComponent.prototype,"disabledDates",void 0),r([i.Input("show-close-button"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"showCloseButton",void 0),r([i.Input("show-close-layer"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"showCloseLayer",void 0),r([i.Input("show-week-numbers"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"showWeekNumbers",void 0),r([i.Input("show-today-shortcut"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"showTodayShortcut",void 0),r([i.Input("show-am-pm"),o("design:type",Boolean)],NguiDatetimePickerComponent.prototype,"showAmPm",void 0),r([i.Output("selected$"),o("design:type",i.EventEmitter)],NguiDatetimePickerComponent.prototype,"selected$",void 0),r([i.Output("closing$"),o("design:type",i.EventEmitter)],NguiDatetimePickerComponent.prototype,"closing$",void 0),r([i.ViewChild("hours"),o("design:type",i.ElementRef)],NguiDatetimePickerComponent.prototype,"hours",void 0),r([i.ViewChild("minutes"),o("design:type",i.ElementRef)],NguiDatetimePickerComponent.prototype,"minutes",void 0),NguiDatetimePickerComponent=r([i.Component({providers:[a.NguiDatetime],selector:"ngui-datetime-picker",template:'\n  <div class="closing-layer" (click)="close()" *ngIf="showCloseLayer" ></div>\n  <div class="ngui-datetime-picker">\n    <div class="close-button" *ngIf="showCloseButton" (click)="close()"></div>\n    \n    <!-- Month - Year  -->\n    <div class="month" *ngIf="!timeOnly">\n      <b class="prev_next prev year" (click)="updateMonthData(-12)">&laquo;</b>\n      <b class="prev_next prev month" (click)="updateMonthData(-1)">&lsaquo;</b>\n       <span title="{{monthData?.fullName}}">\n         {{monthData?.shortName}}\n       </span>\n       <span (click)="showYearSelector = true">\n        {{monthData.year}}\n       </span>\n      <b class="prev_next next year" (click)="updateMonthData(+12)">&raquo;</b>\n      <b class="prev_next next month" (click)="updateMonthData(+1)">&rsaquo;</b>\n    </div>\n\n    <!-- Week number / Days  -->\n    <div class="week-numbers-and-days"\n      [ngClass]="{\'show-week-numbers\': !timeOnly && showWeekNumbers}">\n      <!-- Week -->\n      <div class="week-numbers" *ngIf="!timeOnly && showWeekNumbers">\n        <div class="week-number" *ngFor="let weekNumber of monthData.weekNumbers">\n          {{weekNumber}}\n        </div>\n      </div>\n      \n      <!-- Date -->\n      <div class="days" *ngIf="!timeOnly">\n\n        <!-- Su Mo Tu We Th Fr Sa -->\n        <div class="day-of-week"\n             *ngFor="let dayOfWeek of monthData.localizedDaysOfWeek; let ndx=index"\n             [class.weekend]="isWeekend(ndx + monthData.firstDayOfWeek)"\n             title="{{dayOfWeek.fullName}}">\n          {{dayOfWeek.shortName}}\n        </div>\n\n        <!-- Fill up blank days for this month -->\n        <div *ngIf="monthData.leadingDays.length < 7">\n          <div class="day"\n              (click)="updateMonthData(-1)"\n               *ngFor="let dayNum of monthData.leadingDays">\n            {{dayNum}}\n          </div>\n        </div>\n\n        <div class="day"\n             *ngFor="let dayNum of monthData.days"\n             (click)="selectDateTime(toDate(dayNum))"\n             title="{{monthData.year}}-{{monthData.month+1}}-{{dayNum}}"\n             [ngClass]="{\n               selectable: !isDateDisabled(toDate(dayNum)),\n               selected: toDate(dayNum).getTime() === toDateOnly(selectedDate).getTime(),\n               today: toDate(dayNum).getTime() === today.getTime(),\n               weekend: isWeekend(dayNum, monthData.month)\n             }">\n          {{dayNum}}\n        </div>\n\n        <!-- Fill up blank days for this month -->\n        <div *ngIf="monthData.trailingDays.length < 7">\n          <div class="day"\n               (click)="updateMonthData(+1)"\n               *ngFor="let dayNum of monthData.trailingDays">\n            {{dayNum}}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="shortcuts" *ngIf="showTodayShortcut">\n      <a href="#" (click)="selectToday()">Today</a>\n    </div>\n\n    <!-- Hour Minute -->\n    <div class="time" id="time" *ngIf="!dateOnly">\n      <div class="select-current-time" (click)="selectCurrentTime()">{{locale.currentTime}}</div>\n      <label class="timeLabel">{{locale.time}}</label>\n      <span class="timeValue">\n        {{convertHours(hour)}} : {{("0"+minute).slice(-2)}} {{timeSuffix}}\n      </span><br/>\n      <div>\n        <label class="hourLabel">{{locale.hour}}:</label>\n        <input #hours class="hourInput"\n               tabindex="90000"\n               (change)="selectDateTime()"\n               type="range"\n               min="{{minHour || 0}}"\n               max="{{maxHour || 23}}"\n               [(ngModel)]="hour" />\n      </div>\n      <div>\n        <label class="minutesLabel">{{locale.minute}}:</label>\n        <input #minutes class="minutesInput"\n               tabindex="90000"\n               step="{{minuteStep}}"\n               (change)="selectDateTime()"\n               type="range" min="0" max="59" range="10" [(ngModel)]="minute"/>\n      </div>\n    </div>\n\n    <!-- Year Selector -->\n    <div class="year-selector" *ngIf="showYearSelector">\n      <div class="locale">\n        <b>{{locale.year}}</b>\n      </div>\n      <span class="year" \n        *ngFor="let year of yearsSelectable"\n        (click)="selectYear(year)">\n        {{year}}\n      </span>\n    </div>\n  </div>\n  ',styles:["\n@keyframes slideDown {\n  0% {\n    transform:  translateY(-10px);\n  }\n  100% {\n    transform: translateY(0px);\n  }\n}\n\n@keyframes slideUp {\n  0% {\n    transform: translateY(100%);\n  }\n  100% {\n    transform: translateY(0%);\n  }\n}\n\n.ngui-datetime-picker-wrapper {\n  position: relative;\n}\n\n.ngui-datetime-picker {\n  color: #333;\n  outline-width: 0;\n  font: normal 14px sans-serif;\n  border: 1px solid #ddd;\n  display: inline-block;\n  background: #fff;\n  animation: slideDown 0.1s ease-in-out;\n  animation-fill-mode: both;\n}\n.ngui-datetime-picker .days {\n  width: 210px; /* 30 x 7 days */\n  box-sizing: content-box;\n}\n.ngui-datetime-picker .close-button {\n  position: absolute;\n  width: 1em;\n  height: 1em;\n  right: 0;\n  z-index: 1;\n  padding: 0 5px;\n  box-sizing: content-box;\n}\n.ngui-datetime-picker .close-button:before {\n  content: 'X';\n  cursor: pointer;\n  color: #ff0000;\n}\n.ngui-datetime-picker > .month {\n  text-align: center;\n  line-height: 22px;\n  padding: 10px;\n  background: #fcfcfc;\n  text-transform: uppercase;\n  font-weight: bold;\n  border-bottom: 1px solid #ddd;\n  position: relative;\n}\n\n.ngui-datetime-picker > .month > .prev_next {\n  color: #555;\n  display: block;\n  font: normal 24px sans-serif;\n  outline: none;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  width: 25px;\n  text-align: center;\n  box-sizing: content-box;\n}\n.ngui-datetime-picker > .month > .prev_next:hover {\n  background-color: #333;\n  color: #fff;\n}\n.ngui-datetime-picker > .month > .prev_next.prev {\n  float: left;\n}\n.ngui-datetime-picker > .month > .prev_next.next {\n  float: right;\n}\n\n.ngui-datetime-picker .week-numbers-and-days {\n  text-align: center;\n}\n.ngui-datetime-picker .week-numbers {\n  line-height: 30px;\n  display: inline-block;\n  padding: 30px 0 0 0;\n  color: #ddd;\n  text-align: right;\n  width: 21px;\n  vertical-align: top;\n  box-sizing: content-box;\n}\n\n.ngui-datetime-picker  .days {\n  display: inline-block;\n  width: 210px; /* 30 x 7 */\n  text-align: center;\n  padding: 0 10px;\n  box-sizing: content-box;\n}\n.ngui-datetime-picker .days .day-of-week,\n.ngui-datetime-picker .days .day {\n  box-sizing: border-box;\n  border: 1px solid transparent;\n  width: 30px;\n  line-height: 28px;\n  float: left;\n}\n.ngui-datetime-picker .days .day-of-week {\n  font-weight: bold;\n}\n.ngui-datetime-picker .days .day-of-week.weekend {\n  color: #ccc;\n  background-color: inherit;\n}\n.ngui-datetime-picker .days .day:not(.selectable) {\n  color: #ccc;\n  cursor: default;\n}\n.ngui-datetime-picker .days .weekend {\n  color: #ccc;\n  background-color: #eee;\n}\n.ngui-datetime-picker .days .day.selectable  {\n  cursor: pointer;\n}\n.ngui-datetime-picker .days .day.selected {\n  background: gray;\n  color: #fff;\n}\n.ngui-datetime-picker .days .day:not(.selected).selectable:hover {\n  background: #eee;\n}\n.ngui-datetime-picker .days:after {\n  content: '';\n  display: block;\n  clear: left;\n  height: 0;\n}\n.ngui-datetime-picker .time {\n  position: relative;\n  padding: 10px;\n  text-transform: Capitalize;\n}\n.ngui-datetime-picker .year-selector {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: #fff;\n  height: 100%;\n  overflow: auto; \n  padding: 5px;\n  z-index: 2;\n}\n.ngui-datetime-picker .year-selector .locale{\n  text-align: center;\n}\n.ngui-datetime-picker .year-selector .year {\n  display: inline-block;\n  cursor: pointer;\n  padding: 2px 5px;\n}\n.ngui-datetime-picker .year-selector .year:hover {\n  background-color: #ddd;\n}\n.ngui-datetime-picker .select-current-time {\n  position: absolute;\n  top: 1em;\n  right: 5px;\n  z-index: 1;\n  cursor: pointer;\n  color: #0000ff;\n}\n.ngui-datetime-picker .hourLabel,\n.ngui-datetime-picker .minutesLabel {\n  display: inline-block;\n  width: 45px;\n  vertical-align: top;\n  box-sizing: content-box;\n}\n.closing-layer {\n  display: block;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(0,0,0,0);\n}\n\n.ngui-datetime-picker .shortcuts {\n  padding: 10px;\n  text-align: center;\n}\n\n.ngui-datetime-picker .shortcuts a {\n  font-family: Sans-serif;\n  margin: 0 0.5em;\n  text-decoration: none;\n}\n\n@media (max-width: 767px) {\n  .ngui-datetime-picker {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;    \n    width: auto !important;\n    animation: slideUp 0.1s ease-in-out;\n  }\n\n  .ngui-datetime-picker > .days {\n    display: block;\n    margin: 0 auto;\n  }\n\n  .closing-layer {\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: rgba(0,0,0,0.2);\n  }\n}\n  "],
encapsulation:i.ViewEncapsulation.None}),o("design:paramtypes",[i.ElementRef,a.NguiDatetime,i.ChangeDetectorRef])],NguiDatetimePickerComponent)}();t.NguiDatetimePickerComponent=s},function(e,t,n){"use strict";function isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function isNaN(e){return Number.isNaN?Number.isNaN(e):e!==e}var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=n(2),s=n(5),c=n(3),u=n(1),l=function(){function NguiDatetimePickerDirective(e,t,n){var r=this;this.resolver=e,this.viewContainerRef=t,this.parent=n,this.closeOnSelect=!0,this.showTodayShortcut=!1,this.isDraggable=!0,this.ngModelChange=new a.EventEmitter,this.valueChanged$=new a.EventEmitter,this.popupClosed$=new a.EventEmitter,this.userModifyingValue=!1,this.handleKeyDown=function(e){r.userModifyingValue=!0},this.inputElValueChanged=function(e){r.setInputElDateValue(e),r.el.value=e.toString(),r.ctrl&&r.ctrl.patchValue(r.el.value),r.ngModel=r.el.dateValue,r.ngModel&&(r.ngModel.toString=function(){return r.el.value},r.ngModelChange.emit(r.ngModel))},this.showDatetimePicker=function(e){if(!r.componentRef){var t=r.resolver.resolveComponentFactory(c.NguiDatetimePickerComponent);r.componentRef=r.viewContainerRef.createComponent(t),r.nguiDatetimePickerEl=r.componentRef.location.nativeElement,r.nguiDatetimePickerEl.setAttribute("tabindex","32767"),r.nguiDatetimePickerEl.setAttribute("draggable",String(r.isDraggable)),r.nguiDatetimePickerEl.addEventListener("mousedown",function(e){r.clickedDatetimePicker=!0}),r.nguiDatetimePickerEl.addEventListener("mouseup",function(e){r.clickedDatetimePicker=!1}),r.nguiDatetimePickerEl.addEventListener("click",function(e){e.stopPropagation()}),r.nguiDatetimePickerEl.addEventListener("blur",function(e){r.hideDatetimePicker()}),r.nguiDatetimePickerEl.addEventListener("dragstart",r.drag_start,!1),document.body.addEventListener("dragover",r.drag_over,!1),document.body.addEventListener("drop",r.drop,!1);var n=r.componentRef.instance;n.defaultValue=r.defaultValue||r.el.dateValue,n.dateFormat=r.dateFormat,n.dateOnly=r.dateOnly,n.timeOnly=r.timeOnly,n.minuteStep=r.minuteStep,n.minDate=r.minDate,n.maxDate=r.maxDate,n.minHour=r.minHour,n.maxHour=r.maxHour,n.disabledDates=r.disabledDates,n.showCloseButton=r.closeOnSelect===!1,n.showCloseLayer=r.showCloseLayer,n.showTodayShortcut=r.showTodayShortcut,n.showWeekNumbers=r.showWeekNumbers,r.styleDatetimePicker(),n.selected$.subscribe(r.dateSelected),n.closing$.subscribe(function(){r.hideDatetimePicker()})}},this.dateSelected=function(e){"INPUT"===r.el.tagName&&r.inputElValueChanged(e),r.valueChanged$.emit(e),r.closeOnSelect!==!1?r.hideDatetimePicker():r.nguiDatetimePickerEl.focus()},this.hideDatetimePicker=function(e){return!r.clickedDatetimePicker&&(setTimeout(function(){r.componentRef&&(r.componentRef.destroy(),r.componentRef=void 0),r.popupClosed$.emit(!0)}),void(e&&e.stopPropagation()))},this.getDate=function(e){var t=e;return"string"==typeof e&&(t=u.NguiDatetime.parseDate(e,r.parseFormat,r.dateFormat)),t},this.drag_start=function(e){if("INPUT"==document.activeElement.tagName)return e.preventDefault(),!1;var t=window.getComputedStyle(e.target,null);e.dataTransfer.setData("text/plain",parseInt(t.getPropertyValue("left"),10)-e.clientX+","+(parseInt(t.getPropertyValue("top"),10)-e.clientY))},this.drop=function(e){var t=e.dataTransfer.getData("text/plain").split(",");return r.nguiDatetimePickerEl.style.left=e.clientX+parseInt(t[0],10)+"px",r.nguiDatetimePickerEl.style.top=e.clientY+parseInt(t[1],10)+"px",r.nguiDatetimePickerEl.style.bottom="",e.preventDefault(),!1},this.el=this.viewContainerRef.element.nativeElement}return NguiDatetimePickerDirective.prototype.normalizeInput=function(){if(this.defaultValue&&"string"==typeof this.defaultValue){var e=u.NguiDatetime.parseDate(this.defaultValue);this.defaultValue=isNaN(e.getTime())?new Date:e}if(this.minDate&&"string"==typeof this.minDate){var e=u.NguiDatetime.parseDate(this.minDate);this.minDate=isNaN(e.getTime())?new Date:e}if(this.maxDate&&"string"==typeof this.maxDate){var e=u.NguiDatetime.parseDate(this.maxDate);this.maxDate=isNaN(e.getTime())?new Date:e}if(this.minHour)if(this.minHour instanceof Date)this.minHour=this.minHour.getHours();else{var t=Number(this.minHour.toString());(!isInteger(t)||t>23||t<0)&&(this.minHour=void 0)}if(this.maxHour)if(this.maxHour instanceof Date)this.maxHour=this.maxHour.getHours();else{var t=Number(this.maxHour.toString());(!isInteger(t)||t>23||t<0)&&(this.maxHour=void 0)}},NguiDatetimePickerDirective.prototype.ngOnInit=function(){var e=this;if(this.parent&&this.formControlName){if(this.parent.form)this.ctrl=this.parent.form.get(this.formControlName);else if(this.parent.name){var t=this.parent.formDirective;t instanceof s.FormGroupDirective&&t.form.get(this.parent.name)&&(this.ctrl=t.form.get(this.parent.name).get(this.formControlName))}this.ctrl&&(this.sub=this.ctrl.valueChanges.subscribe(function(t){e.setInputElDateValue(t),e.updateDatepicker()}))}this.normalizeInput();var n=document.createElement("div");n.className="ngui-datetime-picker-wrapper",this.el.parentElement.insertBefore(n,this.el.nextSibling),n.appendChild(this.el),this.ngModel&&this.ngModel.getTime&&(this.ngModel.toString=function(){return u.NguiDatetime.formatDate(e.ngModel,e.dateFormat,e.dateOnly)}),setTimeout(function(){"INPUT"===e.el.tagName&&e.inputElValueChanged(e.el.value),e.ctrl&&e.ctrl.markAsPristine()})},NguiDatetimePickerDirective.prototype.ngAfterViewInit=function(){this.inputEl="INPUT"===this.el.tagName?this.el:this.el.querySelector("input"),this.inputEl&&(this.inputEl.addEventListener("focus",this.showDatetimePicker),this.inputEl.addEventListener("blur",this.hideDatetimePicker),this.inputEl.addEventListener("keydown",this.handleKeyDown))},NguiDatetimePickerDirective.prototype.ngOnChanges=function(e){var t,n=this;e&&e.ngModel&&(t=e.ngModel.currentValue,t&&"string"!=typeof t?(t.toString=function(){return u.NguiDatetime.formatDate(t,n.dateFormat,n.dateOnly)},this.setInputElDateValue(t),this.updateDatepicker()):t&&"string"==typeof t&&(this.userModifyingValue||setTimeout(function(){var e=n.getDate(t);e.toString=function(){return u.NguiDatetime.formatDate(e,n.dateFormat,n.dateOnly)},n.ngModel=e,n.inputEl.value=""+e}))),this.userModifyingValue=!1},NguiDatetimePickerDirective.prototype.updateDatepicker=function(){if(this.componentRef){var e=this.componentRef.instance;e.defaultValue=this.el.dateValue}},NguiDatetimePickerDirective.prototype.setInputElDateValue=function(e){"string"==typeof e&&e?this.el.dateValue=this.getDate(e):"object"==typeof e?this.el.dateValue=e:"undefined"==typeof e&&(this.el.dateValue=null),this.ctrl&&this.ctrl.markAsDirty()},NguiDatetimePickerDirective.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},NguiDatetimePickerDirective.prototype.elementIn=function(e,t){for(;e=e.parentNode;)if(e===t)return!0;return!1},NguiDatetimePickerDirective.prototype.styleDatetimePicker=function(){var e=this;this.el.getBoundingClientRect();this.nguiDatetimePickerEl.style.position="absolute",this.nguiDatetimePickerEl.style.zIndex="1000",this.nguiDatetimePickerEl.style.left="0",this.nguiDatetimePickerEl.style.transition="height 0.3s ease-in",this.nguiDatetimePickerEl.style.visibility="hidden",setTimeout(function(){var t=e.el.getBoundingClientRect(),n=e.nguiDatetimePickerEl.getBoundingClientRect();t.bottom+n.height>window.innerHeight?e.nguiDatetimePickerEl.style.bottom=t.bottom-window.innerHeight+15+"px":e.nguiDatetimePickerEl.style.top=t.height+"px",e.nguiDatetimePickerEl.style.visibility="visible"})},NguiDatetimePickerDirective.prototype.drag_over=function(e){return e.preventDefault(),!1},r([a.Input("date-format"),o("design:type",String)],NguiDatetimePickerDirective.prototype,"dateFormat",void 0),r([a.Input("parse-format"),o("design:type",String)],NguiDatetimePickerDirective.prototype,"parseFormat",void 0),r([a.Input("date-only"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"dateOnly",void 0),r([a.Input("time-only"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"timeOnly",void 0),r([a.Input("close-on-select"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"closeOnSelect",void 0),r([a.Input("default-value"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"defaultValue",void 0),r([a.Input("minute-step"),o("design:type",Number)],NguiDatetimePickerDirective.prototype,"minuteStep",void 0),r([a.Input("min-date"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"minDate",void 0),r([a.Input("max-date"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"maxDate",void 0),r([a.Input("min-hour"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"minHour",void 0),r([a.Input("max-hour"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"maxHour",void 0),r([a.Input("disabled-dates"),o("design:type",Array)],NguiDatetimePickerDirective.prototype,"disabledDates",void 0),r([a.Input("show-close-layer"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"showCloseLayer",void 0),r([a.Input("show-today-shortcut"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"showTodayShortcut",void 0),r([a.Input("show-week-numbers"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"showWeekNumbers",void 0),r([a.Input(),o("design:type",String)],NguiDatetimePickerDirective.prototype,"formControlName",void 0),r([a.Input("is-draggable"),o("design:type",Boolean)],NguiDatetimePickerDirective.prototype,"isDraggable",void 0),r([a.Input("ngModel"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"ngModel",void 0),r([a.Output("ngModelChange"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"ngModelChange",void 0),r([a.Output("valueChanged"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"valueChanged$",void 0),r([a.Output("popupClosed"),o("design:type",Object)],NguiDatetimePickerDirective.prototype,"popupClosed$",void 0),NguiDatetimePickerDirective=r([a.Directive({selector:"[ngui-datetime-picker]",providers:[u.NguiDatetime]}),i(2,a.Optional()),i(2,a.Host()),i(2,a.SkipSelf()),o("design:paramtypes",[a.ComponentFactoryResolver,a.ViewContainerRef,s.ControlContainer])],NguiDatetimePickerDirective)}();t.NguiDatetimePickerDirective=l},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(2),a=n(5),s=n(7),c=n(1),u=n(3),l=n(4),d=function(){function NguiDatetimePickerModule(){}return NguiDatetimePickerModule=r([i.NgModule({imports:[s.CommonModule,a.FormsModule],declarations:[u.NguiDatetimePickerComponent,l.NguiDatetimePickerDirective],exports:[u.NguiDatetimePickerComponent,l.NguiDatetimePickerDirective],entryComponents:[u.NguiDatetimePickerComponent],providers:[c.NguiDatetime]}),o("design:paramtypes",[])],NguiDatetimePickerModule)}();t.NguiDatetimePickerModule=d},function(e,t){e.exports=n}])})},function(e,t,n){"use strict";var r=n(30);t.SimpleNotificationsModule=r.SimpleNotificationsModule;var o=n(33);t.SimpleNotificationsComponent=o.SimpleNotificationsComponent;var i=n(35);t.NotificationComponent=i.NotificationComponent;var a=n(31);t.NotificationsService=a.NotificationsService;var s=n(37);t.MaxPipe=s.MaxPipe;var c=n(38);t.PushNotificationsModule=c.PushNotificationsModule;var u=n(39);t.PushNotificationsService=u.PushNotificationsService},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(22),s=n(31),c=n(33),u=n(35),l=n(37),d=function(){function SimpleNotificationsModule(){}return SimpleNotificationsModule.forRoot=function(){return{ngModule:SimpleNotificationsModule,providers:[s.NotificationsService]}},SimpleNotificationsModule=r([i.NgModule({imports:[a.CommonModule],declarations:[c.SimpleNotificationsComponent,u.NotificationComponent,l.MaxPipe],providers:[],exports:[c.SimpleNotificationsComponent]}),o("design:paramtypes",[])],SimpleNotificationsModule)}();t.SimpleNotificationsModule=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(6),s=n(32),c=function(){function NotificationsService(){this.emitter=new a.Subject,this.icons=s.defaultIcons}return NotificationsService.prototype.set=function(e,t){return e.id=e.override&&e.override.id?e.override.id:Math.random().toString(36).substring(3),e.click=new i.EventEmitter,this.emitter.next({command:"set",notification:e,add:t}),e},NotificationsService.prototype.getChangeEmitter=function(){return this.emitter},NotificationsService.prototype.success=function(e,t,n){return this.set({title:e,content:t,type:"success",icon:this.icons.success,override:n},!0)},NotificationsService.prototype.error=function(e,t,n){return this.set({title:e,content:t,type:"error",icon:this.icons.error,override:n},!0)},NotificationsService.prototype.alert=function(e,t,n){return this.set({title:e,content:t,type:"alert",icon:this.icons.alert,override:n},!0)},NotificationsService.prototype.info=function(e,t,n){return this.set({title:e,content:t,type:"info",icon:this.icons.info,override:n},!0)},NotificationsService.prototype.bare=function(e,t,n){return this.set({title:e,content:t,type:"bare",icon:"bare",override:n},!0)},NotificationsService.prototype.create=function(e,t,n,r){return this.set({title:e,content:t,type:n,icon:"bare",override:r},!0)},NotificationsService.prototype.html=function(e,t,n){return this.set({html:e,type:t,icon:"bare",override:n},!0)},NotificationsService.prototype.remove=function(e){e?this.emitter.next({command:"clean",id:e}):this.emitter.next({command:"cleanAll"})},NotificationsService=r([i.Injectable(),o("design:paramtypes",[])],NotificationsService)}();t.NotificationsService=c},function(e,t){"use strict";t.defaultIcons={alert:'\n        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n            <path d="M0 0h24v24H0z" fill="none"/>\n            <path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>\n        </svg>',error:'\n        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n            <path d="M0 0h24v24H0V0z" fill="none"/>\n            <path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>\n        </svg>\n    ',info:'\n        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n            <path d="M0 0h24v24H0z" fill="none"/>\n            <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>\n        </svg>\n    ',success:'\n        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n            <path d="M0 0h24v24H0z" fill="none"/>\n            <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n        </svg>\n    '}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(31),s=n(34),c=function(){function SimpleNotificationsComponent(e){this._service=e,this.onCreate=new i.EventEmitter,this.onDestroy=new i.EventEmitter,this.notifications=[],this.position=["bottom","right"],this.lastOnBottom=!0,this.maxStack=8,this.preventLastDuplicates=!1,this.preventDuplicates=!1,this.timeOut=0,this.maxLength=0,this.clickToClose=!0,this.showProgressBar=!0,this.pauseOnHover=!0,this.theClass="",this.rtl=!1,this.animate="fromRight"}return Object.defineProperty(SimpleNotificationsComponent.prototype,"options",{set:function(e){this.attachChanges(e)},enumerable:!0,configurable:!0}),SimpleNotificationsComponent.prototype.ngOnInit=function(){var e=this;this.listener=this._service.getChangeEmitter().subscribe(function(t){switch(t.command){case"cleanAll":e.notifications=[];break;case"clean":e.cleanSingle(t.id);break;case"set":t.add?e.add(t.notification):e.defaultBehavior(t);break;default:e.defaultBehavior(t)}})},SimpleNotificationsComponent.prototype.defaultBehavior=function(e){this.notifications.splice(this.notifications.indexOf(e.notification),1),this.onDestroy.emit(this.buildEmit(e.notification,!1))},SimpleNotificationsComponent.prototype.add=function(e){e.createdOn=new Date;var t=!(!this.preventLastDuplicates&&!this.preventDuplicates)&&this.block(e);this.lastNotificationCreated=e,t||(this.lastOnBottom?(this.notifications.length>=this.maxStack&&this.notifications.splice(0,1),this.notifications.push(e)):(this.notifications.length>=this.maxStack&&this.notifications.splice(this.notifications.length-1,1),this.notifications.splice(0,0,e)),this.onCreate.emit(this.buildEmit(e,!0)))},SimpleNotificationsComponent.prototype.block=function(e){var t=e.html?this.checkHtml:this.checkStandard;if(this.preventDuplicates&&this.notifications.length>0)for(var n=0;n<this.notifications.length;n++)if(t(this.notifications[n],e))return!0;if(this.preventLastDuplicates){var r=void 0;if("visible"===this.preventLastDuplicates&&this.notifications.length>0)r=this.lastOnBottom?this.notifications[this.notifications.length-1]:this.notifications[0];else{if("all"!==this.preventLastDuplicates||!this.lastNotificationCreated)return!1;r=this.lastNotificationCreated}return t(r,e)}return!1},SimpleNotificationsComponent.prototype.checkStandard=function(e,t){return e.type===t.type&&e.title===t.title&&e.content===t.content},SimpleNotificationsComponent.prototype.checkHtml=function(e,t){return!!e.html&&(e.type===t.type&&e.title===t.title&&e.content===t.content&&e.html===t.html)},SimpleNotificationsComponent.prototype.attachChanges=function(e){var t=this;Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&(t[n]=e[n])})},SimpleNotificationsComponent.prototype.buildEmit=function(e,t){var n={createdOn:e.createdOn,type:e.type,icon:e.icon,id:e.id};return e.html?n.html=e.html:(n.title=e.title,n.content=e.content),t||(n.destroyedOn=new Date),n},SimpleNotificationsComponent.prototype.cleanSingle=function(e){var t=0,n=!1;this.notifications.forEach(function(r,o){r.id===e&&(t=o,n=!0)}),n&&this.notifications.splice(t,1)},SimpleNotificationsComponent.prototype.ngOnDestroy=function(){this.listener&&this.listener.unsubscribe()},r([i.Input(),o("design:type","function"==typeof(e="undefined"!=typeof s.Options&&s.Options)&&e||Object),o("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.Options&&s.Options)&&t||Object])],SimpleNotificationsComponent.prototype,"options",null),r([i.Output(),o("design:type",Object)],SimpleNotificationsComponent.prototype,"onCreate",void 0),r([i.Output(),o("design:type",Object)],SimpleNotificationsComponent.prototype,"onDestroy",void 0),SimpleNotificationsComponent=r([i.Component({selector:"simple-notifications",encapsulation:i.ViewEncapsulation.None,template:'\n        <div class="simple-notification-wrapper" [ngClass]="position">\n            <simple-notification\n                *ngFor="let a of notifications; let i = index"\n                [item]="a"\n                [timeOut]="timeOut"\n                [clickToClose]="clickToClose"\n                [maxLength]="maxLength"\n                [showProgressBar]="showProgressBar"\n                [pauseOnHover]="pauseOnHover"\n                [theClass]="theClass"\n                [rtl]="rtl"\n                [animate]="animate"\n                [position]="i"\n                >\n            </simple-notification>\n        </div>\n    ',styles:["\n        .simple-notification-wrapper {\n            position: fixed;\n            width: 300px;\n            z-index: 1000;\n        }\n        \n        .simple-notification-wrapper.left { left: 20px; }\n        .simple-notification-wrapper.top { top: 20px; }\n        .simple-notification-wrapper.right { right: 20px; }\n        .simple-notification-wrapper.bottom { bottom: 20px; }\n        \n        @media (max-width: 340px) {\n            .simple-notification-wrapper {\n                width: auto;\n                left: 20px;\n                right: 20px;\n            }\n        }\n    "]}),o("design:paramtypes",["function"==typeof(n="undefined"!=typeof a.NotificationsService&&a.NotificationsService)&&n||Object])],SimpleNotificationsComponent);var e,t,n}();t.SimpleNotificationsComponent=c},function(e,t){"use strict"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(21),s=n(36),c=n(31),u=function(){function NotificationComponent(e,t,n){var r=this;this.notificationService=e,this.domSanitizer=t,this.zone=n,this.progressWidth=0,this.stopTime=!1,this.count=0,this.instance=function(){r.zone.runOutsideAngular(function(){r.zone.run(function(){return r.diff=(new Date).getTime()-r.start-r.count*r.speed}),r.count++===r.steps?r.zone.run(function(){return r.remove()}):r.stopTime||(r.showProgressBar&&r.zone.run(function(){return r.progressWidth+=100/r.steps}),r.timer=setTimeout(r.instance,r.speed-r.diff))})}}return NotificationComponent.prototype.ngOnInit=function(){this.animate&&(this.item.state=this.animate),this.item.override&&this.attachOverrides(),0!==this.timeOut&&this.startTimeOut(),this.safeSvg=this.domSanitizer.bypassSecurityTrustHtml(this.item.icon)},NotificationComponent.prototype.startTimeOut=function(){var e=this;this.steps=this.timeOut/10,this.speed=this.timeOut/this.steps,this.start=(new Date).getTime(),this.zone.runOutsideAngular(function(){return e.timer=setTimeout(e.instance,e.speed)})},NotificationComponent.prototype.onEnter=function(){this.pauseOnHover&&(this.stopTime=!0)},NotificationComponent.prototype.onLeave=function(){this.pauseOnHover&&(this.stopTime=!1,setTimeout(this.instance,this.speed-this.diff))},NotificationComponent.prototype.setPosition=function(){return 0!==this.position?90*this.position:0},NotificationComponent.prototype.onClick=function(e){this.item.click.emit(e),this.clickToClose&&this.remove()},NotificationComponent.prototype.attachOverrides=function(){var e=this;Object.keys(this.item.override).forEach(function(t){e.hasOwnProperty(t)&&(e[t]=e.item.override[t])})},NotificationComponent.prototype.ngOnDestroy=function(){clearTimeout(this.timer)},NotificationComponent.prototype.remove=function(){var e=this;this.animate?(this.item.state=this.animate+"Out",this.zone.runOutsideAngular(function(){setTimeout(function(){e.zone.run(function(){return e.notificationService.set(e.item,!1)})},310)})):this.notificationService.set(this.item,!1)},r([i.Input(),o("design:type",Number)],NotificationComponent.prototype,"timeOut",void 0),r([i.Input(),o("design:type",Boolean)],NotificationComponent.prototype,"showProgressBar",void 0),r([i.Input(),o("design:type",Boolean)],NotificationComponent.prototype,"pauseOnHover",void 0),r([i.Input(),o("design:type",Boolean)],NotificationComponent.prototype,"clickToClose",void 0),r([i.Input(),o("design:type",Number)],NotificationComponent.prototype,"maxLength",void 0),r([i.Input(),o("design:type",String)],NotificationComponent.prototype,"theClass",void 0),r([i.Input(),o("design:type",Boolean)],NotificationComponent.prototype,"rtl",void 0),r([i.Input(),o("design:type",String)],NotificationComponent.prototype,"animate",void 0),r([i.Input(),o("design:type",Number)],NotificationComponent.prototype,"position",void 0),r([i.Input(),o("design:type","function"==typeof(e="undefined"!=typeof s.Notification&&s.Notification)&&e||Object)],NotificationComponent.prototype,"item",void 0),NotificationComponent=r([i.Component({selector:"simple-notification",encapsulation:i.ViewEncapsulation.None,animations:[i.trigger("enterLeave",[i.state("fromRight",i.style({opacity:1,transform:"translateX(0)"})),i.transition("* => fromRight",[i.style({opacity:0,transform:"translateX(5%)"}),i.animate("400ms ease-in-out")]),i.state("fromRightOut",i.style({opacity:0,transform:"translateX(-5%)"})),i.transition("fromRight => fromRightOut",[i.style({opacity:1,transform:"translateX(0)"}),i.animate("300ms ease-in-out")]),i.state("fromLeft",i.style({opacity:1,transform:"translateX(0)"})),i.transition("* => fromLeft",[i.style({opacity:0,transform:"translateX(-5%)"}),i.animate("400ms ease-in-out")]),i.state("fromLeftOut",i.style({opacity:0,transform:"translateX(5%)"})),i.transition("fromLeft => fromLeftOut",[i.style({opacity:1,transform:"translateX(0)"}),i.animate("300ms ease-in-out")]),i.state("scale",i.style({opacity:1,transform:"scale(1)"})),i.transition("* => scale",[i.style({opacity:0,transform:"scale(0)"}),i.animate("400ms ease-in-out")]),i.state("scaleOut",i.style({opacity:0,transform:"scale(0)"})),i.transition("scale => scaleOut",[i.style({opacity:1,transform:"scale(1)"}),i.animate("400ms ease-in-out")]),i.state("rotate",i.style({opacity:1,transform:"rotate(0deg)"})),i.transition("* => rotate",[i.style({opacity:0,transform:"rotate(5deg)"}),i.animate("400ms ease-in-out")]),i.state("rotateOut",i.style({opacity:0,transform:"rotate(-5deg)"})),i.transition("rotate => rotateOut",[i.style({opacity:1,transform:"rotate(0deg)"}),i.animate("400ms ease-in-out")])])],template:'\n        <div class="simple-notification"\n            [@enterLeave]="item.state"\n            (click)="onClick($event)"\n            [class]="theClass"\n\n            [ngClass]="{\n                \'alert\': item.type === \'alert\',\n                \'error\': item.type === \'error\',\n                \'success\': item.type === \'success\',\n                \'info\': item.type === \'info\',\n                \'bare\': item.type === \'bare\',\n                \'rtl-mode\': rtl\n            }"\n\n            (mouseenter)="onEnter()"\n            (mouseleave)="onLeave()">\n\n            <div *ngIf="!item.html">\n                <div class="sn-title">{{item.title}}</div>\n                <div class="sn-content">{{item.content | max:maxLength}}</div>\n\n                <div *ngIf="item.type !== \'bare\'" [innerHTML]="safeSvg"></div>\n            </div>\n            <div *ngIf="item.html" [innerHTML]="item.html"></div>\n\n            <div class="sn-progress-loader" *ngIf="showProgressBar">\n                <span [ngStyle]="{\'width\': progressWidth + \'%\'}"></span>\n            </div>\n\n        </div>\n    ',styles:["\n        .simple-notification {\n            width: 100%;\n            padding: 10px 20px;\n            box-sizing: border-box;\n            position: relative;\n            float: left;\n            margin-bottom: 10px;\n            color: #fff;\n            cursor: pointer;\n            transition: all 0.5s;\n        }\n\n        .simple-notification .sn-title {\n            margin: 0;\n            padding: 0 50px 0 0;\n            line-height: 30px;\n            font-size: 20px;\n        }\n\n        .simple-notification .sn-content {\n            margin: 0;\n            font-size: 16px;\n            padding: 0 50px 0 0;\n            line-height: 20px;\n        }\n\n        .simple-notification svg {\n            position: absolute;\n            box-sizing: border-box;\n            top: 0;\n            right: 0;\n            width: 70px;\n            height: 70px;\n            padding: 10px;\n            fill: #fff;\n        }\n\n        .simple-notification.rtl-mode {\n            direction: rtl;\n        }\n\n        .simple-notification.rtl-mode .sn-content {\n            padding: 0 0 0 50px;\n        }\n\n        .simple-notification.rtl-mode svg {\n            left: 0;\n            right: auto;\n        }\n\n        .simple-notification.error { background: #F44336; }\n        .simple-notification.success { background: #8BC34A; }\n        .simple-notification.alert { background: #ffdb5b; }\n        .simple-notification.info { background: #03A9F4; }\n\n        .simple-notification .sn-progress-loader {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 5px;\n        }\n\n        .simple-notification .sn-progress-loader span {\n            float: left;\n            height: 100%;\n        }\n\n        .simple-notification.success .sn-progress-loader span { background: #689F38; }\n        .simple-notification.error .sn-progress-loader span { background: #D32F2F; }\n        .simple-notification.alert .sn-progress-loader span { background: #edc242; }\n        .simple-notification.info .sn-progress-loader span { background: #0288D1; }\n        .simple-notification.bare .sn-progress-loader span { background: #ccc; }\n    "]}),o("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.NotificationsService&&c.NotificationsService)&&t||Object,"function"==typeof(n="undefined"!=typeof a.DomSanitizer&&a.DomSanitizer)&&n||Object,"function"==typeof(u="undefined"!=typeof i.NgZone&&i.NgZone)&&u||Object])],NotificationComponent);var e,t,n,u}();t.NotificationComponent=u},34,function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);
return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function MaxPipe(){}return MaxPipe.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)return e;var r=t[0],o=e.length;if(o>r&&0!==r){var i=r-o;return e.slice(0,i)}return e},MaxPipe=r([i.Pipe({name:"max"}),o("design:paramtypes",[])],MaxPipe)}();t.MaxPipe=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(39),s=function(){function PushNotificationsModule(){}return PushNotificationsModule=r([i.NgModule({providers:[a.PushNotificationsService]}),o("design:paramtypes",[])],PushNotificationsModule)}();t.PushNotificationsModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(7),s=function(){function PushNotificationsService(){this.permission=this.isSupported()?Notification.permission:"denied"}return PushNotificationsService.prototype.requestPermission=function(){var e=this;"Notification"in window&&Notification.requestPermission(function(t){return e.permission=t})},PushNotificationsService.prototype.isSupported=function(){return"Notification"in window},PushNotificationsService.prototype.create=function(e,t){var n=this;return new a.Observable(function(r){"Notification"in window||(r.error("Notifications are not available in this environment"),r.complete()),"granted"!==n.permission&&(r.error("The user hasn't granted you permission to send push notifications"),r.complete());var o=new Notification(e,t);o.onshow=function(e){return r.next({notification:o,event:e})},o.onclick=function(e){return r.next({notification:o,event:e})},o.onerror=function(e){return r.error({notification:o,event:e})},o.onclose=function(){return r.complete()}})},PushNotificationsService=r([i.Injectable(),o("design:paramtypes",[])],PushNotificationsService)}();t.PushNotificationsService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(41),s=n(71);t.routes=[{path:"",redirectTo:"/notes",pathMatch:"full"},{path:"notes",component:s.HomeComponent},{path:"about",component:s.AboutComponent}];var c=function(){function AppRoutingModule(){}return AppRoutingModule=r([i.NgModule({imports:[a.RouterModule.forRoot(t.routes)],exports:[a.RouterModule]}),o("design:paramtypes",[])],AppRoutingModule)}();t.AppRoutingModule=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(72)),__export(n(73)),__export(n(109)),__export(n(111)),__export(n(114))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function Spinner(){}return Spinner=r([i.Component({selector:"spinner",template:'\n    <div class="loaders-container">\n      <div class="spinner">\n        <div class="circle"></div>\n      </div>\n    </div>\n  ',styles:[".loaders-container {\n        width: 100%;\n        height: 100%;\n      }\n      .loaders-container .spinner {\n        box-sizing: border-box;\n        width: 40px;\n        height: 40px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        z-index: 1;\n        margin-top: -20px;\n        margin-left: -20px;\n      }\n      .circle {\n        box-sizing: border-box;\n        width: 40px;\n        height: 40px;\n        border-radius: 100%;\n        border: 3px solid #bdc5c5;\n        border-top-color: #009688;\n        -webkit-animation: spin 1s infinite linear;\n        animation: spin 1s infinite linear;\n      }\n      @-webkit-keyframes spin {\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n      }\n      @keyframes spin {\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n      }"]}),o("design:paramtypes",[])],Spinner)}();t.Spinner=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(29),s=n(74),c=n(106),u=function(){function BinComponent(e,t){this._notesService=e,this._notificationsService=t,this.spinner=!0,this.displayList=!1,this.emptyHtmlMsg=!1,this.notes_table=l,this.notes=[],this.toDeleteNote={},this.notificationOptions={timeOut:2e3,lastOnBottom:!0,clickToClose:!0,showProgressBar:!1,pauseOnHover:!0,preventDuplicates:!1,theClass:"notes-notifications bin",rtl:!1},this.displayList="true"==localStorage.getItem("displayBinTypeList")}return BinComponent.prototype.ngOnInit=function(){var e=this;this.subscription=this._notesService.notes_tables$.subscribe(function(t){return e.notes_table=t}),this.refreshNotesTables()},BinComponent.prototype.refreshNotesTables=function(){var e=this;this._notesService.getNotes("binNotes").then(function(t){e.notes_table=t.rows,e.notes=e.notes_table,c.isEmpty(e.notes)?e.emptyHtmlMsg=!0:e.emptyHtmlMsg=!1,e.spinner=!1},function(t){e.spinner=!1})},BinComponent.prototype.deleteNote=function(){var e=this;this.toDeleteNote&&(this.toDeleteNoteRow.className+=this.displayList?" animated bounceOutRight":" animated zoomOut",setTimeout(function(){e._notesService.deleteNote("binNotes",e.toDeleteNote.doc).then(function(t){e._notificationsService.error("Done","Note deleted forever"),e.refreshNotesTables(),e.toDeleteNote={}})},200))},BinComponent.prototype.setDeleteNote=function(e,t){this.toDeleteNote=e,this.toDeleteNoteRow=t},BinComponent.prototype.restoreNote=function(e,t){var n=this;t.className+=this.displayList?" animated bounceOutLeft":" animated flipOutY",setTimeout(function(){n._notesService.deleteNote("binNotes",e.doc).then(function(e){n._notificationsService.success("Done","Note restored"),n.refreshNotesTables()});var t=e;delete t.doc._rev,"archive"===t.doc.restore?n._notesService.saveNote("archiveNotes",t.doc).then(function(e){n.updateArchiveNotesOrder(t.doc)}):"note"===t.doc.restore&&n._notesService.saveNote("notes",t.doc).then(function(e){n.updateNotesOrder(t.doc)})},300)},BinComponent.prototype.displayTypeChange=function(){this.displayList=!this.displayList,localStorage.setItem("displayBinTypeList",String(this.displayList))},BinComponent.prototype.updateArchiveNotesOrder=function(e){var t=[];localStorage.getItem("archiveOrder")?(t=JSON.parse(localStorage.getItem("archiveOrder")),t.unshift(e._id)):t.push(e._id),localStorage.setItem("archiveOrder",JSON.stringify(t))},BinComponent.prototype.updateNotesOrder=function(e){var t=[];localStorage.getItem("order")?(t=JSON.parse(localStorage.getItem("order")),t.unshift(e._id)):t.push(e._id),localStorage.setItem("order",JSON.stringify(t))},BinComponent=r([i.Component({selector:"bin",template:n(108)}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.NotesTableService&&s.NotesTableService)&&e||Object,"function"==typeof(t="undefined"!=typeof a.NotificationsService&&a.NotificationsService)&&t||Object])],BinComponent);var e,t}();t.BinComponent=u;var l=[]},function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(75)),__export(n(76)),__export(n(94))},function(e,t){"use strict";var n=function(){function NotesTable(){}return NotesTable}();t.NotesTable=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(42),s=n(77),c=n(29);t.NOTES_TABLES=[];var u={notes:new s("notes_table"),notesOrder:new s("notes_order_table"),archiveNotes:new s("archive_notes_table"),archiveNotesOrder:new s("archive_notes_order"),binNotes:new s("bin_notes_table")},l=function(){function NotesTableService(e){this._pushNotifications=e,this.notes_tables_source=new a.BehaviorSubject([]),this.notes_tables$=this.notes_tables_source.asObservable(),this.reminderTable={notes:[],archiveNotes:[]},this._pushNotifications.requestPermission(),this.audio=new Audio("sound/notification.mp3")}return NotesTableService.prototype.getNotes=function(e){var t=u[e].allDocs({include_docs:!0});return t},NotesTableService.prototype.saveNote=function(e,t){return u[e].put(t)},NotesTableService.prototype.deleteNote=function(e,t){return u[e].remove(t)},NotesTableService.prototype.updateNote=function(e,t){return u[e].put(t)},NotesTableService.prototype.getOrder=function(e,t){var n=t[e].allDocs({include_docs:!0});return n},NotesTableService.prototype.saveOrder=function(e,t){return t[e].put(t)},NotesTableService.prototype.updateReminderTable=function(e){var t=this;this.getNotes(e).then(function(n){var r=n.rows;t.reminderTable[e]=[],r.forEach(function(n){n.doc.reminder&&t.reminderTable[e].push(n)})})},NotesTableService.prototype.reminderTickStart=function(){var e=this;setInterval(function(){e.checkForReminder()},6e4)},NotesTableService.prototype.checkForReminder=function(){var e=this,t=new Date;this.reminderTable.notes.forEach(function(n){e.checkForReminderRepeatation(n,t,"notes")}),this.reminderTable.archiveNotes.forEach(function(n){e.checkForReminderRepeatation(n,t,"archiveNotes")})},NotesTableService.prototype.checkForReminderRepeatation=function(e,t,n){var r=new Date(e.doc.reminder.date),o=e.doc.reminder.repeat;"doesnotrepeat"===o?t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()&&t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&this.pushNotification(e):"daily"===o?t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&this.pushNotification(e):"weekly"===o?t.getDay()===r.getDay()&&t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&this.pushNotification(e):"monthly"===o?t.getDate()===r.getDate()&&t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&this.pushNotification(e):"yearly"===o&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()&&t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&this.pushNotification(e)},NotesTableService.prototype.pushNotification=function(e){this.audio.play(),this._pushNotifications.create(e.doc.title,{body:e.doc.note,icon:"images/preserver_small.png"}).subscribe(function(e){},function(e){})},NotesTableService=r([i.Injectable(),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof c.PushNotificationsService&&c.PushNotificationsService)&&e||Object])],NotesTableService);var e}();t.NotesTableService=l},function(e,t,n){(function(t){"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function isBinaryObject(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function cloneArrayBuffer(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function cloneBinaryObject(e){if(e instanceof ArrayBuffer)return cloneArrayBuffer(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}function isPlainObject(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&p.call(n)==h}function clone(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=clone(e[n]);return t}if(e instanceof Date)return e.toISOString();if(isBinaryObject(e))return cloneBinaryObject(e);if(!isPlainObject(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=clone(e[n]);"undefined"!=typeof o&&(t[n]=o)}return t}function once(e){var t=!1;return i(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function toPromise(e){return i(function(t){t=clone(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),o=new f(function(r,o){var i;try{var a=once(function(e,t){e?o(e):r(t)});t.push(a),i=e.apply(n,t),i&&"function"==typeof i.then&&r(i)}catch(e){o(e)}});return r&&o.then(function(e){r(null,e)},r),o})}function logApiCall(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],o=0;o<n.length-1;o++)r.push(n[o]);e.constructor.emit("debug",r);var i=n[n.length-1];n[n.length-1]=function(n,r){var o=["api",e.name,t];o=o.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",o),i(n,r)}}}function adapterFun(e,t){return toPromise(i(function(n){if(this._closed)return f.reject(new Error("database is closed"));if(this._destroyed)return f.reject(new Error("database is destroyed"));var r=this;return logApiCall(r,e,n),this.taskqueue.isReady?t.apply(this,n):new f(function(t,o){r.taskqueue.addTask(function(i){i?o(i):t(r[e].apply(r,n))})})}))}function mangle(e){return"$"+e}function unmangle(e){return e.substring(1)}function Map$1(){this._store={}}function Set$1(e){if(this._store=new Map$1,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function supportsMapAndSet(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}function pick(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}function identityFunction(e){return e}function formatResultForOpenRevsGet(e){return[{ok:e}]}function bulkGet(e,t,n){function collapseResultsAndFinish(){var e=[];s.forEach(function(t){t.docs.forEach(function(n){e.push({id:t.id,docs:[n]})})}),n(null,{results:e})}function checkDone(){++a===i&&collapseResultsAndFinish()}function gotResult(e,t,n){s[e]={id:t,docs:n},checkDone()}function nextBatch(){if(!(u>=c.length)){var e=Math.min(u+y,c.length),t=c.slice(u,e);processBatch(t,u),u+=t.length}}function processBatch(n,r){n.forEach(function(n,i){var a=r+i,s=o.get(n),c=pick(s[0],["atts_since","attachments"]);c.open_revs=s.map(function(e){return e.rev}),c.open_revs=c.open_revs.filter(identityFunction);var u=identityFunction;0===c.open_revs.length&&(delete c.open_revs,u=formatResultForOpenRevsGet),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in t&&(c[e]=t[e])}),e.get(n,c,function(e,t){var r;r=e?[{error:e}]:u(t),gotResult(a,n,r),nextBatch()})})}var r=t.docs,o=new g;r.forEach(function(e){o.has(e.id)?o.get(e.id).push(e):o.set(e.id,[e])});var i=o.size,a=0,s=new Array(i),c=[];o.forEach(function(e,t){c.push(t)});var u=0;nextBatch()}function isChromeApp(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function hasLocalStorage(){return v}function attachBrowserEvents(e){isChromeApp()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):hasLocalStorage()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function Changes(){a.EventEmitter.call(this),this._listeners={},attachBrowserEvents(this)}function guardedConsole(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function randomNumber(e,t){var n=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t+=1,t>n&&(e=n>>1,t=n);var r=Math.random(),o=t-e;return~~(o*r+e)}function defaultBackOff(e){var t=0;return e||(t=2e3),randomNumber(e,t)}function explainError(e,t){guardedConsole("info","The above "+e+" is totally normal. "+t)}function PouchError(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}function createError(e,t){function CustomPouchError(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return CustomPouchError.prototype=PouchError.prototype,new CustomPouchError(t)}function generateErrorFromResponse(e){if("object"!=typeof e){var t=e;e=A,e.data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function tryFilter(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return createError(I,r)}}function filterChange(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var o=n&&tryFilter(e.filter,r.doc,t);if("object"==typeof o)return o;if(o)return!1;if(e.include_docs){if(!e.attachments)for(var i in r.doc._attachments)r.doc._attachments.hasOwnProperty(i)&&(r.doc._attachments[i].stub=!0)}else delete r.doc;return!0}}function flatten(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function invalidIdError(e){var t;if(e?"string"!=typeof e?t=createError(D):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=createError(E)):t=createError(k),t)throw t}function isRemote(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(guardedConsole("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function listenerCount(e,t){return"listenerCount"in e?e.listenerCount(t):a.EventEmitter.listenerCount(e,t)}function parseDesignDocFunctionName(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function normalizeDesignDocFunctionName(e){var t=parseDesignDocFunctionName(e);return t?t.join("/"):null}function parseUri(e){for(var t=B.exec(e),n={},r=14;r--;){var o=M[r],i=t[r]||"",a=["user","password"].indexOf(o)!==-1;n[o]=a?decodeURIComponent(i):i}return n[L]={},n[M[12]].replace(V,function(e,t,r){t&&(n[L][t]=r)}),n}function scopeEval(e,t){var n=[],r=[];for(var o in t)t.hasOwnProperty(o)&&(n.push(o),r.push(t[o]));return n.push(e),Function.apply(null,n).apply(null,r)}function upsert(e,t,n){return new f(function(r,o){e.get(t,function(i,a){if(i){if(404!==i.status)return o(i);a={}}var s=a._rev,c=n(a);return c?(c._id=t,c._rev=s,void r(tryAndPut(e,c,n))):r({updated:!1,rev:s})})})}function tryAndPut(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(r){if(409!==r.status)throw r;return upsert(e,t._id,n)})}function rev(){return r.v4().replace(/-/g,"").toLowerCase()}function winningRev(e){for(var t,n,r,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,s=a[2],c=o.pos;if(s.length)for(var u=0,l=s.length;u<l;u++)i.push({pos:c+1,ids:s[u]});else{var d=!!a[1].deleted,f=a[0];t&&!(r!==d?r:n!==c?n<c:t<f)||(t=f,n=c,r=d)}}return n+"-"+t}function traverseRevTree(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=t(0===a.length,o,i[0],n.ctx,i[1]),c=0,u=a.length;c<u;c++)r.push({pos:o+1,ids:a[c],ctx:s})}function sortByPos(e,t){return e.pos-t.pos}function collectLeaves(e){var t=[];traverseRevTree(e,function(e,n,r,o,i){e&&t.push({rev:n+"-"+r,pos:n,opts:i})}),t.sort(sortByPos).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function collectConflicts(e){for(var t=winningRev(e),n=collectLeaves(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function compactTree(e){var t=[];return traverseRevTree(e.rev_tree,function(e,n,r,o,i){"available"!==i.status||e||(t.push(n+"-"+r),i.status="missing")}),t}function rootToLeaf(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,a=i[0],s=i[1],c=i[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:a,opts:s}),u&&n.push({pos:o+1-l.length,ids:l});for(var d=0,f=c.length;d<f;d++)r.push({pos:o+1,ids:c[d],history:l})}return n.reverse()}function sortByPos$1(e,t){return e.pos-t.pos}function binarySearch(e,t,n){for(var r,o=0,i=e.length;o<i;)r=o+i>>>1,n(e[r],t)<0?o=r+1:i=r;return o}function insertSorted(e,t,n){var r=binarySearch(e,t,n);e.splice(r,0,t)}function pathToTree(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var a=e[o],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function compareTree(e,t){return e[0]<t[0]?-1:1}function mergeTree(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var o=n.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(i[2][0]){for(var c=!1,u=0;u<i[2].length;u++)i[2][u][0]===a[2][s][0]&&(n.push({tree1:i[2][u],tree2:a[2][s]}),c=!0);c||(r="new_branch",insertSorted(i[2],a[2][s],compareTree))}else r="new_leaf",i[2][0]=a[2][s]}return{conflicts:r,tree:e}}function doMerge(e,t,n){var r,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,c=e.length;s<c;s++){var u=e[s];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=mergeTree(u.ids,t.ids),o.push({pos:u.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(n!==!0){var l=u.pos<t.pos?u:t,d=u.pos<t.pos?t:u,f=d.pos-l.pos,p=[],h=[];for(h.push({ids:l.ids,diff:f,parent:null,parentIdx:null});h.length>0;){var m=h.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)h.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===d.ids[0]&&p.push(m)}var b=p[0];b?(r=mergeTree(b.ids,d.ids),b.parent[2][b.parentIdx]=r.tree,o.push({pos:l.pos,ids:l.ids}),i=i||r.conflicts,a=!0):o.push(u)}else o.push(u)}return a||o.push(t),o.sort(sortByPos$1),{tree:o,conflicts:i||"internal_node"}}function stem(e,t){for(var n,r,o=rootToLeaf(e),i=0,a=o.length;i<a;i++){var s,c=o[i],u=c.ids;if(u.length>t){n||(n={});var l=u.length-t;s={pos:c.pos+l,ids:pathToTree(u,l)};for(var d=0;d<l;d++){var f=c.pos+d+"-"+u[d].id;n[f]=!0}}else s={pos:c.pos,ids:pathToTree(u,0)};r=r?doMerge(r,s,!0).tree:[s]}return n&&traverseRevTree(r,function(e,t,r){delete n[t+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}function merge(e,t,n){var r=doMerge(e,t),o=stem(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function revExists(e,t){for(var n,r=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];n=r.pop();){if(n.pos===i&&n.ids[0]===a)return!0;for(var s=n.ids[2],c=0,u=s.length;c<u;c++)r.push({pos:n.pos+1,ids:s[c]})}return!1}function getTrees(e){return e.ids}function isDeleted(e,t){t||(t=winningRev(e));for(var n,r=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(getTrees);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}}function isLocalId(e){return/^_local/.test(e)}function latest(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,a=i[0],s=i[1],c=i[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:a,pos:o,opts:s}),u)for(var d=0,f=l.length;d<f;d++){var p=l[d],h=p.pos+"-"+p.id;if(h===e)return o+"-"+a}for(var m=0,g=c.length;m<g;m++)r.push({pos:o+1,ids:c[m],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function tryCatchInChangeListener(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){guardedConsole("error",'Error in .on("change", function):',e)}}function Changes$2(e,t,n){function onDestroy(){r.cancel()}a.EventEmitter.call(this);var r=this;this.db=e,t=t?clone(t):{};var o=t.complete=once(function(t,n){t?listenerCount(r,"error")>0&&r.emit("error",t):r.emit("complete",n),r.removeAllListeners(),e.removeListener("destroyed",onDestroy)});n&&(r.on("complete",function(e){n(null,e)}),r.on("error",n)),e.once("destroyed",onDestroy),t.onChange=function(e,t,n){r.isCancelled||tryCatchInChangeListener(r,e,t,n)};var i=new f(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});r.once("cancel",function(){e.removeListener("destroyed",onDestroy),t.complete(null,{status:"cancelled"})}),this.then=i.then.bind(i),this.catch=i.catch.bind(i),this.then(function(e){o(null,e)},o),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}function processChange(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:r,doc:e};return isDeleted(t,e._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}function compare(e,t){return e<t?-1:e>t?1:0}function yankError(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function cleanDocs(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=pick(n._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}function compareByIdThenRev(e,t){var n=compare(e._id,t._id);if(0!==n)return n;var r=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return compare(r,o)}function computeHeight(e){var t={},n=[];return traverseRevTree(e,function(e,r,o,i){var a=r+"-"+o;return e&&(t[a]=0),void 0!==i&&n.push({from:i,to:a}),a}),n.reverse(),n.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function allDocsKeysParse(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,e.descending&&(t.reverse(),e.descending=!1)}function doNextCompaction(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(t){t&&t.last_seq&&(n.last_seq=t.last_seq),e._compact(n,function(t,n){t?r(t):r(null,n),c(function(){e._compactionQueue.shift(),e._compactionQueue.length&&doNextCompaction(e)})})})}function attachmentNameError(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}function AbstractPouchDB(){a.EventEmitter.call(this)}function TaskQueue$1(){this.isReady=!1,this.failed=!1,this.queue=[]}function parseAdapter(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=PouchDB$5.adapters,o=PouchDB$5.preferredAdapters,i=PouchDB$5.prefix,a=t.adapter;if(!a)for(var s=0;s<o.length;++s){a=o[s];{if(!("idb"===a&&"websql"in r&&hasLocalStorage()&&localStorage["_pouch__websqldb_"+i+e]))break;guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var c=r[a],u=!(c&&"use_prefix"in c)||c.use_prefix;return{name:u?i+e:e,adapter:a}}function prepareForDestruction(e){function onDestroyed(t){e.removeListener("closed",onClosed),t||e.constructor.emit("destroyed",e.name)}function onClosed(){e.removeListener("destroyed",onDestroyed),e.constructor.emit("unref",e)}e.once("destroyed",onDestroyed),e.once("closed",onClosed),e.constructor.emit("ref",e)}function PouchDB$5(e,t){if(!(this instanceof PouchDB$5))return new PouchDB$5(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(t=e,e=t.name,delete t.name),this.__opts=t=clone(t),n.auto_compaction=t.auto_compaction,n.prefix=PouchDB$5.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=(t.prefix||"")+e,o=parseAdapter(r,t);if(t.name=o.name,t.adapter=t.adapter||o.adapter,n.name=e,n._adapter=t.adapter,PouchDB$5.emit("debug",["adapter","Picked adapter: ",t.adapter]),!PouchDB$5.adapters[t.adapter]||!PouchDB$5.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);AbstractPouchDB.call(n),n.taskqueue=new TaskQueue$1,n.adapter=t.adapter,PouchDB$5.adapters[t.adapter].call(n,t,function(e){return e?n.taskqueue.fail(e):(prepareForDestruction(n),n.emit("created",n),PouchDB$5.emit("created",n.name),void n.taskqueue.ready(n))})}function setUpEventEmitter(e){Object.keys(a.EventEmitter.prototype).forEach(function(t){"function"==typeof a.EventEmitter.prototype[t]&&(e[t]=$[t].bind($))});var t=e._destructionListeners=new g;e.on("ref",function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)}),e.on("unref",function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}}),e.on("destroyed",function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach(function(e){e.emit("destroyed",!0)})}})}function debugPouch(e){e.debug=u;var t={};e.on("debug",function(e){var n=e[0],r=e.slice(1);t[n]||(t[n]=u("pouchdb:"+n)),t[n].apply(null,r)})}function getFieldFromDoc(e,t){for(var n=e,r=0,o=t.length;r<o;r++){var i=t[r];if(n=n[i],!n)break}return n}function compare$1(e,t){return e<t?-1:e>t?1:0}function parseField(e){for(var t=[],n="",r=0,o=e.length;r<o;r++){var i=e[r];"."===i?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=i}return t.push(n),t}function isCombinationalField(e){return W.indexOf(e)>-1}function getKey(e){return Object.keys(e)[0]}function getValue(e){return e[getKey(e)]}function mergeAndedSelectors(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),isCombinationalField(n))r instanceof Array?t[n]=r.map(function(e){return mergeAndedSelectors([e])}):t[n]=mergeAndedSelectors([r]);else{var o=t[n]=t[n]||{};Object.keys(r).forEach(function(e){var t=r[e];return"$gt"===e||"$gte"===e?mergeGtGte(e,t,o):"$lt"===e||"$lte"===e?mergeLtLte(e,t,o):"$ne"===e?mergeNe(t,o):"$eq"===e?mergeEq(t,o):void(o[e]=t)})}})}),t}function mergeGtGte(e,t,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):"undefined"!=typeof n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function mergeLtLte(e,t,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):"undefined"!=typeof n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function mergeNe(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function mergeEq(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function massageSelector(e){
var t=clone(e),n=!1;"$and"in t&&(t=mergeAndedSelectors(t.$and),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],o=e[r];"object"==typeof o&&null!==o||(e[r]={$eq:o})}})}),"$not"in t&&(t.$not=mergeAndedSelectors([t.$not]));for(var r=Object.keys(t),o=0;o<r.length;o++){var i=r[o],a=t[i];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[i]=a}return t}function pad(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}function padLeft(e,t,n){var r=pad(e,t,n);return r+e}function collate(e,t){if(e===t)return 0;e=normalizeKey(e),t=normalizeKey(t);var n=collationIndex(e),r=collationIndex(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return stringCollate(e,t)}return Array.isArray(e)?arrayCollate(e,t):objectCollate(e,t)}function normalizeKey(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=normalizeKey(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];"undefined"!=typeof i&&(e[o]=normalizeKey(i))}}}}return e}function indexify(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return numToIndexableString(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,o=n.length,i="";if(t)for(;++r<o;)i+=toIndexableString(n[r]);else for(;++r<o;){var a=n[r];i+=toIndexableString(a)+toIndexableString(e[a])}return i}return""}function toIndexableString(e){var t="\0";return e=normalizeKey(e),collationIndex(e)+H+indexify(e)+t}function parseNumber(e,t){var n,r=t,o="1"===e[t];if(o)n=0,t++;else{var i="0"===e[t];t++;var a="",s=e.substring(t,t+G),c=parseInt(s,10)+z;for(i&&(c=-c),t+=G;;){var u=e[t];if("\0"===u)break;a+=u,t++}a=a.split("."),n=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(n-=10),0!==c&&(n=parseFloat(n+"e"+c))}return{num:n,length:t-r}}function pop(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){var a=e.pop();o[a]=n}else e.push(n)}}function parseIndexableString(e){for(var t=[],n=[],r=0;;){var o=e[r++];if("\0"!==o)switch(o){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var i=parseNumber(e,r);t.push(i.num),r+=i.length;break;case"4":for(var a="";;){var s=e[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+o)}else{if(1===t.length)return t.pop();pop(t,n)}}}function arrayCollate(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=collate(e[r],t[r]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}function stringCollate(e,t){return e===t?0:e>t?1:-1}function objectCollate(e,t){for(var n=Object.keys(e),r=Object.keys(t),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=collate(n[i],r[i]);if(0!==a)return a;if(a=collate(e[n[i]],t[r[i]]),0!==a)return a}return n.length===r.length?0:n.length>r.length?1:-1}function collationIndex(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:n<3?n+2:n+3:Array.isArray(e)?5:void 0}function numToIndexableString(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,o=r?"0":"2",i=(r?-n:n)-z,a=padLeft(i.toString(),"0",G);o+=H+a;var s=Math.abs(parseFloat(t[0]));r&&(s=10-s);var c=s.toFixed(20);return c=c.replace(/\.?0+$/,""),o+=H+c}function createFieldSorter(e){function getFieldValuesAsArray(t){return e.map(function(e){var n=getKey(e),r=parseField(n),o=getFieldFromDoc(t,r);return o})}return function(e,t){var n=getFieldValuesAsArray(e.doc),r=getFieldValuesAsArray(t.doc),o=collate(n,r);return 0!==o?o:compare$1(e.doc._id,t.doc._id)}}function filterInMemoryFields(e,t,n){if(e=e.filter(function(e){return rowFilter(e.doc,t.selector,n)}),t.sort){var r=createFieldSorter(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===getValue(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var o=t.skip||0,i=("limit"in t?t.limit:e.length)+o;e=e.slice(o,i)}return e}function rowFilter(e,t,n){return n.every(function(n){var r=t[n],o=parseField(n),i=getFieldFromDoc(e,o);return isCombinationalField(n)?matchCominationalSelector(n,r,e):matchSelector(r,e,o,i)})}function matchSelector(e,t,n,r){return!e||Object.keys(e).every(function(o){var i=e[o];return match(o,t,i,n,r)})}function matchCominationalSelector(e,t,n){return"$or"===e?t.some(function(e){return rowFilter(n,e,Object.keys(e))}):"$not"===e?!rowFilter(n,t,Object.keys(t)):!t.find(function(e){return rowFilter(n,e,Object.keys(e))})}function match(e,t,n,r,o){if(!K[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return K[e](t,n,r,o)}function fieldExists(e){return"undefined"!=typeof e&&null!==e}function fieldIsNotUndefined(e){return"undefined"!=typeof e}function modField(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}function arrayContainsValue(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}function arrayContainsAllValues(e,t){return t.every(function(t){return e.indexOf(t)>-1})}function arraySize(e,t){return e.length===t}function regexMatch(e,t){var n=new RegExp(t);return n.test(e)}function typeMatch(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}function matchesSelector(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");t=massageSelector(t);var n={doc:e},r=filterInMemoryFields([n],{selector:t},Object.keys(t));return r&&1===r.length}function evalFilter(e){return scopeEval('"use strict";\nreturn '+e+";",{})}function evalView(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return scopeEval(t,{})}function validate(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function normalize(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=normalizeDesignDocFunctionName(e.view):e.filter=normalizeDesignDocFunctionName(e.filter))}function shouldFilter(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!isRemote(e.db)}function filter(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=createError(I,"`view` filter parameter not found or invalid.");return n(r)}var o=parseDesignDocFunctionName(t.view);e.db.get("_design/"+o[0],function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(generateErrorFromResponse(r));var a=i&&i.views&&i.views[o[1]]&&i.views[o[1]].map;return a?(t.filter=evalView(a),void e.doChanges(t)):n(createError(w,i.views?"missing json key: "+o[1]:"missing json key: views"))})}else if(t.selector)t.filter=function(e){return matchesSelector(e,t.selector)},e.doChanges(t);else{var i=parseDesignDocFunctionName(t.filter);e.db.get("_design/"+i[0],function(r,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(generateErrorFromResponse(r));var a=o&&o.filters&&o.filters[i[1]];return a?(t.filter=evalFilter(a),void e.doChanges(t)):n(createError(w,o&&o.filters?"missing json key: "+i[1]:"missing json key: filters"))})}}function applyChangesFilterPlugin(e){e._changesFilterPlugin={validate:validate,normalize:normalize,shouldFilter:shouldFilter,filter:filter}}function toObject(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function parseRevisionInfo(e){if(!/^\d+-./.test(e))return createError(j);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function makeRevTreeFromRevisions(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,a=r.length;i<a;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}function parseDoc(e,t){var n,r,o,i={status:"available"};if(e._deleted&&(i.deleted=!0),t)if(e._id||(e._id=q()),r=rev(),e._rev){if(o=parseRevisionInfo(e._rev),o.error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,i,[]]]]}],n=o.prefix+1}else e._rev_tree=[{pos:1,ids:[r,i,[]]}],n=1;else if(e._revisions&&(e._rev_tree=makeRevTreeFromRevisions(e._revisions,i),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if(o=parseRevisionInfo(e._rev),o.error)return o;n=o.prefix,r=o.id,e._rev_tree=[{pos:n,ids:[r,i,[]]}]}invalidIdError(e._id),e._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var c="_"===s[0];if(c&&!Q[s]){var u=createError(O,s);throw u.message=O.message+": "+s,u}c&&!Y[s]?a.metadata[s.slice(1)]=e[s]:a.data[s]=e[s]}return a}function createBlob(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}function binaryStringToArrayBuffer(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function binStringToBluffer(e,t){return createBlob([binaryStringToArrayBuffer(e)],{type:t})}function b64ToBluffer(e,t){return binStringToBluffer(X(e),t)}function arrayBufferToBinaryString(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}function readAsBinaryString(e,t){if("undefined"==typeof FileReader)return t(arrayBufferToBinaryString((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";return r?t(n):void t(arrayBufferToBinaryString(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function blobToBinaryString(e,t){readAsBinaryString(e,function(e){t(e)})}function blobToBase64(e,t){blobToBinaryString(e,function(e){t(Z(e))})}function readAsArrayBuffer(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}function rawToBase64(e){return Z(e)}function sliceBlob(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function appendBlob(e,t,n,r,o){(n>0||r<t.size)&&(t=sliceBlob(t,n,r)),readAsArrayBuffer(t,function(t){e.append(t),o()})}function appendString(e,t,n,r,o){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}function binaryMd5(e,t){function next(){ee(loadNextChunk)}function done(){var e=s.end(!0),n=rawToBase64(e);t(n),s.destroy()}function loadNextChunk(){var t=a*o,n=t+o;a++,a<i?c(s,e,t,n,next):c(s,e,t,n,done)}var n="string"==typeof e,r=n?e.length:e.size,o=Math.min(te,r),i=Math.ceil(r/o),a=0,s=n?new l:new l.ArrayBuffer,c=n?appendString:appendBlob;loadNextChunk()}function stringMd5(e){return l.hash(e)}function parseBase64(e){try{return X(e)}catch(e){var t=createError(x,"Attachment is not a valid base64 string");return{error:t}}}function preprocessString(e,t,n){var r=parseBase64(e.data);return r.error?n(r.error):(e.length=r.length,"blob"===t?e.data=binStringToBluffer(r,e.content_type):"base64"===t?e.data=Z(r):e.data=r,void binaryMd5(r,function(t){e.digest="md5-"+t,n()}))}function preprocessBlob(e,t,n){binaryMd5(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?blobToBinaryString(e.data,function(t){e.data=t,n()}):"base64"===t?blobToBase64(e.data,function(t){e.data=t,n()}):n()})}function preprocessAttachment(e,t,n){return e.stub?n():void("string"==typeof e.data?preprocessString(e,t,n):preprocessBlob(e,t,n))}function preprocessAttachments(e,t,n){function done(){o++,e.length===o&&(r?n(r):n())}if(!e.length)return n();var r,o=0;e.forEach(function(e){function processedAttachment(e){r=e,o++,o===n.length&&done()}var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],o=0;if(!n.length)return done();for(var i in e.data._attachments)e.data._attachments.hasOwnProperty(i)&&preprocessAttachment(e.data._attachments[i],t,processedAttachment)})}function updateDoc(e,t,n,r,o,i,a,s){if(revExists(t.rev_tree,n.metadata.rev))return r[o]=n,i();var c=t.winningRev||winningRev(t),u="deleted"in t?t.deleted:isDeleted(t,c),l="deleted"in n.metadata?n.metadata.deleted:isDeleted(n.metadata),d=/^1-/.test(n.metadata.rev);if(u&&!l&&s&&d){var f=n.data;f._rev=c,f._id=n.metadata.id,n=parseDoc(f,s)}var p=merge(t.rev_tree,n.metadata.rev_tree[0],e),h=s&&(u&&l&&"new_leaf"!==p.conflicts||!u&&"new_leaf"!==p.conflicts||u&&!l&&"new_branch"===p.conflicts);if(h){var m=createError(S);return r[o]=m,i()}var g=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var v,y=winningRev(n.metadata),b=isDeleted(n.metadata,y),_=u===b?0:u<b?-1:1;v=g===y?b:isDeleted(n.metadata,g),a(n,y,b,v,!0,_,o,i)}function rootIsMissing(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function processDocs(e,t,n,r,o,i,a,s,c){function insertDoc(e,t,n){var r=winningRev(e.metadata),o=isDeleted(e.metadata,r);if("was_delete"in s&&o)return i[t]=createError(w,"deleted"),n();var c=u&&rootIsMissing(e);if(c){var l=createError(S);return i[t]=l,n()}var d=o?0:1;a(e,r,o,o,!1,d,t,n)}function checkAllDocsDone(){++d===f&&c&&c()}e=e||1e3;var u=s.new_edits,l=new g,d=0,f=t.length;t.forEach(function(e,t){if(e._id&&isLocalId(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";return void n[r](e,{ctx:o},function(e,n){i[t]=e||n,checkAllDocsDone()})}var a=e.metadata.id;l.has(a)?(f--,l.get(a).push([e,t])):l.set(a,[[e,t]])}),l.forEach(function(t,n){function docWritten(){++o<t.length?nextDoc():checkAllDocsDone()}function nextDoc(){var s=t[o],c=s[0],l=s[1];if(r.has(n))updateDoc(e,r.get(n),c,i,l,docWritten,a,u);else{var d=merge([],c.metadata.rev_tree[0],e);c.metadata.rev_tree=d.tree,c.stemmedRevs=d.stemmedRevs||[],insertDoc(c,l,docWritten)}}var o=0;nextDoc()})}function safeJsonParse(e){try{return JSON.parse(e)}catch(t){return d.parse(e)}}function safeJsonStringify(e){try{return JSON.stringify(e)}catch(t){return d.stringify(e)}}function idbError(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(createError(R,n,t.type))}}function encodeMetadata(e,t,n){return{data:safeJsonStringify(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function decodeMetadata(e){if(!e)return null;var t=safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function decodeDoc(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function readBlobData(e,t,n,r){n?r(e?"string"!=typeof e?e:b64ToBluffer(e,t):createBlob([""],{type:t})):e?"string"!=typeof e?readAsBinaryString(e,function(e){r(Z(e))}):r(e):r("")}function fetchAttachmentsIfNecessary(e,t,n,r){function checkDone(){++i===o.length&&r&&r()}function fetchAttachment(e,t){var r=e._attachments[t],o=r.digest,i=n.objectStore(ie).get(o);i.onsuccess=function(e){r.body=e.target.result.body,checkDone()}}var o=Object.keys(e._attachments||{});if(!o.length)return r&&r();var i=0;o.forEach(function(n){t.attachments&&t.include_docs?fetchAttachment(e,n):(e._attachments[n].stub=!0,checkDone())})}function postProcessAttachments(e,t){return f.all(e.map(function(e){if(e.doc&&e.doc._attachments){var n=Object.keys(e.doc._attachments);return f.all(n.map(function(n){var r=e.doc._attachments[n];if("body"in r){var o=r.body,i=r.content_type;return new f(function(a){readBlobData(o,i,t,function(t){e.doc._attachments[n]=_(pick(r,["digest","content_type"]),{data:t}),a()})})}}))}}))}function compactRevs(e,t,n){function checkDone(){s--,s||deleteOrphanedAttachments()}function deleteOrphanedAttachments(){r.length&&r.forEach(function(e){var t=a.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::",!1,!1));t.onsuccess=function(t){var n=t.target.result;n||i.delete(e)}})}var r=[],o=n.objectStore(oe),i=n.objectStore(ie),a=n.objectStore(ae),s=e.length;e.forEach(function(e){var n=o.index("_doc_id_rev"),i=t+"::"+e;n.getKey(i).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return checkDone();o.delete(t);var n=a.index("seq").openCursor(IDBKeyRange.only(t));n.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];r.push(n),a.delete(t.primaryKey),t.continue()}else checkDone()}}})}function openTransactionSafely(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}function idbBulkDocs(e,t,n,r,o,i){function startTransaction(){var e=[re,oe,ie,ce,ae,se],t=openTransactionSafely(o,e,"readwrite");return t.error?i(t.error):(a=t.txn,a.onabort=idbError(i),a.ontimeout=idbError(i),a.oncomplete=complete,s=a.objectStore(re),c=a.objectStore(oe),u=a.objectStore(ie),l=a.objectStore(ae),d=a.objectStore(se),d.get(se).onsuccess=function(e){p=e.target.result,updateDocCountIfReady()},void verifyAttachments(function(e){return e?(S=!0,i(e)):void fetchExistingDocs()}))}function onAllDocsProcessed(){b=!0,updateDocCountIfReady()}function idbProcessDocs(){processDocs(e.revs_limit,h,r,w,a,C,writeDoc,n,onAllDocsProcessed)}function updateDocCountIfReady(){p&&b&&(p.docCount+=_,d.put(p))}function fetchExistingDocs(){function checkDone(){++e===h.length&&idbProcessDocs()}function readMetadata(e){var t=decodeMetadata(e.target.result);t&&w.set(t.id,t),checkDone()}if(h.length)for(var e=0,t=0,n=h.length;t<n;t++){var r=h[t];if(r._id&&isLocalId(r._id))checkDone();else{var o=s.get(r.metadata.id);o.onsuccess=readMetadata}}}function complete(){S||(le.notify(r._meta.name),i(null,C))}function verifyAttachment(e,t){var n=u.get(e);n.onsuccess=function(n){if(n.target.result)t();else{var r=createError(F,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}function verifyAttachments(e){function checkDone(){++r===t.length&&e(n)}var t=[];if(h.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)})}),!t.length)return e();var n,r=0;t.forEach(function(e){verifyAttachment(e,function(e){e&&!n&&(n=e),checkDone()})})}function writeDoc(e,t,n,r,o,i,a,s){e.metadata.winningRev=t,e.metadata.deleted=n;var c=e.data;c._id=e.metadata.id,c._rev=e.metadata.rev,r&&(c._deleted=!0);var u=c._attachments&&Object.keys(c._attachments).length;return u?writeAttachments(e,t,n,o,a,s):(_+=i,updateDocCountIfReady(),void finishDoc(e,t,n,o,a,s))}function finishDoc(e,t,n,o,i,u){function afterPutDoc(i){var c=e.stemmedRevs||[];o&&r.auto_compaction&&(c=c.concat(compactTree(e.metadata))),c&&c.length&&compactRevs(c,e.metadata.id,a),d.seq=i.target.result;var u=encodeMetadata(d,t,n),l=s.put(u);l.onsuccess=afterPutMetadata}function afterPutDocError(e){e.preventDefault(),e.stopPropagation();var t=c.index("_doc_id_rev"),n=t.getKey(l._doc_id_rev);n.onsuccess=function(e){var t=c.put(l,e.target.result);t.onsuccess=afterPutDoc}}function afterPutMetadata(){C[i]={ok:!0,id:d.id,rev:d.rev},w.set(e.metadata.id,e.metadata),insertAttachmentMappings(e,d.seq,u)}var l=e.data,d=e.metadata;l._doc_id_rev=d.id+"::"+d.rev,delete l._id,delete l._rev;var f=c.put(l);f.onsuccess=afterPutDoc,f.onerror=afterPutDocError}function writeAttachments(e,t,n,r,o,i){function collectResults(){s===c.length&&finishDoc(e,t,n,r,o,i)}function attachmentSaved(){s++,collectResults()}var a=e.data,s=0,c=Object.keys(a._attachments);c.forEach(function(n){var r=e.data._attachments[n];if(r.stub)s++,collectResults();else{var o=r.data;delete r.data,r.revpos=parseInt(t,10);var i=r.digest;saveAttachment(i,o,attachmentSaved)}})}function insertAttachmentMappings(e,t,n){function checkDone(){++r===o.length&&n()}function add(n){var r=e.data._attachments[n].digest,o=l.put({seq:t,digestSeq:r+"::"+t});o.onsuccess=checkDone,o.onerror=function(e){e.preventDefault(),e.stopPropagation(),checkDone()}}var r=0,o=Object.keys(e.data._attachments||{});if(!o.length)return n();for(var i=0;i<o.length;i++)add(o[i])}function saveAttachment(e,t,n){var r=u.count(e);r.onsuccess=function(r){var o=r.target.result;if(o)return n();var i={digest:e,body:t},a=u.put(i);a.onsuccess=n}}for(var a,s,c,u,l,d,f,p,h=t.docs,m=0,v=h.length;m<v;m++){var y=h[m];y._id&&isLocalId(y._id)||(y=h[m]=parseDoc(y,n.new_edits),y.error&&!f&&(f=y))}if(f)return i(f);var b=!1,_=0,C=new Array(h.length),w=new g,S=!1,D=r._meta.blobSupport?"blob":"base64";preprocessAttachments(h,D,function(e){return e?i(e):void startTransaction()})}function runBatchedCursor(e,t,n,r,o){function onGetAll(e){a=e.target.result,i&&o(i,a,s)}function onGetAllKeys(e){i=e.target.result,a&&o(i,a,s)}function continuePseudoCursor(){if(!i.length)return o();var n,s=i[i.length-1];if(t&&t.upper)try{n=IDBKeyRange.bound(s,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return o()}else n=IDBKeyRange.lowerBound(s,!0);t=n,i=null,a=null,e.getAll(t,r).onsuccess=onGetAll,e.getAllKeys(t,r).onsuccess=onGetAllKeys}function onCursor(e){var t=e.target.result;return t?void o([t.key],[t.value],t):o()}var i,a,s,c="function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n;c?(s={continue:continuePseudoCursor},e.getAll(t,r).onsuccess=onGetAll,e.getAllKeys(t,r).onsuccess=onGetAllKeys):n?e.openCursor(t,"prev").onsuccess=onCursor:e.openCursor(t).onsuccess=onCursor}function getAll(e,t,n){function onCursor(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}if("function"==typeof e.getAll)return void(e.getAll(t).onsuccess=n);var r=[];e.openCursor(t).onsuccess=onCursor}function allDocsKeys(e,t,n){var r=[],o=0;e.forEach(function(i,a){t.get(i).onsuccess=function(t){t.target.result?r[a]=t.target.result:r[a]={key:i,error:"not_found"},o++,o===e.length&&n(e,r,{})}})}function createKeyRange(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}function idbAllDocs(e,t,n){function getMaxUpdateSeq(e,t){function onCursor(e){var n=e.target.result,r=void 0;return n&&n.key&&(r=n.key),t({target:{result:[r]}})}e.openCursor(null,"prev").onsuccess=onCursor}function fetchDocAsynchronously(t,n,r){var o=t.id+"::"+r;_.get(o).onsuccess=function(r){if(n.doc=decodeDoc(r.target.result),e.conflicts){var o=collectConflicts(t);o.length&&(n.doc._conflicts=o)}fetchAttachmentsIfNecessary(n.doc,e,h)}}function allDocsInner(t,n){var r={id:n.id,key:n.id,value:{rev:t}},o=n.deleted;o?c&&(C.push(r),r.value.deleted=!0,r.doc=null):u--<=0&&(C.push(r),e.include_docs&&fetchDocAsynchronously(n,r,t))}function processBatch(e){for(var t=0,n=e.length;t<n&&C.length!==l;t++){var r=e[t];if(r.error&&c)C.push(r);else{var o=decodeMetadata(r),i=o.winningRev;allDocsInner(i,o)}}}function onBatch(e,t,n){n&&(processBatch(t),C.length<l&&n.continue())}function onGetAll(t){var n=t.target.result;e.descending&&(n=n.reverse()),processBatch(n)}function onResultsReady(){var t={total_rows:m,offset:e.skip,rows:C};e.update_seq&&void 0!==g&&(t.update_seq=g),n(null,t)}function onTxnComplete(){e.attachments?postProcessAttachments(C,e.binary).then(onResultsReady):onResultsReady()}var r,o,i="startkey"in e&&e.startkey,a="endkey"in e&&e.endkey,s="key"in e&&e.key,c="keys"in e&&e.keys,u=e.skip||0,l="number"==typeof e.limit?e.limit:-1,d=e.inclusive_end!==!1;if(!c&&(r=createKeyRange(i,a,d,s,e.descending),o=r&&r.error,o&&("DataError"!==o.name||0!==o.code)))return n(createError(R,o.name,o.message));var f=[re,oe,se];e.attachments&&f.push(ie);var p=openTransactionSafely(t,f,"readonly");if(p.error)return n(p.error);var h=p.txn;h.oncomplete=onTxnComplete,h.onabort=idbError(n);var m,g,v=h.objectStore(re),y=h.objectStore(oe),b=h.objectStore(se),_=y.index("_doc_id_rev"),C=[];return b.get(se).onsuccess=function(e){m=e.target.result.docCount},e.update_seq&&getMaxUpdateSeq(y,function(e){e.target.result&&e.target.result.length>0&&(g=e.target.result[0])}),o||0===l?void 0:c?allDocsKeys(e.keys,v,onBatch):l===-1?getAll(v,r,onGetAll):void runBatchedCursor(v,r,e.descending,l+u,onBatch)}function checkBlobSupport(e){return new f(function(t){var n=createBlob([""]),r=e.objectStore(ue).put(n,"key");r.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)},e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}}).catch(function(){return!1})}function countDocs(e,t){var n=e.objectStore(re).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}function tryCode(e,t,n,r){try{e(t,n)}catch(e){r.emit("error",e)}}function applyNext(){!de&&fe.length&&(de=!0,fe.shift()())}function enqueueTask(e,t,n){fe.push(function(){e(function(e,r){tryCode(t,e,r,n),de=!1,c(function(){applyNext(n)})})}),applyNext()}function changes(e,t,n,r){function onBatch(t,n,r){function processMetadataAndWinningDoc(t,n){var r=e.processChange(n,t,e);a=r.seq=t.seq;var o=v(r);return"object"==typeof o?e.complete(o):void(o&&(h++,c&&p.push(r),e.attachments&&e.include_docs?fetchAttachmentsIfNecessary(n,e,u,function(){postProcessAttachments([r],e.binary).then(function(){e.onChange(r)})}):e.onChange(r)))}function onBatchDone(){for(var e=0,t=o.length;e<t&&h!==s;e++){var n=o[e];if(n){var a=i[e];processMetadataAndWinningDoc(a,n)}}h!==s&&r.continue()}if(r&&t.length){var o=new Array(t.length),i=new Array(t.length),l=0;n.forEach(function(e,n){var r=decodeDoc(e),a=t[n];fetchWinningDocAndMetadata(r,a,function(e,r){i[n]=e,o[n]=r,++l===t.length&&onBatchDone()})})}}function onGetMetadata(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var o=e._id+"::"+n.winningRev,i=f.get(o);i.onsuccess=function(e){r(n,decodeDoc(e.target.result))}}function fetchWinningDocAndMetadata(e,t,n){if(i&&!i.has(e._id))return n();var r=y.get(e._id);return r?onGetMetadata(e,t,r,n):void(d.get(e._id).onsuccess=function(o){r=decodeMetadata(o.target.result),y.set(e._id,r),onGetMetadata(e,t,r,n)})}function finish(){e.complete(null,{results:p,last_seq:a})}function onTxnComplete(){!e.continuous&&e.attachments?postProcessAttachments(p).then(finish):finish()}if(e=clone(e),e.continuous){var o=n+":"+q();return le.addListener(n,o,t,e),le.notify(n),{cancel:function(){le.removeListener(n,o)}}}var i=e.doc_ids&&new m(e.doc_ids);e.since=e.since||0;var a=e.since,s="limit"in e?e.limit:-1;0===s&&(s=1);var c;c="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var u,l,d,f,p=[],h=0,v=filterChange(e),y=new g,b=[re,oe];e.attachments&&b.push(ie);var _=openTransactionSafely(r,b,"readonly");if(_.error)return e.complete(_.error);u=_.txn,u.onabort=idbError(e.complete),u.oncomplete=onTxnComplete,l=u.objectStore(oe),d=u.objectStore(re),f=l.index("_doc_id_rev");var C=e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null;runBatchedCursor(l,C,e.descending,s,onBatch)}function IdbPouch(e,t){var n=this;enqueueTask(function(t){init(n,e,t)},t,n.constructor)}function init(e,t,n){function createSchema(e){var t=e.createObjectStore(re,{keyPath:"id"});e.createObjectStore(oe,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(ie,{keyPath:"digest"}),e.createObjectStore(se,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(ue),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(ce,{keyPath:"_id"});var n=e.createObjectStore(ae,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function addDeletedOrLocalIndex(e,t){var n=e.objectStore(re);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var o=r.value,i=isDeleted(o);o.deletedOrLocal=i?"1":"0",n.put(o),r.continue()}else t()}}function createLocalStoreSchema(e){e.createObjectStore(ce,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function migrateLocalStore(e,t){var n=e.objectStore(ce),r=e.objectStore(re),o=e.objectStore(oe),i=r.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var a=i.value,s=a.id,c=isLocalId(s),u=winningRev(a);if(c){var l=s+"::"+u,d=s+"::",f=s+"::~",p=o.index("_doc_id_rev"),h=IDBKeyRange.bound(d,f,!1,!1),m=p.openCursor(h);m.onsuccess=function(e){if(m=e.target.result){var t=m.value;t._doc_id_rev===l&&n.put(t),o.delete(m.primaryKey),m.continue()}else r.delete(i.primaryKey),i.continue()}}else i.continue()}else t&&t()}}function addAttachAndSeqStore(e){var t=e.createObjectStore(ae,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function migrateAttsAndSeqs(e,t){var n=e.objectStore(oe),r=e.objectStore(ie),o=e.objectStore(ae),i=r.count();i.onsuccess=function(e){var r=e.target.result;return r?void(n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,i=n.primaryKey,a=Object.keys(r._attachments||{}),s={},c=0;c<a.length;c++){var u=r._attachments[a[c]];s[u.digest]=!0}var l=Object.keys(s);for(c=0;c<l.length;c++){var d=l[c];o.put({seq:i,digestSeq:d+"::"+i})}n.continue()}):t()}}function migrateMetadata(e){function decodeMetadataCompat(e){return e.data?decodeMetadata(e):(e.deleted="1"===e.deletedOrLocal,e)}var t=e.objectStore(oe),n=e.objectStore(re),r=n.openCursor();r.onsuccess=function(e){function fetchMetadataSeq(){var e=o.id+"::",n=o.id+"::",r=t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,n)),i=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return o.seq=i,onGetMetadataSeq();var n=t.primaryKey;n>i&&(i=n),t.continue()}}function onGetMetadataSeq(){var e=encodeMetadata(o,o.winningRev,o.deleted),t=n.put(e);t.onsuccess=function(){r.continue()}}var r=e.target.result;if(r){var o=decodeMetadataCompat(r.value);return o.winningRev=o.winningRev||winningRev(o),o.seq?onGetMetadataSeq():void fetchMetadataSeq()}}}var r=t.name,o=null;e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(n,r,i){idbBulkDocs(t,n,r,e,o,i)},e._get=function(e,t,n){function finish(){n(a,{doc:r,metadata:i,ctx:s})}var r,i,a,s=t.ctx;if(!s){var c=openTransactionSafely(o,[re,oe,ie],"readonly");if(c.error)return n(c.error);s=c.txn}s.objectStore(re).get(e).onsuccess=function(e){if(i=decodeMetadata(e.target.result),!i)return a=createError(w,"missing"),finish();var n;if(t.rev)n=t.latest?latest(t.rev,i):t.rev;else{n=i.winningRev;var o=isDeleted(i);if(o)return a=createError(w,"deleted"),finish()}var c=s.objectStore(oe),u=i.id+"::"+n;c.index("_doc_id_rev").get(u).onsuccess=function(e){return r=e.target.result,r&&(r=decodeDoc(r)),r?void finish():(a=createError(w,"missing"),
finish())}}},e._getAttachment=function(e,t,n,r,i){var a;if(r.ctx)a=r.ctx;else{var s=openTransactionSafely(o,[re,oe,ie],"readonly");if(s.error)return i(s.error);a=s.txn}var c=n.digest,u=n.content_type;a.objectStore(ie).get(c).onsuccess=function(e){var t=e.target.result.body;readBlobData(t,u,r.binary,function(e){i(null,e)})}},e._info=function(t){var n,r,i=openTransactionSafely(o,[se,oe],"readonly");if(i.error)return t(i.error);var a=i.txn;a.objectStore(se).get(se).onsuccess=function(e){r=e.target.result.docCount},a.objectStore(oe).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},a.oncomplete=function(){t(null,{doc_count:r,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){idbAllDocs(e,o,t)},e._changes=function(t){return changes(t,e,r,o)},e._close=function(e){o.close(),pe.delete(r),e()},e._getRevisionTree=function(e,t){var n=openTransactionSafely(o,[re],"readonly");if(n.error)return t(n.error);var r=n.txn,i=r.objectStore(re).get(e);i.onsuccess=function(e){var n=decodeMetadata(e.target.result);n?t(null,n.rev_tree):t(createError(w))}},e._doCompaction=function(e,t,n){var r=[re,oe,ie,ae],i=openTransactionSafely(o,r,"readwrite");if(i.error)return n(i.error);var a=i.txn,s=a.objectStore(re);s.get(e).onsuccess=function(n){var r=decodeMetadata(n.target.result);traverseRevTree(r.rev_tree,function(e,n,r,o,i){var a=n+"-"+r;t.indexOf(a)!==-1&&(i.status="missing")}),compactRevs(t,e,a);var o=r.winningRev,i=r.deleted;a.objectStore(re).put(encodeMetadata(r,o,i))},a.onabort=idbError(n),a.oncomplete=function(){n()}},e._getLocal=function(e,t){var n=openTransactionSafely(o,[ce],"readonly");if(n.error)return t(n.error);var r=n.txn,i=r.objectStore(ce).get(e);i.onerror=idbError(t),i.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(createError(w))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,i=e._id;r?e._rev="0-"+(parseInt(r.split("-")[1],10)+1):e._rev="0-1";var a,s=t.ctx;if(!s){var c=openTransactionSafely(o,[ce],"readwrite");if(c.error)return n(c.error);s=c.txn,s.onerror=idbError(n),s.oncomplete=function(){a&&n(null,a)}}var u,l=s.objectStore(ce);r?(u=l.get(i),u.onsuccess=function(o){var i=o.target.result;if(i&&i._rev===r){var s=l.put(e);s.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)}}else n(createError(S))}):(u=l.add(e),u.onerror=function(e){n(createError(S)),e.preventDefault(),e.stopPropagation()},u.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)})},e._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={});var r=t.ctx;if(!r){var i=openTransactionSafely(o,[ce],"readwrite");if(i.error)return n(i.error);r=i.txn,r.oncomplete=function(){a&&n(null,a)}}var a,s=e._id,c=r.objectStore(ce),u=c.get(s);u.onerror=idbError(n),u.onsuccess=function(r){var o=r.target.result;o&&o._rev===e._rev?(c.delete(s),a={ok:!0,id:s,rev:"0-0"},t.ctx&&n(null,a)):n(createError(w))}},e._destroy=function(e,t){le.removeAllListeners(r);var n=he.get(r);n&&n.result&&(n.result.close(),pe.delete(r));var o=indexedDB.deleteDatabase(r);o.onsuccess=function(){he.delete(r),hasLocalStorage()&&r in localStorage&&delete localStorage[r],t(null,{ok:!0})},o.onerror=idbError(t)};var i=pe.get(r);if(i)return o=i.idb,e._meta=i.global,c(function(){n(null,e)});var a;a=t.storage?tryStorageOption(r,t.storage):indexedDB.open(r,ne),he.set(r,a),a.onupgradeneeded=function(e){function next(){var e=r[o-1];o++,e&&e(n,next)}var t=e.target.result;if(e.oldVersion<1)return createSchema(t);var n=e.currentTarget.transaction;e.oldVersion<3&&createLocalStoreSchema(t),e.oldVersion<4&&addAttachAndSeqStore(t);var r=[addDeletedOrLocalIndex,migrateLocalStore,migrateAttsAndSeqs,migrateMetadata],o=e.oldVersion;next()},a.onsuccess=function(t){function completeSetup(){"undefined"!=typeof s&&l&&(e._meta={name:r,instanceId:c,blobSupport:s},pe.set(r,{idb:o,global:e._meta}),n(null,e))}function storeMetaDocIfReady(){if("undefined"!=typeof a&&"undefined"!=typeof i){var e=r+"_id";e in i?c=i[e]:i[e]=c=q(),i.docCount=a,u.objectStore(se).put(i)}}o=t.target.result,o.onversionchange=function(){o.close(),pe.delete(r)},o.onabort=function(e){guardedConsole("error","Database has a global failure",e.target.error),o.close(),pe.delete(r)};var i,a,s,c,u=o.transaction([se,ue,re],"readwrite"),l=!1;u.objectStore(se).get(se).onsuccess=function(e){i=e.target.result||{id:se},storeMetaDocIfReady()},countDocs(u,function(e){a=e,storeMetaDocIfReady()}),J||(J=checkBlobSupport(u)),J.then(function(e){s=e,completeSetup()}),u.oncomplete=function(){l=!0,completeSetup()}},a.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";guardedConsole("error",e),n(createError(R,e))}}function tryStorageOption(e,t){try{return indexedDB.open(e,{version:ne,storage:t})}catch(t){return indexedDB.open(e,ne)}}function IDBPouch(e){e.adapter("idb",IdbPouch,!0)}function decodeUtf8(e){return decodeURIComponent(escape(e))}function hexToInt(e){return e<65?e-48:e-55}function parseHexUtf8(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(hexToInt(e.charCodeAt(t++))<<4|hexToInt(e.charCodeAt(t++)));return r}function parseHexUtf16(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(hexToInt(e.charCodeAt(t+2))<<12|hexToInt(e.charCodeAt(t+3))<<8|hexToInt(e.charCodeAt(t))<<4|hexToInt(e.charCodeAt(t+1))),t+=4;return r}function parseHexString(e,t){return"UTF-8"===t?decodeUtf8(parseHexUtf8(e,0,e.length)):parseHexUtf16(e,0,e.length)}function quote(e){return"'"+e+"'"}function escapeBlob(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function unescapeBlob(e){return e.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function stringifyDoc(e){return delete e._id,delete e._rev,JSON.stringify(e)}function unstringifyDoc(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function qMarks(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function select(e,t,n,r,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function compactRevs$1(e,t,n){function checkDone(){++r===e.length&&deleteOrphans()}function deleteOrphans(){if(o.length){var e="SELECT DISTINCT digest AS digest FROM "+Ce+" WHERE seq IN "+qMarks(o.length);n.executeSql(e,o,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var i="DELETE FROM "+Ce+" WHERE seq IN ("+o.map(function(){return"?"}).join(",")+")";e.executeSql(i,o,function(e){var t="SELECT digest FROM "+Ce+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new m,o=0;o<t.rows.length;o++)r.add(t.rows.item(o).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+Ce+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+ye+" WHERE digest=?",[t]))})})})}})}}if(e.length){var r=0,o=[];e.forEach(function(e){var r="SELECT seq FROM "+ve+" WHERE doc_id=? AND rev=?";n.executeSql(r,[t,e],function(e,t){if(!t.rows.length)return checkDone();var n=t.rows.item(0).seq;o.push(n),e.executeSql("DELETE FROM "+ve+" WHERE seq=?",[n],checkDone)})})}}function websqlError(e){return function(t){guardedConsole("error","WebSQL threw an error",t);var n=t&&t.constructor.toString().match(/function ([^(]+)/),r=n&&n[1]||t.type,o=t.target||t.message;e(createError(T,o,r))}}function getSize(e){if("size"in e)return 1e6*e.size;var t="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return t?5e6:1}function websqlBulkDocs(e,t,n,r,o,i,a){function complete(){return f?a(f):(i.notify(r._name),void a(null,p))}function verifyAttachment(e,t){var n="SELECT count(*) as cnt FROM "+ye+" WHERE digest=?";d.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var o=createError(F,"unknown stub attachment with digest "+e);t(o)}else t()})}function verifyAttachments(e){function checkDone(){++r===t.length&&e(n)}var t=[];if(u.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)})}),!t.length)return e();var n,r=0;t.forEach(function(e){verifyAttachment(e,function(e){e&&!n&&(n=e),checkDone()})})}function writeDoc(e,t,n,o,i,a,s,c){function finish(){function insertAttachmentMappings(e,n){function checkDone(){return++r===o.length&&n(),!1}function add(n){var r="INSERT INTO "+Ce+" (digest, seq) VALUES (?,?)",o=[t._attachments[n].digest,e];d.executeSql(r,o,checkDone,checkDone)}var r=0,o=Object.keys(t._attachments||{});if(!o.length)return n();for(var i=0;i<o.length;i++)add(o[i])}var t=e.data,n=o?1:0,r=t._id,i=t._rev,a=stringifyDoc(t),s="INSERT INTO "+ve+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[r,i,a,n];d.executeSql(s,c,function(e,t){var n=t.insertId;insertAttachmentMappings(n,function(){dataWritten(e,n)})},function(){var e=select("seq",ve,null,"doc_id=? AND rev=?");return d.executeSql(e,[r,i],function(e,t){var o=t.rows.item(0).seq,s="UPDATE "+ve+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",c=[a,n,r,i];e.executeSql(s,c,function(e){insertAttachmentMappings(o,function(){dataWritten(e,o)})})}),!1})}function collectResults(e){u||(e?(u=e,c(u)):l===f.length&&finish())}function attachmentSaved(e){l++,collectResults(e)}function dataWritten(n,o){var a=e.metadata.id,u=e.stemmedRevs||[];i&&r.auto_compaction&&(u=compactTree(e.metadata).concat(u)),u.length&&compactRevs$1(u,a,n),e.metadata.seq=o;var l=e.metadata.rev;delete e.metadata.rev;var d=i?"UPDATE "+ge+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+ve+" WHERE doc_id="+ge+".id AND rev=?) WHERE id=?":"INSERT INTO "+ge+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=safeJsonStringify(e.metadata),m=i?[f,o,t,a]:[a,o,o,f];n.executeSql(d,m,function(){p[s]={ok:!0,id:e.metadata.id,rev:l},h.set(a,e.metadata),c()})}var u=null,l=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var f=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),f.forEach(function(n){var r=e.data._attachments[n];if(r.stub)l++,collectResults();else{var o=r.data;delete r.data,r.revpos=parseInt(t,10);var i=r.digest;saveAttachment(i,o,attachmentSaved)}}),f.length||finish()}function websqlProcessDocs(){processDocs(e.revs_limit,u,r,h,d,p,writeDoc,n)}function fetchExistingDocs(e){function checkDone(){++t===u.length&&e()}if(!u.length)return e();var t=0;u.forEach(function(e){if(e._id&&isLocalId(e._id))return checkDone();var t=e.metadata.id;d.executeSql("SELECT json FROM "+ge+" WHERE id = ?",[t],function(e,n){if(n.rows.length){var r=safeJsonParse(n.rows.item(0).json);h.set(t,r)}checkDone()})})}function saveAttachment(e,t,n){var r="SELECT digest FROM "+ye+" WHERE digest=?";d.executeSql(r,[e],function(o,i){return i.rows.length?n():(r="INSERT INTO "+ye+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(r,[e,escapeBlob(t)],function(){n()},function(){return n(),!1}))})}var s=n.new_edits,c=t.docs,u=c.map(function(e){if(e._id&&isLocalId(e._id))return e;var t=parseDoc(e,s);return t}),l=u.filter(function(e){return e.error});if(l.length)return a(l[0]);var d,f,p=new Array(u.length),h=new g;preprocessAttachments(u,"binary",function(e){return e?a(e):void o.transaction(function(e){d=e,verifyAttachments(function(e){e?f=e:fetchExistingDocs(websqlProcessDocs)})},websqlError(a),complete)})}function openDatabaseWithOpts(e){return e.websql(e.name,e.version,e.description,e.size)}function openDBSafely(e){try{return{db:openDatabaseWithOpts(e)}}catch(e){return{error:e}}}function openDB$1(e){var t=we.get(e.name);return t||(t=openDBSafely(e),we.set(e.name,t)),t}function fetchAttachmentsIfNecessary$1(e,t,n,r,o){function checkDone(){++a===i.length&&o&&o()}function fetchAttachment(e,o){var i=e._attachments[o],a={binary:t.binary,ctx:r};n._getAttachment(e._id,o,i,a,function(t,n){e._attachments[o]=_(pick(i,["digest","content_type"]),{data:n}),checkDone()})}var i=Object.keys(e._attachments||{});if(!i.length)return o&&o();var a=0;i.forEach(function(n){t.attachments&&t.include_docs?fetchAttachment(e,n):(e._attachments[n].stub=!0,checkDone())})}function WebSqlPouch$1(e,t){function dbCreated(){hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+r._name]=!0),t(null,r)}function runMigration2(e,t){e.executeSql(Ae),e.executeSql("ALTER TABLE "+ve+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(ke),e.executeSql("ALTER TABLE "+ge+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+ge+" (local, id)");var n="SELECT "+ge+".winningseq AS seq, "+ge+".json AS metadata FROM "+ve+" JOIN "+ge+" ON "+ve+".seq = "+ge+".winningseq";e.executeSql(n,[],function(e,n){for(var r=[],o=[],i=0;i<n.rows.length;i++){var a=n.rows.item(i),s=a.seq,c=JSON.parse(a.metadata);isDeleted(c)&&r.push(s),isLocalId(c.id)&&o.push(c.id)}e.executeSql("UPDATE "+ge+"SET local = 1 WHERE id IN "+qMarks(o.length),o,function(){e.executeSql("UPDATE "+ve+" SET deleted = 1 WHERE seq IN "+qMarks(r.length),r,t)})})})})}function runMigration3(e,t){var n="CREATE TABLE IF NOT EXISTS "+be+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+ge+".id AS id, "+ve+".json AS data FROM "+ve+" JOIN "+ge+" ON "+ve+".seq = "+ge+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function doNext(){if(!r.length)return t(e);var n=r.shift(),o=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+be+" (id, rev, json) VALUES (?,?,?)",[n.id,o,n.data],function(e){e.executeSql("DELETE FROM "+ge+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+ve+" WHERE seq=?",[n.seq],function(){doNext()})})})}for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o));doNext()})})}function runMigration4(e,t){function updateRows(r){function doNext(){if(!r.length)return t(e);var o=r.shift(),i=parseHexString(o.hex,n),a=i.lastIndexOf("::"),s=i.substring(0,a),c=i.substring(a+2),u="UPDATE "+ve+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(u,[s,c,i],function(){doNext()})}doNext()}var r="ALTER TABLE "+ve+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+ve+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(Ee,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+ve;e.executeSql(t,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r));updateRows(n)})})})})}function runMigration5(e,t){function migrateAttsAndSeqs(e){var n="SELECT COUNT(*) AS cnt FROM "+ye;e.executeSql(n,[],function(e,n){function nextPage(){var n=select(Ie+", "+ge+".id AS id",[ge,ve],Oe,null,ge+".id ");n+=" LIMIT "+i+" OFFSET "+o,o+=i,e.executeSql(n,[],function(e,n){function addDigestSeq(e,t){var n=r[e]=r[e]||[];n.indexOf(t)===-1&&n.push(t)}if(!n.rows.length)return t(e);for(var r={},o=0;o<n.rows.length;o++)for(var i=n.rows.item(o),a=unstringifyDoc(i.data,i.id,i.rev),s=Object.keys(a._attachments||{}),c=0;c<s.length;c++){var u=a._attachments[s[c]];addDigestSeq(u.digest,i.seq)}var l=[];if(Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(t){l.push([e,t])})}),!l.length)return nextPage();var d=0;l.forEach(function(t){var n="INSERT INTO "+Ce+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++d===l.length&&nextPage()})})})}var r=n.rows.item(0).cnt;if(!r)return t(e);var o=0,i=10;nextPage()})}var n="CREATE TABLE IF NOT EXISTS "+Ce+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(Ne,[],function(e){e.executeSql(xe,[],migrateAttsAndSeqs)})})}function runMigration6(e,t){var n="ALTER TABLE "+ye+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function runMigration7(e,t){var n="ALTER TABLE "+ge+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+ge+" SET max_seq=(SELECT MAX(seq) FROM "+ve+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+ge+" (max_seq)";e.executeSql(n,[],t)})})}function checkEncoding(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,r){var o=r.rows.item(0).hex;n=2===o.length?"UTF-8":"UTF-16",t()})}function onGetInstanceId(){for(;a.length>0;){var e=a.pop();e(null,o)}}function onGetVersion(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+_e+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+ye+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",i="CREATE TABLE IF NOT EXISTS "+Ce+" (digest, seq INTEGER)",a="CREATE TABLE IF NOT EXISTS "+ge+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",s="CREATE TABLE IF NOT EXISTS "+ve+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",c="CREATE TABLE IF NOT EXISTS "+be+" (id UNIQUE, rev, json)";e.executeSql(r),e.executeSql(c),e.executeSql(i,[],function(){e.executeSql(xe),e.executeSql(Ne)}),e.executeSql(a,[],function(){e.executeSql(Ae),e.executeSql(s,[],function(){e.executeSql(ke),e.executeSql(Ee),e.executeSql(n,[],function(){var t="INSERT INTO "+_e+" (db_version, dbid) VALUES (?,?)";o=q();var n=[me,o];e.executeSql(t,n,function(){onGetInstanceId()})})})})}else{var u=function(){var n=t<me;n&&e.executeSql("UPDATE "+_e+" SET db_version = "+me);var r="SELECT dbid FROM "+_e;e.executeSql(r,[],function(e,t){o=t.rows.item(0).dbid,onGetInstanceId()})},l=[runMigration2,runMigration3,runMigration4,runMigration5,runMigration6,runMigration7,u],d=t,f=function(e){l[d-1](e,f),d++};f(e)}}function setup(){u.transaction(function(e){checkEncoding(e,function(){fetchVersion(e)})},websqlError(t),dbCreated)}function fetchVersion(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+_e;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+_e,[],function(e,t){var n=t.rows.item(0).db_version;onGetVersion(e,n)}):e.executeSql("ALTER TABLE "+_e+" ADD COLUMN db_version INTEGER",[],function(){onGetVersion(e,1)}):onGetVersion(e,0)})}function getMaxSeq(e,t){var n="SELECT MAX(seq) AS seq FROM "+ve;e.executeSql(n,[],function(e,n){var r=n.rows.item(0).seq||0;t(r)})}function countDocs(e,t){var n=select("COUNT("+ge+".id) AS 'num'",[ge,ve],Oe,ve+".deleted=0");e.executeSql(n,[],function(e,n){t(n.rows.item(0).num)})}function latest$$1(e,t,n,r,o){var i=select(Ie,[ge,ve],Oe,ge+".id=?"),a=[t];e.executeSql(i,a,function(e,t){if(!t.rows.length){var i=createError(w,"missing");return o(i)}var a=t.rows.item(0),s=safeJsonParse(a.metadata);r(latest(n,s))})}var n,r=this,o=null,i=getSize(e),a=[];r._name=e.name;var s=_({},e,{version:De,description:e.name,size:i}),c=openDB$1(s);if(c.error)return websqlError(t)(c.error);var u=c.db;"function"!=typeof u.readTransaction&&(u.readTransaction=u.transaction),setup(),r._remote=!1,r.type=function(){return"websql"},r._id=toPromise(function(e){e(null,o)}),r._info=function(e){var t,r;u.readTransaction(function(e){getMaxSeq(e,function(e){t=e}),countDocs(e,function(e){r=e})},websqlError(e),function(){e(null,{doc_count:r,update_seq:t,websql_encoding:n})})},r._bulkDocs=function(t,n,o){websqlBulkDocs(e,t,n,r,u,Se,o)},r._get=function(e,t,n){function finish(e){n(e,{doc:o,metadata:i,ctx:a})}var o,i,a=t.ctx;if(!a)return u.readTransaction(function(o){r._get(e,_({ctx:o},t),n)});var s,c;if(t.rev){if(t.latest)return void latest$$1(a,e,t.rev,function(o){t.latest=!1,t.rev=o,r._get(e,t,n)},finish);s=select(Ie,[ge,ve],ge+".id="+ve+".doc_id",[ve+".doc_id=?",ve+".rev=?"]),c=[e,t.rev]}else s=select(Ie,[ge,ve],Oe,ge+".id=?"),c=[e];a.executeSql(s,c,function(e,n){if(!n.rows.length){var r=createError(w,"missing");return finish(r)}var a=n.rows.item(0);if(i=safeJsonParse(a.metadata),a.deleted&&!t.rev){var s=createError(w,"deleted");return finish(s)}o=unstringifyDoc(a.data,i.id,a.rev),finish()})},r._allDocs=function(e,t){var n,o,i=[],a="startkey"in e&&e.startkey,s="endkey"in e&&e.endkey,c="key"in e&&e.key,l="keys"in e&&e.keys,d="descending"in e&&e.descending,f="limit"in e?e.limit:-1,p="skip"in e?e.skip:0,h=e.inclusive_end!==!1,m=[],g=[];if(l){var v=[],y="";l.forEach(function(e){v.indexOf(e)===-1&&(v.push(e),y+="?,")}),y=y.substring(0,y.length-1),g.push(ge+".id IN ("+y+")"),m=m.concat(v)}else if(c!==!1)g.push(ge+".id = ?"),m.push(c);else if(a!==!1||s!==!1){if(a!==!1&&(g.push(ge+".id "+(d?"<=":">=")+" ?"),m.push(a)),s!==!1){var b=d?">":"<";h&&(b+="="),g.push(ge+".id "+b+" ?"),m.push(s)}c!==!1&&(g.push(ge+".id = ?"),m.push(c))}l||g.push(ve+".deleted = 0"),u.readTransaction(function(t){if(countDocs(t,function(e){n=e}),e.update_seq&&getMaxSeq(t,function(e){o=e}),0!==f){var a=select(Ie,[ge,ve],Oe,g,ge+".id "+(d?"DESC":"ASC"));a+=" LIMIT "+f+" OFFSET "+p,t.executeSql(a,m,function(t,n){for(var o=0,a=n.rows.length;o<a;o++){var s=n.rows.item(o),c=safeJsonParse(s.metadata),u=c.id,d=unstringifyDoc(s.data,u,s.rev),f=d._rev,p={id:u,key:u,value:{rev:f}};if(e.include_docs){if(p.doc=d,p.doc._rev=f,e.conflicts){var h=collectConflicts(c);h.length&&(p.doc._conflicts=h)}fetchAttachmentsIfNecessary$1(p.doc,e,r,t)}if(s.deleted){if(!l)continue;p.value.deleted=!0,p.doc=null}if(l){var m=l.indexOf(u,m);do i[m]=p,m=l.indexOf(u,m+1);while(m>-1&&m<l.length)}else i.push(p)}l&&l.forEach(function(e,t){i[t]||(i[t]={key:e,error:"not_found"})})})}},websqlError(t),function(){var r={total_rows:n,offset:e.skip,rows:i};e.update_seq&&(r.update_seq=o),t(null,r)})},r._changes=function(e){function fetchChanges(){var t=ge+".json AS metadata, "+ge+".max_seq AS maxSeq, "+ve+".json AS winningDoc, "+ve+".rev AS winningRev ",c=ge+" JOIN "+ve,l=ge+".id="+ve+".doc_id AND "+ge+".winningseq="+ve+".seq",d=["maxSeq > ?"],f=[e.since];e.doc_ids&&(d.push(ge+".id IN "+qMarks(e.doc_ids.length)),f=f.concat(e.doc_ids));var p="maxSeq "+(n?"DESC":"ASC"),h=select(t,c,l,d,p),m=filterChange(e);e.view||e.filter||(h+=" LIMIT "+o);var g=e.since||0;u.readTransaction(function(t){t.executeSql(h,f,function(t,n){function reportChange(t){return function(){e.onChange(t)}}for(var c=0,u=n.rows.length;c<u;c++){var l=n.rows.item(c),d=safeJsonParse(l.metadata);g=l.maxSeq;var f=unstringifyDoc(l.winningDoc,d.id,l.winningRev),p=e.processChange(f,d,e);p.seq=l.maxSeq;var h=m(p);if("object"==typeof h)return e.complete(h);if(h&&(s++,i&&a.push(p),e.attachments&&e.include_docs?fetchAttachmentsIfNecessary$1(f,e,r,t,reportChange(p)):reportChange(p)()),s===o)break}})},websqlError(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:g})})}if(e=clone(e),e.continuous){var t=r._name+":"+q();return Se.addListener(r._name,t,r,e),Se.notify(r._name),{cancel:function(){Se.removeListener(r._name,t)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var o="limit"in e?e.limit:-1;0===o&&(o=1);var i;i="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var a=[],s=0;fetchChanges()},r._close=function(e){e()},r._getAttachment=function(e,t,r,o,i){var a,s=o.ctx,c=r.digest,u=r.content_type,l="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+ye+" WHERE digest=?";s.executeSql(l,[c],function(e,t){var r=t.rows.item(0),s=r.escaped?unescapeBlob(r.body):parseHexString(r.body,n);a=o.binary?binStringToBluffer(s,u):Z(s),i(null,a)})},r._getRevisionTree=function(e,t){u.readTransaction(function(n){var r="SELECT json AS metadata FROM "+ge+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=safeJsonParse(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(createError(w))})})},r._doCompaction=function(e,t,n){return t.length?void u.transaction(function(n){var r="SELECT json AS metadata FROM "+ge+" WHERE id = ?";n.executeSql(r,[e],function(n,r){var o=safeJsonParse(r.rows.item(0).metadata);traverseRevTree(o.rev_tree,function(e,n,r,o,i){var a=n+"-"+r;t.indexOf(a)!==-1&&(i.status="missing")});var i="UPDATE "+ge+" SET json = ? WHERE id = ?";n.executeSql(i,[safeJsonStringify(o),e])}),compactRevs$1(t,e,n)},websqlError(n),function(){n()}):n()},r._getLocal=function(e,t){u.readTransaction(function(n){var r="SELECT json, rev FROM "+be+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var o=r.rows.item(0),i=unstringifyDoc(o.json,e,o.rev);t(null,i)}else t(createError(w))})})},r._putLocal=function(e,t,n){function putLocal(e){var c,u;o?(c="UPDATE "+be+" SET rev=?, json=? WHERE id=? AND rev=?",u=[r,s,i,o]):(c="INSERT INTO "+be+" (id, rev, json) VALUES (?,?,?)",u=[i,r,s]),e.executeSql(c,u,function(e,o){o.rowsAffected?(a={ok:!0,id:i,rev:r},t.ctx&&n(null,a)):n(createError(S))},function(){return n(createError(S)),!1})}"function"==typeof t&&(n=t,t={}),delete e._revisions;var r,o=e._rev,i=e._id;r=o?e._rev="0-"+(parseInt(o.split("-")[1],10)+1):e._rev="0-1";var a,s=stringifyDoc(e);t.ctx?putLocal(t.ctx):u.transaction(putLocal,websqlError(n),function(){a&&n(null,a)})},r._removeLocal=function(e,t,n){function removeLocal(o){var i="DELETE FROM "+be+" WHERE id=? AND rev=?",a=[e._id,e._rev];o.executeSql(i,a,function(o,i){return i.rowsAffected?(r={ok:!0,id:e._id,rev:"0-0"},void(t.ctx&&n(null,r))):n(createError(w))})}"function"==typeof t&&(n=t,t={});var r;t.ctx?removeLocal(t.ctx):u.transaction(removeLocal,websqlError(n),function(){r&&n(null,r)})},r._destroy=function(e,t){Se.removeAllListeners(r._name),u.transaction(function(e){var t=[ge,ve,ye,_e,be,Ce];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},websqlError(t),function(){hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+r._name],delete window.localStorage[r._name]),t(null,{ok:!0})})}}function canOpenTestDB(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}function isValidWebSQL(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=hasLocalStorage(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var n=canOpenTestDB();return e&&(localStorage[t]=n?"1":"0"),n}function valid(){return"function"==typeof openDatabase&&isValidWebSQL()}function openDB(e,t,n,r){return openDatabase(e,t,n,r)}function WebSQLPouch(e,t){var n=_({websql:openDB},e);WebSqlPouch$1.call(this,n,t)}function WebSqlPouch(e){e.adapter("websql",WebSQLPouch,!0)}function wrappedFetch(){for(var e={},t=new f(function(t,n){e.resolve=t,e.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.promise=t,f.resolve().then(function(){return fetch.apply(null,n)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}function fetchRequest(e,t){var n,r,o,i=new Headers,a={method:e.method,credentials:"include",headers:i};return e.json&&(i.set("Accept","application/json"),i.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?a.body=JSON.stringify(e.body):"body"in e?a.body=e.body:a.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&i.set(t,e.headers[t])}),n=wrappedFetch(e.url,a),e.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),n.promise.then(function(t){return o={statusCode:t.status},e.timeout>0&&clearTimeout(r),o.statusCode>=200&&o.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){o.statusCode>=200&&o.statusCode<300?t(null,o,e):(e.status=o.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:n.reject}}function xhRequest(e,t){var n,r,o=!1,i=function(){n.abort(),c()},a=function(){o=!0,n.abort(),c()},s={abort:i},c=function(){clearTimeout(r),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=e.xhr?new e.xhr:new XMLHttpRequest;try{n.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}n.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(n.responseType="arraybuffer"),"body"in e||(e.body=null);for(var u in e.headers)e.headers.hasOwnProperty(u)&&n.setRequestHeader(u,e.headers[u]);return e.timeout>0&&(r=setTimeout(a,e.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(a,e.timeout))},"undefined"!=typeof n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var i;i=e.binary?createBlob([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,t(null,r,i)}else{var a={};if(o)a=new Error("ETIMEDOUT"),a.code="ETIMEDOUT";else if("string"==typeof n.response)try{a=JSON.parse(n.response)}catch(e){}a.status=n.status,t(a)}c()}},e.body&&e.body instanceof Blob?readAsArrayBuffer(e.body,function(e){n.send(e)}):n.send(e.body),s}function testXhr(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function ajax$1(e,t){return Pe||e.xhr?xhRequest(e,t):fetchRequest(e,t)}function defaultBody(){return""}function ajaxCore$1(e,t){function onSuccess(t,n,r){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return r(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?generateErrorFromResponse(e):e})),e.binary,r(null,t,n)}e=clone(e);var n={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=_(n,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),ajax$1(e,function(n,r,o){if(n)return t(generateErrorFromResponse(n));var i,a=r.headers&&r.headers["content-type"],s=o||defaultBody();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof s&&(/json/.test(a)||/^[\s]*\{/.test(s)&&/\}[\s]*$/.test(s)))try{s=JSON.parse(s.toString())}catch(e){}r.statusCode>=200&&r.statusCode<300?onSuccess(s,r,t):(i=generateErrorFromResponse(s),i.status=r.statusCode,t(i))})}function ajax(e,t){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1,o=n.indexOf("msie")!==-1,i=n.indexOf("trident")!==-1,a=n.indexOf("edge")!==-1,s=r||(o||i||a)&&"GET"===e.method,c=!("cache"in e)||e.cache,u=/^blob:/.test(e.url);if(!u&&(s||!c)){var l=e.url.indexOf("?")!==-1;e.url+=(l?"&":"?")+"_nonce="+Date.now()}return ajaxCore$1(e,t)}function pool(e,t){return new f(function(n,r){function runNext(){i++,e[a++]().then(onSuccess,onError)}function doNext(){++s===c?o?r(o):n():runNextBatch()}function onSuccess(){i--,doNext()}function onError(e){i--,o=o||e,doNext()}function runNextBatch(){for(;i<t&&a<c;)runNext()}var o,i=0,a=0,s=0,c=e.length;runNextBatch()})}function readAttachmentsAsBlobOrBuffer(e){var t=e.doc||e.ok,n=t._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];t.data=b64ToBluffer(t.data,t.content_type)})}function encodeDocId(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function preprocessAttachments$2(e){return e._attachments&&Object.keys(e._attachments)?f.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data)return new f(function(e){blobToBase64(n.data,e)}).then(function(e){n.data=e})})):f.resolve()}function hasUrlPrefix(e){if(!e.prefix)return!1;var t=parseUri(e.prefix).protocol;return"http"===t||"https"===t}function getHost(e,t){if(hasUrlPrefix(t)){var n=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(n)}var r=parseUri(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var o=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=o.pop(),r.db.indexOf("%")===-1&&(r.db=encodeURIComponent(r.db)),r.path=o.join("/"),r}function genDBUrl(e,t){return genUrl(e,e.db+"/"+t)}function genUrl(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function paramsToStr(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function HttpPouch(e,t){function ajax$$1(e,t,r){var o=(e||{}).ajax||{},i=_(clone(a),o,t),s=clone(a.headers||{});
return i.headers=_(s,o.headers,t.headers||{}),n.constructor.listeners("debug").length&&n.constructor.emit("debug",["http",i.method,i.url]),n._ajax(i,r)}function ajaxPromise(e,t){return new f(function(n,r){ajax$$1(e,t,function(e,t){return e?r(e):void n(t)})})}function adapterFun$$1(e,t){return adapterFun(e,i(function(e){setup().then(function(){return t.apply(this,e)}).catch(function(t){var n=e.pop();n(t)})}))}function setup(){if(e.skipSetup||e.skip_setup)return f.resolve();if(d)return d;var t={method:"GET",url:o};return d=ajaxPromise({},t).catch(function(e){return e&&e.status&&404===e.status?(explainError(404,"PouchDB is just detecting if the remote exists."),ajaxPromise({},{method:"PUT",url:o})):f.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||f.reject(e)}),d.catch(function(){d=null}),d}function encodeAttachmentId(e){return e.split("/").map(encodeURIComponent).join("/")}var n=this,r=getHost(e.name,e),o=genDBUrl(r,"");e=clone(e);var a=e.ajax||{};if(e.auth||r.auth){var s=e.auth||r.auth,u=s.username+":"+s.password,l=Z(unescape(encodeURIComponent(u)));a.headers=a.headers||{},a.headers.Authorization="Basic "+l}n._ajax=ajax;var d;c(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=adapterFun$$1("id",function(e){ajax$$1({},{method:"GET",url:genUrl(r,"")},function(t,n){var o=n&&n.uuid?n.uuid+r.db:genDBUrl(r,"");e(null,o)})}),n.request=adapterFun$$1("request",function(e,t){e.url=genDBUrl(r,e.url),ajax$$1({},e,t)}),n.compact=adapterFun$$1("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=clone(e),ajax$$1(e,{url:genDBUrl(r,"_compact"),method:"POST"},function(){function ping(){n.info(function(n,r){r&&!r.compact_running?t(null,{ok:!0}):setTimeout(ping,e.interval||200)})}ping()})}),n.bulkGet=adapterFun("bulkGet",function(e,t){function doBulkGet(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),e.latest&&(n.latest=!0),ajax$$1(e,{url:genDBUrl(r,"_bulk_get"+paramsToStr(n)),method:"POST",body:{docs:e.docs}},function(n,r){!n&&e.attachments&&e.binary&&r.results.forEach(function(e){e.docs.forEach(readAttachmentsAsBlobOrBuffer)}),t(n,r)})}function doBulkGetShim(){function onResult(e){return function(n,r){s[e]=r.results,++i===o&&t(null,{results:flatten(s)})}}for(var r=Te,o=Math.ceil(e.docs.length/r),i=0,s=new Array(o),c=0;c<o;c++){var u=pick(e,["revs","attachments","binary","latest"]);u.ajax=a,u.docs=e.docs.slice(c*r,Math.min(e.docs.length,(c+1)*r)),bulkGet(n,u,onResult(c))}}var n=this,o=genUrl(r,""),i=Me[o];"boolean"!=typeof i?doBulkGet(function(e,n){e?(Me[o]=!1,explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),doBulkGetShim()):(Me[o]=!0,t(null,n))}):i?doBulkGet(t):doBulkGetShim()}),n._info=function(e){setup().then(function(){ajax$$1({},{method:"GET",url:genDBUrl(r,"")},function(t,n){return t?e(t):(n.host=genDBUrl(r,""),void e(null,n))})}).catch(e)},n.get=adapterFun$$1("get",function(e,t,n){function fetchAttachments(e){function fetch(o){var i=n[o],a=encodeDocId(e._id)+"/"+encodeAttachmentId(o)+"?rev="+e._rev;return ajaxPromise(t,{method:"GET",url:genDBUrl(r,a),binary:!0}).then(function(e){return t.binary?e:new f(function(t){blobToBase64(e,t)})}).then(function(e){delete i.stub,delete i.length,i.data=e})}var n=e._attachments,o=n&&Object.keys(n);if(n&&o.length){var i=o.map(function(e){return function(){return fetch(e)}});return pool(i,5)}}function fetchAllAttachments(e){return Array.isArray(e)?f.all(e.map(function(e){if(e.ok)return fetchAttachments(e.ok)})):fetchAttachments(e)}"function"==typeof t&&(n=t,t={}),t=clone(t);var o={};t.revs&&(o.revs=!0),t.revs_info&&(o.revs_info=!0),t.latest&&(o.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),o.open_revs=t.open_revs),t.rev&&(o.rev=t.rev),t.conflicts&&(o.conflicts=t.conflicts),t.update_seq&&(o.update_seq=t.update_seq),e=encodeDocId(e);var i={method:"GET",url:genDBUrl(r,e+paramsToStr(o))};ajaxPromise(t,i).then(function(e){return f.resolve().then(function(){if(t.attachments)return fetchAllAttachments(e)}).then(function(){n(null,e)})}).catch(function(t){t.docId=e,n(t)})}),n.remove=adapterFun$$1("remove",function(e,t,n,o){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(i=e,"function"==typeof t?(o=t,n={}):(o=n,n=t));var a=i._rev||n.rev;ajax$$1(n,{method:"DELETE",url:genDBUrl(r,encodeDocId(i._id))+"?rev="+a},o)}),n.getAttachment=adapterFun$$1("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={});var i=n.rev?"?rev="+n.rev:"",a=genDBUrl(r,encodeDocId(e))+"/"+encodeAttachmentId(t)+i;ajax$$1(n,{method:"GET",url:a,binary:!0},o)}),n.removeAttachment=adapterFun$$1("removeAttachment",function(e,t,n,o){var i=genDBUrl(r,encodeDocId(e)+"/"+encodeAttachmentId(t))+"?rev="+n;ajax$$1({},{method:"DELETE",url:i},o)}),n.putAttachment=adapterFun$$1("putAttachment",function(e,t,n,o,i,s){"function"==typeof i&&(s=i,i=o,o=n,n=null);var c=encodeDocId(e)+"/"+encodeAttachmentId(t),u=genDBUrl(r,c);if(n&&(u+="?rev="+n),"string"==typeof o){var l;try{l=X(o)}catch(e){return s(createError(x,"Attachment is not a valid base64 string"))}o=l?binStringToBluffer(l,i):""}var d={headers:{"Content-Type":i},method:"PUT",url:u,processData:!1,body:o,timeout:a.timeout||6e4};ajax$$1({},d,s)}),n._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,setup().then(function(){return f.all(e.docs.map(preprocessAttachments$2))}).then(function(){ajax$$1(t,{method:"POST",url:genDBUrl(r,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){return e?n(e):(t.forEach(function(e){e.ok=!0}),void n(null,t))})}).catch(n)},n._put=function(e,t,n){setup().then(function(){return preprocessAttachments$2(e)}).then(function(){ajax$$1(t,{method:"PUT",url:genDBUrl(r,encodeDocId(e._id)),body:e},function(t,r){return t?(t.docId=e&&e._id,n(t)):void n(null,r)})}).catch(n)},n.allDocs=adapterFun$$1("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=clone(e);var n,o={},i="GET";e.conflicts&&(o.conflicts=!0),e.update_seq&&(o.update_seq=!0),e.descending&&(o.descending=!0),e.include_docs&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.key&&(o.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(o.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(o.endkey=JSON.stringify(e.endkey)),"undefined"!=typeof e.inclusive_end&&(o.inclusive_end=!!e.inclusive_end),"undefined"!=typeof e.limit&&(o.limit=e.limit),"undefined"!=typeof e.skip&&(o.skip=e.skip);var a=paramsToStr(o);"undefined"!=typeof e.keys&&(i="POST",n={keys:e.keys}),ajaxPromise(e,{method:i,url:genDBUrl(r,"_all_docs"+a),body:n}).then(function(n){e.include_docs&&e.attachments&&e.binary&&n.rows.forEach(readAttachmentsAsBlobOrBuffer),t(null,n)}).catch(t)}),n._changes=function(e){var t="batch_size"in e?e.batch_size:Re;e=clone(e),!e.continuous||"heartbeat"in e||(e.heartbeat=Fe);var n="timeout"in e?e.timeout:"timeout"in a?a.timeout:3e4;"timeout"in e&&e.timeout&&n-e.timeout<je&&(n=e.timeout+je),"heartbeat"in e&&e.heartbeat&&n-e.heartbeat<je&&(n=e.heartbeat+je);var o={};"timeout"in e&&e.timeout&&(o.timeout=e.timeout);var i,s="undefined"!=typeof e.limit&&e.limit;i="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var u=s;if(e.style&&(o.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.continuous&&(o.feed="longpoll"),e.seq_interval&&(o.seq_interval=e.seq_interval),e.conflicts&&(o.conflicts=!0),e.descending&&(o.descending=!0),e.update_seq&&(o.update_seq=!0),"heartbeat"in e&&e.heartbeat&&(o.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(o.filter=e.filter),e.view&&"string"==typeof e.view&&(o.filter="_view",o.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var l in e.query_params)e.query_params.hasOwnProperty(l)&&(o[l]=e.query_params[l]);var d,f="GET";e.doc_ids?(o.filter="_doc_ids",f="POST",d={doc_ids:e.doc_ids}):e.selector&&(o.filter="_selector",f="POST",d={selector:e.selector});var p,h,m=function(i,a){if(!e.aborted){o.since=i,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),e.descending?s&&(o.limit=u):o.limit=!s||u>t?t:u;var c={method:f,url:genDBUrl(r,"_changes"+paramsToStr(o)),timeout:n,body:d};h=i,e.aborted||setup().then(function(){p=ajax$$1(e,c,a)}).catch(a)}},g={results:[]},v=function(n,r){if(!e.aborted){var o=0;if(r&&r.results){o=r.results.length,g.last_seq=r.last_seq;var a=null,l=null;"number"==typeof r.pending&&(a=r.pending),"string"!=typeof g.last_seq&&"number"!=typeof g.last_seq||(l=g.last_seq);var d={};d.query=e.query_params,r.results=r.results.filter(function(t){u--;var n=filterChange(e)(t);return n&&(e.include_docs&&e.attachments&&e.binary&&readAttachmentsAsBlobOrBuffer(t),i&&g.results.push(t),e.onChange(t,a,l)),n})}else if(n)return e.aborted=!0,void e.complete(n);r&&r.last_seq&&(h=r.last_seq);var f=s&&u<=0||r&&o<t||e.descending;(!e.continuous||s&&u<=0)&&f?e.complete(null,g):c(function(){m(h,v)})}};return m(e.since||0,v),{cancel:function(){e.aborted=!0,p&&p.abort()}}},n.revsDiff=adapterFun$$1("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),ajax$$1(t,{method:"POST",url:genDBUrl(r,"_revs_diff"),body:e},n)}),n._close=function(e){e()},n._destroy=function(e,t){ajax$$1(e,{url:genDBUrl(r,""),method:"DELETE"},function(e,n){return e&&e.status&&404!==e.status?t(e):void t(null,n)})}}function HttpPouch$1(e){e.adapter("http",HttpPouch,!1),e.adapter("https",HttpPouch,!1)}function QueryParseError(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,QueryParseError)}catch(e){}}function NotFoundError(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,NotFoundError)}catch(e){}}function BuiltInError(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,BuiltInError)}catch(e){}}function promisedCallback(e,t){return t&&e.then(function(e){c(function(){t(null,e)})},function(e){c(function(){t(e)})}),e}function callbackify(e){return i(function(t){var n=t.pop(),r=e.apply(this,t);return"function"==typeof n&&promisedCallback(r,n),r})}function fin(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})}function sequentialize(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function uniq(e){var t=new m(e),n=new Array(t.size),r=-1;return t.forEach(function(e){n[++r]=e}),n}function mapToKeysArray(e){var t=new Array(e.size),n=-1;return e.forEach(function(e,r){t[++n]=r}),t}function createBuiltInError(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new BuiltInError(t)}function sum(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e[n];if("number"!=typeof o){if(!Array.isArray(o))throw createBuiltInError("_sum");t="number"==typeof t?[t]:t;for(var i=0,a=o.length;i<a;i++){var s=o[i];if("number"!=typeof s)throw createBuiltInError("_sum");"undefined"==typeof t[i]?t.push(s):t[i]+=s}}else"number"==typeof t?t+=o:t[0]+=o}return t}function evalFunctionWithEval(e,t){return scopeEval("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:sum,log:Le,isArray:Ve,toJSON:Be})}function TaskQueue$2(){this.promise=new f(function(e){e()})}function stringify(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function createViewSignature(e,t){return stringify(e)+stringify(t)+"undefined"}function createView(e,t,n,r,o,i){var a,s=createViewSignature(n,r);if(!o&&(a=e._cachedViews=e._cachedViews||{},a[s]))return a[s];var c=e.info().then(function(c){function diffFunction(e){e.views=e.views||{};var n=t;n.indexOf("/")===-1&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[u])return r[u]=!0,e}var u=c.db_name+"-mrview-"+(o?"temp":stringMd5(s));return upsert(e,"_local/"+i,diffFunction).then(function(){return e.registerDependentDatabase(u).then(function(t){var o=t.db;o.auto_compaction=!0;var i={name:u,db:o,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return i.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return i.seq=e?e.seq:0,a&&i.db.once("destroyed",function(){delete a[s]}),i})})})});return a&&(a[s]=c),c}function parseViewName(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function isGenOne(e){return 1===e.length&&/^1-/.test(e[0].rev)}function emitError(e,t){try{e.emit("error",t)}catch(e){guardedConsole("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),guardedConsole("error",t)}}function createAbstractMapReduce(e,t,n,r){function tryMap(e,t,n){try{t(n)}catch(t){emitError(e,t)}}function tryReduce(e,t,n,r,o){try{return{output:t(n,r,o)}}catch(t){return emitError(e,t),{error:t}}}function sortByKeyThenValue(e,t){var n=collate(e.key,t.key);return 0!==n?n:collate(e.value,t.value)}function sliceResults(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function rowToDocId(e){var t=e.value,n=t&&"object"==typeof t&&t._id||e.id;return n}function readAttachmentsAsBlobOrBuffer(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var n=t[e];t[e].data=b64ToBluffer(n.data,n.content_type)})})}function postprocessAttachments(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&readAttachmentsAsBlobOrBuffer(t),t}}function addHttpParam(e,t,n,r){var o=t[e];"undefined"!=typeof o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(e+"="+o))}function coerceInteger(e){if("undefined"!=typeof e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function coerceOptions(e){return e.group_level=coerceInteger(e.group_level),e.limit=coerceInteger(e.limit),e.skip=coerceInteger(e.skip),e}function checkPositiveInteger(e){if(e){if("number"!=typeof e)return new QueryParseError('Invalid value for integer: "'+e+'"');if(e<0)return new QueryParseError('Invalid value for positive integer: "'+e+'"')}}function checkQueryParseError(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if("undefined"!=typeof e[n]&&"undefined"!=typeof e[r]&&collate(e[n],e[r])>0)throw new QueryParseError("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new QueryParseError("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new QueryParseError("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var n=checkPositiveInteger(e[t]);if(n)throw n})}function httpQuery(e,t,n){var r,o=[],i="GET";if(addHttpParam("reduce",n,o),addHttpParam("include_docs",n,o),addHttpParam("attachments",n,o),addHttpParam("limit",n,o),addHttpParam("descending",n,o),addHttpParam("group",n,o),addHttpParam("group_level",n,o),addHttpParam("skip",n,o),addHttpParam("stale",n,o),addHttpParam("conflicts",n,o),addHttpParam("startkey",n,o,!0),addHttpParam("start_key",n,o,!0),addHttpParam("endkey",n,o,!0),addHttpParam("end_key",n,o,!0),addHttpParam("inclusive_end",n,o),addHttpParam("key",n,o,!0),addHttpParam("update_seq",n,o),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof n.keys){var a=2e3,s="keys="+encodeURIComponent(JSON.stringify(n.keys));s.length+o.length+1<=a?o+=("?"===o[0]?"&":"?")+s:(i="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var c=parseViewName(t);return e.request({method:i,url:"_design/"+c[0]+"/_view/"+c[1]+o,body:r}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(postprocessAttachments(n))}return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:r}).then(postprocessAttachments(n))}function customQuery(e,t,n){return new f(function(r,o){e._query(t,n,function(e,t){return e?o(e):void r(t)})})}function customViewCleanup(e){return new f(function(t,n){e._viewCleanup(function(e,r){return e?n(e):void t(r)})})}function defaultsTo(e){return function(t){if(404===t.status)return e;throw t}}function getDocsToPersist(e,t,n){function getMetaDoc(){return isGenOne(s)?f.resolve(o):t.db.get(r).catch(defaultsTo(o))}function getKeyValueDocs(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):f.resolve({rows:[]})}function processKeyValueDocs(e,t){for(var n=[],r=new m,o=0,i=t.rows.length;o<i;o++){var s=t.rows[o],c=s.doc;if(c&&(n.push(c),r.add(c._id),c._deleted=!a.has(c._id),!c._deleted)){var u=a.get(c._id);"value"in u&&(c.value=u.value)}}var l=mapToKeysArray(a);return l.forEach(function(e){if(!r.has(e)){var t={_id:e},o=a.get(e);"value"in o&&(t.value=o.value),n.push(t)}}),e.keys=uniq(l.concat(e.keys)),n.push(e),n}var r="_local/doc_"+e,o={_id:r,keys:[]},i=n.get(e),a=i[0],s=i[1];return getMetaDoc().then(function(e){return getKeyValueDocs(e).then(function(t){return processKeyValueDocs(e,t)})})}function saveKeyValues(e,t,n){var r="_local/lastSeq";return e.db.get(r).catch(defaultsTo({_id:r,seq:0})).then(function(r){var o=mapToKeysArray(t);return f.all(o.map(function(n){return getDocsToPersist(n,e,t)})).then(function(t){var o=flatten(t);return r.seq=n,o.push(r),e.db.bulkDocs({docs:o})})})}function getQueue(e){var t="string"==typeof e?e:e.name,n=qe[t];return n||(n=qe[t]=new TaskQueue$2),n}function updateView(e){return sequentialize(getQueue(e),function(){return updateViewInQueue(e)})()}function updateViewInQueue(e){function emit(e,t){var o={id:r._id,key:normalizeKey(e)};"undefined"!=typeof t&&null!==t&&(o.value=normalizeKey(t)),n.push(o)}function processChange(t,n){return function(){return saveKeyValues(e,t,n)}}function processNextBatch(){return e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:i,limit:Ue}).then(processBatch)}function processBatch(e){var t=e.results;if(t.length){var n=createDocIdsToChangesAndEmits(t);if(a.add(processChange(n,i)),!(t.length<Ue))return processNextBatch()}}function createDocIdsToChangesAndEmits(t){for(var a=new g,s=0,c=t.length;s<c;s++){var u=t[s];if("_"!==u.doc._id[0]){n=[],r=u.doc,r._deleted||tryMap(e.sourceDB,o,r),n.sort(sortByKeyThenValue);var l=createIndexableKeysToKeyValues(n);a.set(u.doc._id,[l,u.changes])}i=u.seq}return a}function createIndexableKeysToKeyValues(e){for(var t,n=new g,r=0,o=e.length;r<o;r++){var i=e[r],a=[i.key,i.id];r>0&&0===collate(i.key,t)&&a.push(r),n.set(toIndexableString(a),i),t=i.key}return n}var n,r,o=t(e.mapFun,emit),i=e.seq||0,a=new TaskQueue$2;return processNextBatch().then(function(){return a.finish()}).then(function(){e.seq=i})}function reduceView(e,t,r){0===r.group_level&&delete r.group_level;var o=r.group||r.group_level,i=n(e.reduceFun),a=[],s=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=a[a.length-1],n=o?e.key:null;return o&&Array.isArray(n)&&(n=n.slice(0,s)),t&&0===collate(t.groupKey,n)?(t.keys.push([e.key,e.id]),void t.values.push(e.value)):void a.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var c=0,u=a.length;c<u;c++){var l=a[c],d=tryReduce(e.sourceDB,i,l.keys,l.values,!1);if(d.error&&d.error instanceof BuiltInError)throw d.error;t.push({value:d.error?null:d.output,key:l.groupKey})}return{rows:sliceResults(t,r.limit,r.skip)}}function queryView(e,t){return sequentialize(getQueue(e),function(){return queryViewInQueue(e,t)})()}function queryViewInQueue(e,t){function fetchFromView(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return n=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function onMapResultsReady(i){var a;if(a=r?reduceView(e,i,t):{total_rows:n,offset:o,rows:i},t.update_seq&&(a.update_seq=e.seq),t.include_docs){var s=uniq(i.map(rowToDocId));return e.sourceDB.allDocs({keys:s,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t=new g;return e.rows.forEach(function(e){t.set(e.id,e.doc)}),i.forEach(function(e){var n=rowToDocId(e),r=t.get(n);r&&(e.doc=r)}),a})}return a}var n,r=e.reduceFun&&t.reduce!==!1,o=t.skip||0;if("undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys),"undefined"!=typeof t.keys){var i=t.keys,a=i.map(function(e){var n={startkey:toIndexableString([e]),endkey:toIndexableString([e,{}])};return t.update_seq&&(n.update_seq=!0),fetchFromView(n)});return f.all(a).then(flatten).then(onMapResultsReady)}var s={descending:t.descending};t.update_seq&&(s.update_seq=!0);var c,u;if("start_key"in t&&(c=t.start_key),"startkey"in t&&(c=t.startkey),"end_key"in t&&(u=t.end_key),"endkey"in t&&(u=t.endkey),"undefined"!=typeof c&&(s.startkey=toIndexableString(t.descending?[c,{}]:[c])),"undefined"!=typeof u){var l=t.inclusive_end!==!1;t.descending&&(l=!l),s.endkey=toIndexableString(l?[u,{}]:[u])}if("undefined"!=typeof t.key){var d=toIndexableString([t.key]),p=toIndexableString([t.key,{}]);s.descending?(s.endkey=d,s.startkey=p):(s.startkey=d,s.endkey=p)}return r||("number"==typeof t.limit&&(s.limit=t.limit),s.skip=o),fetchFromView(s).then(onMapResultsReady)}function httpViewCleanup(e){return e.request({method:"POST",url:"_view_cleanup"})}function localViewCleanup(t){return t.get("_local/"+e).then(function(e){var n=new g;Object.keys(e.views).forEach(function(e){var t=parseViewName(e),r="_design/"+t[0],o=t[1],i=n.get(r);i||(i=new m,n.set(r,i)),i.add(o)});var r={keys:mapToKeysArray(n),include_docs:!0};return t.allDocs(r).then(function(r){var o={};r.rows.forEach(function(t){var r=t.key.substring(8);n.get(t.key).forEach(function(n){var i=r+"/"+n;e.views[i]||(i=n);var a=Object.keys(e.views[i]),s=t.doc&&t.doc.views&&t.doc.views[n];a.forEach(function(e){o[e]=o[e]||s})})});var i=Object.keys(o).filter(function(e){return!o[e]}),a=i.map(function(e){return sequentialize(getQueue(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return f.all(a).then(function(){return{ok:!0}})})},defaultsTo({ok:!0}))}function queryPromised(t,n,o){if("function"==typeof t._query)return customQuery(t,n,o);if(isRemote(t))return httpQuery(t,n,o);if("string"!=typeof n)return checkQueryParseError(o,n),$e.add(function(){var r=createView(t,"temp_view/temp_view",n.map,n.reduce,!0,e);return r.then(function(e){return fin(updateView(e).then(function(){return queryView(e,o)}),function(){return e.db.destroy()})})}),$e.finish();var i=n,a=parseViewName(i),s=a[0],u=a[1];return t.get("_design/"+s).then(function(n){var a=n.views&&n.views[u];if(!a)throw new NotFoundError("ddoc "+n._id+" has no view named "+u);r(n,u),checkQueryParseError(o,a);var s=createView(t,i,a.map,a.reduce,!1,e);return s.then(function(e){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&c(function(){updateView(e)}),queryView(e,o)):updateView(e).then(function(){return queryView(e,o)})})})}function abstractQuery(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?coerceOptions(t):{},"function"==typeof e&&(e={map:e});var o=f.resolve().then(function(){return queryPromised(r,e,t)});return promisedCallback(o,n),o}var o=callbackify(function(){var e=this;return"function"==typeof e._viewCleanup?customViewCleanup(e):isRemote(e)?httpViewCleanup(e):localViewCleanup(e)});return{query:abstractQuery,viewCleanup:o}}function getBuiltIn(e){if(/^_sum/.test(e))return We._sum;if(/^_count/.test(e))return We._count;if(/^_stats/.test(e))return We._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function mapper(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return evalFunctionWithEval(e.toString(),t)}function reducer(e){var t=e.toString(),n=getBuiltIn(t);return n?n:evalFunctionWithEval(t)}function ddocValidator(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new NotFoundError("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}function query(e,t,n){return Ge.query.call(this,e,t,n)}function viewCleanup(e){return Ge.viewCleanup.call(this,e)}function isGenOne$1(e){return/^1-/.test(e)}function fileHasChanged(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function getDocAttachments(e,t){var n=Object.keys(t._attachments);return f.all(n.map(function(n){return e.getAttachment(t._id,n,{rev:t._rev})}))}function getDocAttachmentsFromTargetOrSource(e,t,n){var r=isRemote(t)&&!isRemote(e),o=Object.keys(n._attachments);return r?e.get(n._id).then(function(r){return f.all(o.map(function(o){return fileHasChanged(r,n,o)?t.getAttachment(n._id,o):e.getAttachment(r._id,o)}))}).catch(function(e){if(404!==e.status)throw e;return getDocAttachments(t,n)}):getDocAttachments(t,n)}function createBulkGetOpts(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n].missing;r.forEach(function(e){t.push({id:n,rev:e})})}),{docs:t,revs:!0,latest:!0}}function getDocs(e,t,n,r){function getAllDocs(){var a=createBulkGetOpts(n);if(a.docs.length)return e.bulkGet(a).then(function(n){if(r.cancelled)throw new Error("cancelled");return f.all(n.results.map(function(n){return f.all(n.docs.map(function(n){var r=n.ok;return n.error&&(i=!1),r&&r._attachments?getDocAttachmentsFromTargetOrSource(t,e,r).then(function(e){var t=Object.keys(r._attachments);return e.forEach(function(e,n){var o=r._attachments[t[n]];delete o.stub,delete o.length,o.data=e}),r}):r}))})).then(function(e){o=o.concat(flatten(e).filter(Boolean))})})}function hasAttachments(e){return e._attachments&&Object.keys(e._attachments).length>0}function hasConflicts(e){return e._conflicts&&e._conflicts.length>0}function fetchRevisionOneDocs(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(r.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!isGenOne$1(e.value.rev)||hasAttachments(e.doc)||hasConflicts(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,o.push(e.doc),delete n[e.id])})})}function getRevisionOneDocs(){var e=Object.keys(n).filter(function(e){var t=n[e].missing;return 1===t.length&&isGenOne$1(t[0])});if(e.length>0)return fetchRevisionOneDocs(e)}function returnResult(){return{ok:i,docs:o}}n=clone(n);var o=[],i=!0;return f.resolve().then(getRevisionOneDocs).then(getAllDocs).then(returnResult)}function updateCheckpoint(e,t,n,r,o){return e.get(t).catch(function(n){if(404===n.status)return"http"!==e.adapter&&"https"!==e.adapter||explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:Je,version:Ke};throw n}).then(function(i){if(!o.cancelled&&i.last_seq!==n)return i.history=(i.history||[]).filter(function(e){return e.session_id!==r}),i.history.unshift({last_seq:n,session_id:r}),i.history=i.history.slice(0,Qe),i.version=Ke,i.replicator=Je,i.session_id=r,i.last_seq=n,e.put(i).catch(function(i){if(409===i.status)return updateCheckpoint(e,t,n,r,o);throw i})})}function Checkpointer(e,t,n,r,o){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=o||{}}function compareReplicationLogs(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:compareReplicationHistory(e.history,t.history)}function compareReplicationHistory(e,t){var n=e[0],r=e.slice(1),o=t[0],i=t.slice(1);if(!n||0===t.length)return{last_seq:Ye,history:[]};var a=n.session_id;if(hasSessionId(a,t))return{last_seq:n.last_seq,history:e};var s=o.session_id;return hasSessionId(s,r)?{last_seq:o.last_seq,history:i}:compareReplicationHistory(r,i)}function hasSessionId(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||hasSessionId(e,r))}function isForbiddenError(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}function backOff(e,t,n,r){if(e.retry===!1)return t.emit("error",n),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=defaultBackOff),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var o=function(){e.current_back_off=Ze},i=function(){t.removeListener("active",o)};t.once("paused",i),t.once("active",o)}e.current_back_off=e.current_back_off||Ze,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function sortObjectPropertiesByKey(e){return Object.keys(e).sort(collate).reduce(function(t,n){return t[n]=e[n],t},{})}function generateReplicationId(e,t,n){var r=n.doc_ids?n.doc_ids.sort(collate):"",o=n.filter?n.filter.toString():"",i="",a="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(i=JSON.stringify(sortObjectPropertiesByKey(n.query_params))),n.filter&&"_view"===n.filter&&(a=n.view.toString()),f.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+o+a+i+r+s;return new f(function(e){binaryMd5(t,e)})}).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})}function replicate(e,t,n,r,o){function initCheckpointer(){return s?f.resolve():generateReplicationId(e,t,n).then(function(o){a=o;var i={};i=n.checkpoint===!1?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},s=new Checkpointer(e,t,a,r,i)})}function writeDocs(){if(C=[],0!==i.docs.length){var e=i.docs,a={timeout:n.timeout};return t.bulkDocs({docs:e,new_edits:!1},a).then(function(t){if(r.cancelled)throw completeReplication(),new Error("cancelled");var n=Object.create(null);t.forEach(function(e){e.error&&(n[e.id]=e)});var i=Object.keys(n).length;o.doc_write_failures+=i,o.docs_written+=e.length-i,e.forEach(function(e){var t=n[e._id];if(t){o.errors.push(t);var i=(t.name||"").toLowerCase();if("unauthorized"!==i&&"forbidden"!==i)throw t;r.emit("denied",clone(t))}else C.push(e)})},function(t){throw o.doc_write_failures+=e.length,t})}}function finishBatch(){if(i.error)throw new Error("There was a problem getting docs.");o.last_seq=h=i.seq;var e=clone(o);return C.length&&(e.docs=C,"number"==typeof i.pending&&(e.pending=i.pending,delete i.pending),r.emit("change",e)),l=!0,s.writeCheckpoint(i.seq,w).then(function(){if(l=!1,r.cancelled)throw completeReplication(),new Error("cancelled");i=void 0,getChanges()}).catch(function(e){throw onCheckpointError(e),e})}function getDiffs(){var e={};return i.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(r.cancelled)throw completeReplication(),new Error("cancelled");i.diffs=e})}function getBatchDocs(){return getDocs(e,t,i.diffs,r).then(function(e){i.error=!e.ok,e.docs.forEach(function(e){delete i.diffs[e._id],o.docs_read++,i.docs.push(e)})})}function startNextBatch(){if(!r.cancelled&&!i){if(0===c.length)return void processPendingBatch(!0);i=c.shift(),getDiffs().then(getBatchDocs).then(writeDocs).then(finishBatch).then(startNextBatch).catch(function(e){abortReplication("batch processing terminated with error",e)})}}function processPendingBatch(e){return 0===u.changes.length?void(0!==c.length||i||((m&&D.live||d)&&(r.state="pending",r.emit("paused")),d&&completeReplication())):void((e||d||u.changes.length>=g)&&(c.push(u),u={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),startNextBatch()))}function abortReplication(e,t){p||(t.message||(t.message=e),o.ok=!1,o.status="aborting",c=[],u={seq:0,changes:[],docs:[]},completeReplication(t))}function completeReplication(i){if(!(p||r.cancelled&&(o.status="cancelled",l)))if(o.status=o.status||"complete",
o.end_time=new Date,o.last_seq=h,p=!0,i){i=createError(i),i.result=o;var a=(i.name||"").toLowerCase();"unauthorized"===a||"forbidden"===a?(r.emit("error",i),r.removeAllListeners()):backOff(n,r,i,function(){replicate(e,t,n,r)})}else r.emit("complete",o),r.removeAllListeners()}function onChange(e,t,o){if(r.cancelled)return completeReplication();"number"==typeof t&&(u.pending=t);var i=filterChange(n)(e);i&&(u.seq=e.seq||o,u.changes.push(e),processPendingBatch(0===c.length&&D.live))}function onChangesComplete(e){if(y=!1,r.cancelled)return completeReplication();if(e.results.length>0)D.since=e.last_seq,getChanges(),processPendingBatch(!0);else{var t=function(){m?(D.live=!0,getChanges()):d=!0,processPendingBatch(!0)};i||0!==e.results.length?t():(l=!0,s.writeCheckpoint(e.last_seq,w).then(function(){l=!1,o.last_seq=h=e.last_seq,t()}).catch(onCheckpointError))}}function onChangesError(e){return y=!1,r.cancelled?completeReplication():void abortReplication("changes rejected",e)}function getChanges(){function abortChanges(){t.cancel()}function removeListener(){r.removeListener("cancel",abortChanges)}if(!y&&!d&&c.length<v){y=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",abortChanges);var t=e.changes(D).on("change",onChange);t.then(removeListener,removeListener),t.then(onChangesComplete).catch(onChangesError),n.retry&&(r._changes=t,r._abortChanges=abortChanges)}}function startChanges(){initCheckpointer().then(function(){return r.cancelled?void completeReplication():s.getCheckpoint().then(function(e){h=e,D={since:h,limit:g,batch_size:g,style:"all_docs",doc_ids:b,selector:_,return_docs:!0},S!==!1&&(D.seq_interval=S||g),n.filter&&("string"!=typeof n.filter?D.include_docs=!0:D.filter=n.filter),"heartbeat"in n&&(D.heartbeat=n.heartbeat),"timeout"in n&&(D.timeout=n.timeout),n.query_params&&(D.query_params=n.query_params),n.view&&(D.view=n.view),getChanges()})}).catch(function(e){abortReplication("getCheckpoint rejected with ",e)})}function onCheckpointError(e){l=!1,abortReplication("writeCheckpoint completed with error",e)}var i,a,s,c=[],u={seq:0,changes:[],docs:[]},l=!1,d=!1,p=!1,h=0,m=n.continuous||n.live||!1,g=n.batch_size||100,v=n.batches_limit||10,y=!1,b=n.doc_ids,_=n.selector,C=[],w=q(),S=n.seq_interval;o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var D={};return r.ready(e,t),r.cancelled?void completeReplication():(r._addedListeners||(r.once("cancel",completeReplication),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(e){n.complete(null,e)})),r._addedListeners=!0),void("undefined"==typeof n.since?startChanges():initCheckpointer().then(function(){return l=!0,s.writeCheckpoint(n.since,w)}).then(function(){return l=!1,r.cancelled?void completeReplication():(h=n.since,void startChanges())}).catch(onCheckpointError)))}function Replication(){a.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new f(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function toPouch(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function replicateWrapper(e,t,n,r){if("function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw createError(I,"`doc_ids` filter parameter is not a list.");n.complete=r,n=clone(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var o=new Replication(n),i=toPouch(e,n),a=toPouch(t,n);return replicate(i,a,n,o),o}function sync$1(e,t,n,r){return"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n=clone(n),n.PouchConstructor=n.PouchConstructor||this,e=toPouch(e,n),t=toPouch(t,n),new Sync(e,t,n,r)}function Sync(e,t,n,r){function pullChange(e){o.emit("change",{direction:"pull",change:e})}function pushChange(e){o.emit("change",{direction:"push",change:e})}function pushDenied(e){o.emit("denied",{direction:"push",doc:e})}function pullDenied(e){o.emit("denied",{direction:"pull",doc:e})}function pushPaused(){o.pushPaused=!0,o.pullPaused&&o.emit("paused")}function pullPaused(){o.pullPaused=!0,o.pushPaused&&o.emit("paused")}function pushActive(){o.pushPaused=!1,o.pullPaused&&o.emit("active",{direction:"push"})}function pullActive(){o.pullPaused=!1,o.pushPaused&&o.emit("active",{direction:"pull"})}function removeAll(e){return function(t,n){var r="change"===t&&(n===pullChange||n===pushChange),i="denied"===t&&(n===pullDenied||n===pushDenied),a="paused"===t&&(n===pullPaused||n===pushPaused),c="active"===t&&(n===pullActive||n===pushActive);(r||i||a||c)&&(t in s||(s[t]={}),s[t][e]=!0,2===Object.keys(s[t]).length&&o.removeAllListeners(t))}}function addOneListener(e,t,n){e.listeners(t).indexOf(n)==-1&&e.on(t,n)}var o=this;this.canceled=!1;var i=n.push?_({},n,n.push):n,a=n.pull?_({},n,n.pull):n;this.push=replicateWrapper(e,t,i),this.pull=replicateWrapper(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var s={};n.live&&(this.push.on("complete",o.pull.cancel.bind(o.pull)),this.pull.on("complete",o.push.cancel.bind(o.push))),this.on("newListener",function(e){"change"===e?(addOneListener(o.pull,"change",pullChange),addOneListener(o.push,"change",pushChange)):"denied"===e?(addOneListener(o.pull,"denied",pullDenied),addOneListener(o.push,"denied",pushDenied)):"active"===e?(addOneListener(o.pull,"active",pullActive),addOneListener(o.push,"active",pushActive)):"paused"===e&&(addOneListener(o.pull,"paused",pullPaused),addOneListener(o.push,"paused",pushPaused))}),this.on("removeListener",function(e){"change"===e?(o.pull.removeListener("change",pullChange),o.push.removeListener("change",pushChange)):"denied"===e?(o.pull.removeListener("denied",pullDenied),o.push.removeListener("denied",pushDenied)):"active"===e?(o.pull.removeListener("active",pullActive),o.push.removeListener("active",pushActive)):"paused"===e&&(o.pull.removeListener("paused",pullPaused),o.push.removeListener("paused",pushPaused))}),this.pull.on("removeListener",removeAll("pull")),this.push.on("removeListener",removeAll("push"));var c=f.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return o.emit("complete",t),r&&r(null,t),o.removeAllListeners(),t},function(e){if(o.cancel(),r?r(e):o.emit("error",e),o.removeAllListeners(),r)throw e});this.then=function(e,t){return c.then(e,t)},this.catch=function(e){return c.catch(e)}}function replication(e){e.replicate=replicateWrapper,e.sync=sync$1,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return"undefined"==typeof this.replicateMethods&&(this.replicateMethods={from:function(t,n,r){return e.constructor.replicate(t,e,n,r)},to:function(t,n,r){return e.constructor.replicate(e,t,n,r)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}}var r=_interopDefault(n(78)),o=_interopDefault(n(83)),i=_interopDefault(n(85)),a=n(86),s=_interopDefault(n(87)),c=_interopDefault(n(84)),u=_interopDefault(n(88)),l=_interopDefault(n(92)),d=_interopDefault(n(93)),f="function"==typeof Promise?Promise:o,p=Function.prototype.toString,h=p.call(Object);Map$1.prototype.get=function(e){var t=mangle(e);return this._store[t]},Map$1.prototype.set=function(e,t){var n=mangle(e);return this._store[n]=t,!0},Map$1.prototype.has=function(e){var t=mangle(e);return t in this._store},Map$1.prototype.delete=function(e){var t=mangle(e),n=t in this._store;return delete this._store[t],n},Map$1.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n],i=this._store[o];o=unmangle(o),e(i,o)}},Object.defineProperty(Map$1.prototype,"size",{get:function(){return Object.keys(this._store).length}}),Set$1.prototype.add=function(e){return this._store.set(e,!0)},Set$1.prototype.has=function(e){return this._store.has(e)},Set$1.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(Set$1.prototype,"size",{get:function(){return this._store.size}});var m,g;supportsMapAndSet()?(m=Set,g=Map):(m=Set$1,g=Map$1);var v,y=6;if(isChromeApp())v=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),v=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){v=!1}s(Changes,a.EventEmitter),Changes.prototype.addListener=function(e,t,n,r){function eventFunction(){function onError(){i=!1}if(o._listeners[t]){if(i)return void(i="waiting");i=!0;var e=pick(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===i&&c(eventFunction),i=!1}).on("error",onError)}}if(!this._listeners[t]){var o=this,i=!1;this._listeners[t]=eventFunction,this.on(e,eventFunction)}},Changes.prototype.removeListener=function(e,t){t in this._listeners&&(a.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},Changes.prototype.notifyLocalWindows=function(e){isChromeApp()?chrome.storage.local.set({dbName:e}):hasLocalStorage()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},Changes.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var b;b="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};var _=b;s(PouchError,Error),PouchError.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var C=(new PouchError(401,"unauthorized","Name or password is incorrect."),new PouchError(400,"bad_request","Missing JSON list of 'docs'")),w=new PouchError(404,"not_found","missing"),S=new PouchError(409,"conflict","Document update conflict"),D=new PouchError(400,"bad_request","_id field must contain a string"),k=new PouchError(412,"missing_id","_id is required for puts"),E=new PouchError(400,"bad_request","Only reserved document ids may start with underscore."),A=(new PouchError(412,"precondition_failed","Database not open"),new PouchError(500,"unknown_error","Database encountered an unknown error")),x=new PouchError(500,"badarg","Some query argument is invalid"),N=(new PouchError(400,"invalid_request","Request was invalid"),new PouchError(400,"query_parse_error","Some query parameter is invalid")),O=new PouchError(500,"doc_validation","Bad special document member"),I=new PouchError(400,"bad_request","Something wrong with the request"),P=new PouchError(400,"bad_request","Document must be a JSON object"),R=(new PouchError(404,"not_found","Database not found"),new PouchError(500,"indexed_db_went_bad","unknown")),T=new PouchError(500,"web_sql_went_bad","unknown"),j=(new PouchError(500,"levelDB_went_went_bad","unknown"),new PouchError(403,"forbidden","Forbidden by design doc validate_doc_update function"),new PouchError(400,"bad_request","Invalid rev format")),F=(new PouchError(412,"file_exists","The database could not be created, the file already exists."),new PouchError(412,"missing_stub","A pre-existing attachment stub wasn't found")),M=(new PouchError(413,"invalid_url","Provided URL is invalid"),["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]),L="queryKey",V=/(?:^|&)([^&=]*)=?([^&]*)/g,B=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,q=r.v4;s(Changes$2,a.EventEmitter),Changes$2.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Changes$2.prototype.validateChanges=function(e){var t=e.complete,n=this;PouchDB$5._changesFilterPlugin?PouchDB$5._changesFilterPlugin.validate(e,function(r){return r?t(r):void n.doChanges(e)}):n.doChanges(e)},Changes$2.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=processChange,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(r){return t.isCancelled?void n(null,{status:"cancelled"}):(e.since=r.update_seq,void t.doChanges(e))},n);if(PouchDB$5._changesFilterPlugin){if(PouchDB$5._changesFilterPlugin.normalize(e),PouchDB$5._changesFilterPlugin.shouldFilter(this,e))return PouchDB$5._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&guardedConsole("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var o=t.cancel;t.cancel=i(function(e){r.cancel(),o.apply(this,e)})}},s(AbstractPouchDB,a.EventEmitter),AbstractPouchDB.prototype.post=adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e)?n(createError(P)):void this.bulkDocs({docs:[e]},t,yankError(n,e._id))}),AbstractPouchDB.prototype.put=adapterFun("put",function(e,t,n){function transformForceOptionToNewEditsOption(){var n=e._rev.split("-"),r=n[1],o=parseInt(n[0],10),i=o+1,a=rev();e._revisions={start:i,ids:[a,r]},e._rev=i+"-"+a,t.new_edits=!1}function putDoc(n){"function"==typeof r._put&&t.new_edits!==!1?r._put(e,t,n):r.bulkDocs({docs:[e]},t,yankError(n,e._id))}if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(createError(P));if(invalidIdError(e._id),isLocalId(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r=this;t.force&&e._rev?(transformForceOptionToNewEditsOption(),putDoc(function(t){var r=t?null:{ok:!0,id:e._id,rev:e._rev};n(t,r)})):putDoc(n)}),AbstractPouchDB.prototype.putAttachment=adapterFun("putAttachment",function(e,t,n,r,o){function createAttachment(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:r,revpos:++n},i.put(e)}var i=this;return"function"==typeof o&&(o=r,r=n,n=null),"undefined"==typeof o&&(o=r,r=n,n=null),o||guardedConsole("warn","Attachment",t,"on document",e,"is missing content_type"),i.get(e).then(function(e){if(e._rev!==n)throw createError(S);return createAttachment(e)},function(t){if(t.reason===w.message)return createAttachment({_id:e});throw t})}),AbstractPouchDB.prototype.removeAttachment=adapterFun("removeAttachment",function(e,t,n,r){var o=this;o.get(e,function(e,i){return e?void r(e):i._rev!==n?void r(createError(S)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,r)):r()})}),AbstractPouchDB.prototype.remove=adapterFun("remove",function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),n=n||{},n.was_delete=!0;var i={_id:o._id,_rev:o._rev||n.rev};return i._deleted=!0,isLocalId(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(o,r):void this.bulkDocs({docs:[i]},n,yankError(r,i._id))}),AbstractPouchDB.prototype.revsDiff=adapterFun("revsDiff",function(e,t,n){function addToMissing(e,t){i.has(e)||i.set(e,{missing:[]}),i.get(e).missing.push(t)}function processDoc(t,n){var r=e[t].slice(0);traverseRevTree(n,function(e,n,o,i,a){var s=n+"-"+o,c=r.indexOf(s);c!==-1&&(r.splice(c,1),"available"!==a.status&&addToMissing(t,s))}),r.forEach(function(e){addToMissing(t,e)})}"function"==typeof t&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var o=0,i=new g;r.map(function(t){this._getRevisionTree(t,function(a,s){if(a&&404===a.status&&"missing"===a.message)i.set(t,{missing:e[t]});else{if(a)return n(a);processDoc(t,s)}if(++o===r.length){var c={};return i.forEach(function(e,t){c[t]=e}),n(null,c)}})},this)}),AbstractPouchDB.prototype.bulkGet=adapterFun("bulkGet",function(e,t){bulkGet(this,e,t)}),AbstractPouchDB.prototype.compactDocument=adapterFun("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(o,i){if(o)return n(o);var a=computeHeight(i),s=[],c=[];Object.keys(a).forEach(function(e){a[e]>t&&s.push(e)}),traverseRevTree(i,function(e,t,n,r,o){var i=t+"-"+n;"available"===o.status&&s.indexOf(i)!==-1&&c.push(i)}),r._doCompaction(e,c,n)})}),AbstractPouchDB.prototype.compact=adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),1===n._compactionQueue.length&&doNextCompaction(n)}),AbstractPouchDB.prototype._compact=function(e,t){function onChange(e){o.push(n.compactDocument(e.id,0))}function onComplete(e){var r=e.last_seq;f.all(o).then(function(){return upsert(n,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<r)&&(e.last_seq=r,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}var n=this,r={return_docs:!1,last_seq:e.last_seq||0},o=[];n.changes(r).on("change",onChange).on("complete",onComplete).on("error",t)},AbstractPouchDB.prototype.get=adapterFun("get",function(e,t,n){function finishOpenRevs(){var i=[],a=r.length;return a?void r.forEach(function(r){o.get(e,{rev:r,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(e,t){if(e)i.push({missing:r});else{for(var o,s=0,c=i.length;s<c;s++)if(i[s].ok&&i[s].ok._rev===t._rev){o=!0;break}o||i.push({ok:t})}a--,a||n(null,i)})}):n(null,i)}if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(createError(D));if(isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[],o=this;if(!t.open_revs)return this._get(e,t,function(r,i){if(r)return r.docId=e,n(r);var a=i.doc,s=i.metadata,c=i.ctx;if(t.conflicts){var u=collectConflicts(s);u.length&&(a._conflicts=u)}if(isDeleted(s,a._rev)&&(a._deleted=!0),t.revs||t.revs_info){for(var l=a._rev.split("-"),d=parseInt(l[0],10),f=l[1],p=rootToLeaf(s.rev_tree),h=null,m=0;m<p.length;m++){var g=p[m],v=g.ids.map(function(e){return e.id}).indexOf(f),y=v===d-1;(y||!h&&v!==-1)&&(h=g)}var b=h.ids.map(function(e){return e.id}).indexOf(a._rev.split("-")[1])+1,_=h.ids.length-b;if(h.ids.splice(b,_),h.ids.reverse(),t.revs&&(a._revisions={start:h.pos+h.ids.length-1,ids:h.ids.map(function(e){return e.id})}),t.revs_info){var C=h.pos+h.ids.length;a._revs_info=h.ids.map(function(e){return C--,{rev:C+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&a._attachments){var w=a._attachments,S=Object.keys(w).length;if(0===S)return n(null,a);Object.keys(w).forEach(function(e){this._getAttachment(a._id,e,w[e],{rev:a._rev,binary:t.binary,ctx:c},function(t,r){var o=a._attachments[e];o.data=r,delete o.stub,delete o.length,--S||n(null,a)})},o)}else{if(a._attachments)for(var D in a._attachments)a._attachments.hasOwnProperty(D)&&(a._attachments[D].stub=!0);n(null,a)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?n(e):(r=collectLeaves(t).map(function(e){return e.rev}),void finishOpenRevs())});else{if(!Array.isArray(t.open_revs))return n(createError(A,"function_clause"));r=t.open_revs;for(var i=0;i<r.length;i++){var a=r[i];if("string"!=typeof a||!/^\d+-/.test(a))return n(createError(j))}finishOpenRevs()}}),AbstractPouchDB.prototype.getAttachment=adapterFun("getAttachment",function(e,t,n,r){var o=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(i,a){return i?r(i):a.doc._attachments&&a.doc._attachments[t]?(n.ctx=a.ctx,n.binary=!0,o._getAttachment(e,t,a.doc._attachments[t],n,r),void 0):r(createError(w))})}),AbstractPouchDB.prototype.allDocs=adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip="undefined"!=typeof e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(createError(N,"Query parameter `"+n+"` is not compatible with multi-get"));if(!isRemote(this)&&(allDocsKeysParse(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)}),AbstractPouchDB.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new Changes$2(this,e,t)},AbstractPouchDB.prototype.close=adapterFun("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),AbstractPouchDB.prototype.info=adapterFun("info",function(e){var t=this;this._info(function(n,r){return n?e(n):(r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||isRemote(t)),r.adapter=t.adapter,void e(null,r))})}),AbstractPouchDB.prototype.id=adapterFun("id",function(e){return this._id(e)}),AbstractPouchDB.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},AbstractPouchDB.prototype.bulkDocs=adapterFun("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(createError(C));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(createError(P));var o;if(e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(t){o=o||attachmentNameError(t),e._attachments[t].content_type||guardedConsole("warn","Attachment",t,"on document",e._id,"is missing content_type")})}),o)return n(createError(I,o));"new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0);var i=this;t.new_edits||isRemote(i)||e.docs.sort(compareByIdThenRev),cleanDocs(e.docs);var a=e.docs.map(function(e){return e._id});return this._bulkDocs(e,t,function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter(function(e){return e.error})),!isRemote(i))for(var o=0,s=r.length;o<s;o++)r[o].id=r[o].id||a[o];n(null,r)})}),AbstractPouchDB.prototype.registerDependentDatabase=adapterFun("registerDependentDatabase",function(e,t){function diffFun(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,this.__opts);upsert(this,"_local/_pouch_dependentDbs",diffFun).then(function(){t(null,{db:n})}).catch(t)}),AbstractPouchDB.prototype.destroy=adapterFun("destroy",function(e,t){function destroyDb(){n._destroy(e,function(e,r){return e?t(e):(n._destroyed=!0,n.emit("destroyed"),void t(null,r||{ok:!0}))})}"function"==typeof e&&(t=e,e={});var n=this,r=!("use_prefix"in n)||n.use_prefix;return isRemote(n)?destroyDb():void n.get("_local/_pouch_dependentDbs",function(e,o){if(e)return 404!==e.status?t(e):destroyDb();var i=o.dependentDbs,a=n.constructor,s=Object.keys(i).map(function(e){var t=r?e.replace(new RegExp("^"+a.prefix),""):e;return new a(t,n.__opts).destroy()});f.all(s).then(destroyDb,t)})}),TaskQueue$1.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},TaskQueue$1.prototype.fail=function(e){this.failed=e,this.execute()},TaskQueue$1.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},TaskQueue$1.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},s(PouchDB$5,AbstractPouchDB),PouchDB$5.adapters={},PouchDB$5.preferredAdapters=[],PouchDB$5.prefix="_pouch_";var $=new a.EventEmitter;setUpEventEmitter(PouchDB$5),PouchDB$5.adapter=function(e,t,n){t.valid()&&(PouchDB$5.adapters[e]=t,n&&PouchDB$5.preferredAdapters.push(e))},PouchDB$5.plugin=function(e){if("function"==typeof e)e(PouchDB$5);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){PouchDB$5.prototype[t]=e[t]})}return this.__defaults&&(PouchDB$5.__defaults=_({},this.__defaults)),PouchDB$5},PouchDB$5.defaults=function(e){function PouchAlt(e,t){return this instanceof PouchAlt?(t=t||{},e&&"object"==typeof e&&(t=e,e=t.name,delete t.name),t=_({},PouchAlt.__defaults,t),void PouchDB$5.call(this,e,t)):new PouchAlt(e,t)}return s(PouchAlt,PouchDB$5),PouchAlt.preferredAdapters=PouchDB$5.preferredAdapters.slice(),Object.keys(PouchDB$5).forEach(function(e){e in PouchAlt||(PouchAlt[e]=PouchDB$5[e])}),PouchAlt.__defaults=_({},this.__defaults,e),PouchAlt};var U="6.4.1",W=["$or","$nor","$not"],z=-324,G=3,H="",K={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some(function(e){return rowFilter(e,t,Object.keys(t))}):r.some(function(r){return matchSelector(t,e,n,r)})))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every(function(e){return rowFilter(e,t,Object.keys(t))}):r.every(function(r){return matchSelector(t,e,n,r)})))},$eq:function(e,t,n,r){return fieldIsNotUndefined(r)&&0===collate(r,t)},$gte:function(e,t,n,r){return fieldIsNotUndefined(r)&&collate(r,t)>=0},$gt:function(e,t,n,r){return fieldIsNotUndefined(r)&&collate(r,t)>0},$lte:function(e,t,n,r){return fieldIsNotUndefined(r)&&collate(r,t)<=0},$lt:function(e,t,n,r){return fieldIsNotUndefined(r)&&collate(r,t)<0},$exists:function(e,t,n,r){return t?fieldIsNotUndefined(r):!fieldIsNotUndefined(r)},$mod:function(e,t,n,r){return fieldExists(r)&&modField(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==collate(r,e)})},$in:function(e,t,n,r){return fieldExists(r)&&arrayContainsValue(r,t)},$nin:function(e,t,n,r){return fieldExists(r)&&!arrayContainsValue(r,t)},$size:function(e,t,n,r){return fieldExists(r)&&arraySize(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&arrayContainsAllValues(r,t)},$regex:function(e,t,n,r){return fieldExists(r)&&regexMatch(r,t)},$type:function(e,t,n,r){return typeMatch(r,t)}};PouchDB$5.plugin(debugPouch),PouchDB$5.plugin(applyChangesFilterPlugin),PouchDB$5.version=U;var J,Q=toObject(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Y=toObject(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),X=function(e){return atob(e)},Z=function(e){return btoa(e)},ee=t.setImmediate||t.setTimeout,te=32768,ne=5,re="document-store",oe="by-sequence",ie="attach-store",ae="attach-seq-store",se="meta-store",ce="local-store",ue="detect-blob-support",le=new Changes,de=!1,fe=[],pe=new g,he=new g;IdbPouch.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);try{return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};var me=7,ge=quote("document-store"),ve=quote("by-sequence"),ye=quote("attach-store"),be=quote("local-store"),_e=quote("metadata-store"),Ce=quote("attach-seq-store"),we=new g,Se=new Changes,De=1,ke="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+ve+" (seq, deleted)",Ee="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+ve+" (doc_id, rev)",Ae="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+ge+" (winningseq)",xe="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Ce+" (seq)",Ne="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Ce+" (digest, seq)",Oe=ve+".seq = "+ge+".winningseq",Ie=ve+".seq AS seq, "+ve+".deleted AS deleted, "+ve+".json AS data, "+ve+".rev AS rev, "+ge+".json AS metadata";WebSQLPouch.valid=valid,WebSQLPouch.use_prefix=!0;var Pe=testXhr(),Re=25,Te=50,je=5e3,Fe=1e4,Me={};HttpPouch.valid=function(){return!0},s(QueryParseError,Error),s(NotFoundError,Error),s(BuiltInError,Error);var Le=guardedConsole.bind(null,"log"),Ve=Array.isArray,Be=JSON.parse;TaskQueue$2.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},TaskQueue$2.prototype.finish=function(){return this.promise};var qe={},$e=new TaskQueue$2,Ue=50,We={_sum:function(e,t){return sum(t)},_count:function(e,t){return t.length},_stats:function(e,t){function sumsqr(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e[n];t+=o*o}return t}return{sum:sum(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:sumsqr(t)}}},ze="mrviews",Ge=createAbstractMapReduce(ze,mapper,reducer,ddocValidator),He={query:query,viewCleanup:viewCleanup},Ke=1,Je="pouchdb",Qe=5,Ye=0;Checkpointer.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},Checkpointer.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?updateCheckpoint(this.target,this.id,e,t,this.returnValue):f.resolve(!0)},Checkpointer.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return updateCheckpoint(this.src,this.id,e,t,this.returnValue).catch(function(e){if(isForbiddenError(e))return n.opts.writeSourceCheckpoint=!1,!0;throw e})}return f.resolve(!0)};var Xe={undefined:function(e,t){return 0===collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return compareReplicationLogs(t,e).last_seq}};Checkpointer.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(e){return e.last_seq||Ye}).catch(function(e){if(404!==e.status)throw e;return Ye}):e.target.get(e.id).then(function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||Ye:e.src.get(e.id).then(function(e){if(t.version!==e.version)return Ye;var n;return n=t.version?t.version.toString():"undefined",n in Xe?Xe[n](t,e):Ye},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:Ye}).then(function(){return Ye},function(n){return isForbiddenError(n)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):Ye});throw n})}).catch(function(e){if(404!==e.status)throw e;return Ye})};var Ze=0;s(Replication,a.EventEmitter),Replication.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Replication.prototype.ready=function(e,t){function onDestroy(){n.cancel()}function cleanup(){e.removeListener("destroyed",onDestroy),t.removeListener("destroyed",onDestroy)}var n=this;n._readyCalled||(n._readyCalled=!0,e.once("destroyed",onDestroy),t.once("destroyed",onDestroy),n.once("complete",cleanup))},s(Sync,a.EventEmitter),Sync.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},PouchDB$5.plugin(IDBPouch).plugin(WebSqlPouch).plugin(HttpPouch$1).plugin(He).plugin(replication),e.exports=PouchDB$5}).call(t,function(){return this}())},function(e,t,n){var r=n(79),o=n(82),i=o;i.v1=r,i.v4=o,e.exports=i},function(e,t,n){function v1(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var l=void 0!==e.clockseq?e.clockseq:s,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:u+1,p=d-c+(f-u)/1e4;if(p<0&&void 0===e.clockseq&&(l=l+1&16383),(p<0||d>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,u=f,s=l,d+=122192928e5;var h=(1e4*(268435455&d)+f)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var m=d/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=l>>>8|128,i[r++]=255&l;for(var g=e.node||a,v=0;v<6;++v)i[r+v]=g[v];return t?t:o(i)}var r=n(80),o=n(81),i=r(),a=[1|i[0],i[1],i[2],i[3],i[4],i[5]],s=16383&(i[6]<<8|i[7]),c=0,u=0;e.exports=v1},function(e,t){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i;
}}e.exports=n}).call(t,function(){return this}())},function(e,t){function bytesToUuid(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=bytesToUuid},function(e,t,n){function v4(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}var r=n(80),o=n(81);e.exports=v4},function(e,t,n){"use strict";function INTERNAL(){}function Promise(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function unwrap(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function getThen(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){function onError(t){n||(n=!0,o.reject(e,t))}function onSuccess(t){n||(n=!0,o.resolve(e,t))}function tryToUnwrap(){t(onSuccess,onError)}var n=!1,r=tryCatch(tryToUnwrap);"error"===r.status&&onError(r.value)}function tryCatch(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function resolve(e){return e instanceof this?e:o.resolve(new this(INTERNAL),e)}function reject(e){var t=new this(INTERNAL);return o.reject(t,e)}function all(e){function allResolver(e,s){function resolveFromAll(e){i[s]=e,++a!==n||r||(r=!0,o.resolve(c,i))}t.resolve(e).then(resolveFromAll,function(e){r||(r=!0,o.reject(c,e))})}var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),a=0,s=-1,c=new this(INTERNAL);++s<n;)allResolver(e[s],s);return c}function race(e){function resolver(e){t.resolve(e).then(function(e){r||(r=!0,o.resolve(a,e))},function(e){r||(r=!0,o.reject(a,e))})}var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,a=new this(INTERNAL);++i<n;)resolver(e[i]);return a}var r=n(84),o={},i=["REJECTED"],a=["FULFILLED"],s=["PENDING"];e.exports=Promise,Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(INTERNAL);if(this.state!==s){var r=this.state===a?e:t;unwrap(n,r,this.outcome)}else this.queue.push(new QueueItem(n,e,t));return n},QueueItem.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){o.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=tryCatch(getThen,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)safelyResolveThenable(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},Promise.resolve=resolve,Promise.reject=reject,Promise.all=all,Promise.race=race},function(e,t){(function(t){"use strict";function nextTick(){c=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}c=!1}function immediate(e){1!==u.push(e)||c||n()}var n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,i=new r(nextTick),a=t.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)};else{var s=new t.MessageChannel;s.port1.onmessage=nextTick,n=function(){s.port2.postMessage(0)}}var c,u=[];e.exports=immediate}).call(t,function(){return this}())},function(e,t){"use strict";function argsArray(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}e.exports=argsArray},function(e,t){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}e.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,r,o,i,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(isObject(n))for(o=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,i=0;i<r;i++)a[i].apply(this,o);return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function g(){this.removeListener(e,g),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return g.listener=t,this.on(e,g),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,o,i;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(i=o;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){r=i;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function load(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof r&&"env"in r&&(e={ENV:"production"}.DEBUG),e}function localstorage(){try{return window.localStorage}catch(e){}}t=e.exports=n(90),t.log=log,t.formatArgs=formatArgs,t.save=save,t.load=load,t.useColors=useColors,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(load())}).call(t,n(89))},,function(e,t,n){function selectColor(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function createDebug(e){function debug(){if(debug.enabled){var e=debug,r=+new Date,o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n}),t.formatArgs.call(e,i);var c=debug.log||t.log||console.log.bind(console);c.apply(e,i)}}var n;return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=selectColor(e),debug.destroy=destroy,"function"==typeof t.init&&t.init(debug),t.instances.push(debug),debug}function destroy(){var e=t.instances.indexOf(this);return e!==-1&&(t.instances.splice(e,1),!0)}function enable(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&(e=r[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}}function disable(){t.enable("")}function enabled(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=createDebug.debug=createDebug.default=createDebug,t.coerce=coerce,t.disable=disable,t.enable=enable,t.enabled=enabled,t.humanize=n(91),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function parse(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]),c=(t[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function fmtShort(e){return e>=i?Math.round(e/i)+"d":e>=o?Math.round(e/o)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}function fmtLong(e){return plural(e,i,"day")||plural(e,o,"hour")||plural(e,r,"minute")||plural(e,n,"second")||e+" ms"}function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var n=1e3,r=60*n,o=60*r,i=24*o,a=365.25*i;e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return parse(e);if("number"===n&&isNaN(e)===!1)return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){!function(t){e.exports=t()}(function(e){"use strict";function md5cycle(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];n+=(r&o|~r&i)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function md5blk(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function md5blk_array(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function md51(e){var t,n,r,o,i,a,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)md5cycle(c,md5blk(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(c,r),t=0;t<16;t+=1)r[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,md5cycle(c,r),c}function md51_array(e){var t,n,r,o,i,a,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)md5cycle(c,md5blk_array(e.subarray(t-64,t)));for(e=t-64<s?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(c,r),t=0;t<16;t+=1)r[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,md5cycle(c,r),c}function rhex(e){var t,r="";for(t=0;t<4;t+=1)r+=n[e>>8*t+4&15]+n[e>>8*t&15];return r}function hex(e){var t;for(t=0;t<e.length;t+=1)e[t]=rhex(e[t]);return e.join("")}function toUtf8(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function utf8Str2ArrayBuffer(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}function arrayBuffer2Utf8Str(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function concatenateArrayBuffers(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function hexToBinaryString(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function SparkMD5(){this.reset()}var t=function(e,t){return e+t&4294967295},n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==hex(md51("hello"))&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function clamp(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var r,o,i,a,s=this.byteLength,c=clamp(t,s),u=s;return n!==e&&(u=clamp(n,s)),c>u?new ArrayBuffer(0):(r=u-c,o=new ArrayBuffer(r),i=new Uint8Array(o),a=new Uint8Array(this,c,r),i.set(a),o)}}(),SparkMD5.prototype.append=function(e){return this.appendBinary(toUtf8(e)),this},SparkMD5.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)md5cycle(this._hash,md5blk(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},SparkMD5.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=hex(this._hash),e&&(n=hexToBinaryString(n)),this.reset(),n},SparkMD5.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},SparkMD5.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},SparkMD5.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},SparkMD5.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(this._hash,e),i=0;i<16;i+=1)e[i]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,md5cycle(this._hash,e)},SparkMD5.hash=function(e,t){return SparkMD5.hashBinary(toUtf8(e),t)},SparkMD5.hashBinary=function(e,t){var n=md51(e),r=hex(n);return t?hexToBinaryString(r):r},SparkMD5.ArrayBuffer=function(){this.reset()},SparkMD5.ArrayBuffer.prototype.append=function(e){var t,n=concatenateArrayBuffers(this._buff.buffer,e,!0),r=n.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)md5cycle(this._hash,md5blk_array(n.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},SparkMD5.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=hex(this._hash),e&&(n=hexToBinaryString(n)),this.reset(),n},SparkMD5.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},SparkMD5.ArrayBuffer.prototype.getState=function(){var e=SparkMD5.prototype.getState.call(this);return e.buff=arrayBuffer2Utf8Str(e.buff),e},SparkMD5.ArrayBuffer.prototype.setState=function(e){return e.buff=utf8Str2ArrayBuffer(e.buff,!0),SparkMD5.prototype.setState.call(this,e)},SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy,SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish,SparkMD5.ArrayBuffer.hash=function(e,t){var n=md51_array(new Uint8Array(e)),r=hex(n);return t?hexToBinaryString(r):r},SparkMD5})},function(e,t){"use strict";function pop(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var a=t.pop();o[a]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,o,i,a,s,c,u,l,d,f,p="";n=t.pop();)if(r=n.obj,o=n.prefix||"",i=n.val||"",p+=o,i)p+=i;else if("object"!=typeof r)p+="undefined"==typeof r?null:JSON.stringify(r);else if(null===r)p+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),a=r.length-1;a>=0;a--)s=0===a?"":",",t.push({obj:r[a],prefix:s});t.push({val:"["})}else{c=[];for(u in r)r.hasOwnProperty(u)&&c.push(u);for(t.push({val:"}"}),a=c.length-1;a>=0;a--)l=c[a],d=r[l],f=a>0?",":"",f+=JSON.stringify(l)+":",t.push({obj:d,prefix:f});t.push({val:"{"})}return p},t.parse=function(e){for(var t,n,r,o,i,a,s,c,u,l=[],d=[],f=0;;)if(t=e[f++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":f+=3,pop(null,l,d);break;case"t":f+=3,pop(!0,l,d);break;case"f":f+=4,pop(!1,l,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",f--;;){if(r=e[f++],!/[\d\.\-e\+]/.test(r)){f--;break}n+=r}pop(parseFloat(n),l,d);break;case'"':for(o="",i=void 0,a=0;;){if(s=e[f++],'"'===s&&("\\"!==i||a%2!==1))break;o+=s,i=s,"\\"===i?a++:a=0}pop(JSON.parse('"'+o+'"'),l,d);break;case"[":c={element:[],index:l.length},l.push(c.element),d.push(c);break;case"{":u={element:{},index:l.length},l.push(u.element),d.push(u);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===l.length)return l.pop();pop(l.pop(),l,d)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(95),s=function(){function DragulaService(){this.cancel=new i.EventEmitter,this.cloned=new i.EventEmitter,this.drag=new i.EventEmitter,this.dragend=new i.EventEmitter,this.drop=new i.EventEmitter,this.out=new i.EventEmitter,this.over=new i.EventEmitter,this.remove=new i.EventEmitter,this.shadow=new i.EventEmitter,this.dropModel=new i.EventEmitter,this.removeModel=new i.EventEmitter,this.events=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow","dropModel","removeModel"],this.bags=[]}return DragulaService.prototype.add=function(e,t){var n=this.find(e);if(n)throw new Error('Bag named: "'+e+'" already exists.');return n={name:e,drake:t},this.bags.push(n),t.models&&this.handleModels(e,t),n.initEvents||this.setupEvents(n),n},DragulaService.prototype.find=function(e){for(var t=0;t<this.bags.length;t++)if(this.bags[t].name===e)return this.bags[t]},DragulaService.prototype.destroy=function(e){var t=this.find(e),n=this.bags.indexOf(t);this.bags.splice(n,1),t.drake.destroy()},DragulaService.prototype.setOptions=function(e,t){var n=this.add(e,a(t));this.handleModels(e,n.drake)},DragulaService.prototype.handleModels=function(e,t){var n,r,o,i,a=this;t.on("remove",function(n,o){t.models&&(i=t.models[t.containers.indexOf(o)],i.splice(r,1),a.removeModel.emit([e,n,o]))}),t.on("drag",function(e,t){n=e,r=a.domIndexOf(e,t)}),t.on("drop",function(s,c,u){if(t.models&&c){if(o=a.domIndexOf(s,c),i=t.models[t.containers.indexOf(u)],c===u)i.splice(o,0,i.splice(r,1)[0]);else{var l=n===s,d=t.models[t.containers.indexOf(c)],f=l?i[r]:JSON.parse(JSON.stringify(i[r]));l&&i.splice(r,1),d.splice(o,0,f),c.removeChild(s)}a.dropModel.emit([e,s,c,u])}})},DragulaService.prototype.setupEvents=function(e){e.initEvents=!0;var t=this,n=function(n){function replicate(){var r=Array.prototype.slice.call(arguments);t[n].emit([e.name].concat(r))}e.drake.on(n,replicate)};this.events.forEach(n)},DragulaService.prototype.domIndexOf=function(e,t){return Array.prototype.indexOf.call(t.children,e)},DragulaService=r([i.Injectable(),o("design:paramtypes",[])],DragulaService)}();t.DragulaService=s},function(e,t,n){(function(t){"use strict";function dragula(e,t){function isContainer(e){return w.containers.indexOf(e)!==-1||C.isContainer(e)}function events(e){var t=e?"remove":"add";touchy(s,t,"mousedown",grab),touchy(s,t,"mouseup",release)}function eventualMovements(e){var t=e?"remove":"add";touchy(s,t,"mousemove",startBecauseMouseMoved)}function movements(e){var t=e?"remove":"add";o[t](s,"selectstart",preventGrabbed),o[t](s,"click",preventGrabbed)}function destroy(){events(!0),release({})}function preventGrabbed(e){b&&e.preventDefault()}function grab(e){p=e.clientX,h=e.clientY;var t=1!==whichMouseButton(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,r=canStart(n);r&&(b=r,eventualMovements(),"mousedown"===e.type&&(isInput(n)?n.focus():e.preventDefault()))}}function startBecauseMouseMoved(e){if(b){if(0===whichMouseButton(e))return void release({});if(void 0===e.clientX||e.clientX!==p||void 0===e.clientY||e.clientY!==h){if(C.ignoreInputTextSelection){var t=getCoord("clientX",e),n=getCoord("clientY",e),r=a.elementFromPoint(t,n);if(isInput(r))return}var o=b;eventualMovements(!0),movements(),end(),start(o);var s=getOffset(l);d=getCoord("pageX",e)-s.left,f=getCoord("pageY",e)-s.top,i.add(v||l,"gu-transit"),renderMirrorImage(),drag(e)}}}function canStart(e){if(!(w.dragging&&c||isContainer(e))){for(var t=e;getParent(e)&&isContainer(getParent(e))===!1;){if(C.invalid(e,t))return;if(e=getParent(e),!e)return}var n=getParent(e);if(n&&!C.invalid(e,t)){var r=C.moves(e,n,t,nextEl(e));if(r)return{item:e,source:n}}}}function canMove(e){return!!canStart(e)}function manualStart(e){var t=canStart(e);t&&start(t)}function start(e){isCopy(e.item,e.source)&&(v=e.item.cloneNode(!0),w.emit("cloned",v,e.item,"copy")),u=e.source,l=e.item,m=g=nextEl(e.item),w.dragging=!0,w.emit("drag",l,u)}function invalidTarget(){return!1}function end(){if(w.dragging){var e=v||l;drop(e,getParent(e))}}function ungrab(){b=!1,eventualMovements(!0),movements(!0)}function release(e){if(ungrab(),w.dragging){var t=v||l,n=getCoord("clientX",e),r=getCoord("clientY",e),o=getElementBehindPoint(c,n,r),i=findDropTarget(o,n,r);i&&(v&&C.copySortSource||!v||i!==u)?drop(t,i):C.removeOnSpill?remove():cancel()}}function drop(e,t){var n=getParent(e);v&&C.copySortSource&&t===u&&n.removeChild(l),isInitialPlacement(t)?w.emit("cancel",e,u,u):w.emit("drop",e,t,u,g),cleanup()}function remove(){if(w.dragging){var e=v||l,t=getParent(e);t&&t.removeChild(e),w.emit(v?"cancel":"remove",e,t,u),cleanup()}}function cancel(e){if(w.dragging){var t=arguments.length>0?e:C.revertOnSpill,n=v||l,r=getParent(n),o=isInitialPlacement(r);o===!1&&t&&(v?r&&r.removeChild(v):u.insertBefore(n,m)),o||t?w.emit("cancel",n,u,u):w.emit("drop",n,r,u,g),cleanup()}}function cleanup(){var e=v||l;ungrab(),removeMirrorImage(),e&&i.rm(e,"gu-transit"),y&&clearTimeout(y),w.dragging=!1,_&&w.emit("out",e,_,u),w.emit("dragend",e),u=l=v=m=g=y=_=null}function isInitialPlacement(e,t){var n;return n=void 0!==t?t:c?g:nextEl(v||l),e===u&&n===m}function findDropTarget(e,t,n){function accepted(){var o=isContainer(r);if(o===!1)return!1;var i=getImmediateChild(r,e),a=getReference(r,i,t,n),s=isInitialPlacement(r,a);return!!s||C.accepts(l,r,u,a)}for(var r=e;r&&!accepted();)r=getParent(r);return r}function drag(e){function moved(e){w.emit(e,i,_,u)}function over(){p&&moved("over")}function out(){_&&moved("out")}if(c){e.preventDefault();var t=getCoord("clientX",e),n=getCoord("clientY",e),r=t-d,o=n-f;c.style.left=r+"px",c.style.top=o+"px";var i=v||l,a=getElementBehindPoint(c,t,n),s=findDropTarget(a,t,n),p=null!==s&&s!==_;(p||null===s)&&(out(),_=s,over());var h=getParent(i);if(s===u&&v&&!C.copySortSource)return void(h&&h.removeChild(i));var y,b=getImmediateChild(s,a);if(null!==b)y=getReference(s,b,t,n);else{if(C.revertOnSpill!==!0||v)return void(v&&h&&h.removeChild(i));
y=m,s=u}(null===y&&p||y!==i&&y!==nextEl(i))&&(g=y,s.insertBefore(i,y),w.emit("shadow",i,s,u))}}function spillOver(e){i.rm(e,"gu-hide")}function spillOut(e){w.dragging&&i.add(e,"gu-hide")}function renderMirrorImage(){if(!c){var e=l.getBoundingClientRect();c=l.cloneNode(!0),c.style.width=getRectWidth(e)+"px",c.style.height=getRectHeight(e)+"px",i.rm(c,"gu-transit"),i.add(c,"gu-mirror"),C.mirrorContainer.appendChild(c),touchy(s,"add","mousemove",drag),i.add(C.mirrorContainer,"gu-unselectable"),w.emit("cloned",c,l,"mirror")}}function removeMirrorImage(){c&&(i.rm(C.mirrorContainer,"gu-unselectable"),touchy(s,"remove","mousemove",drag),getParent(c).removeChild(c),c=null)}function getImmediateChild(e,t){for(var n=t;n!==e&&getParent(n)!==e;)n=getParent(n);return n===s?null:n}function getReference(e,t,n,r){function outside(){var t,i,a,s=e.children.length;for(t=0;t<s;t++){if(i=e.children[t],a=i.getBoundingClientRect(),o&&a.left+a.width/2>n)return i;if(!o&&a.top+a.height/2>r)return i}return null}function inside(){var e=t.getBoundingClientRect();return resolve(o?n>e.left+getRectWidth(e)/2:r>e.top+getRectHeight(e)/2)}function resolve(e){return e?nextEl(t):t}var o="horizontal"===C.direction,i=t!==e?inside():outside();return i}function isCopy(e,t){return"boolean"==typeof C.copy?C.copy:C.copy(e,t)}var n=arguments.length;1===n&&Array.isArray(e)===!1&&(t=e,e=[]);var c,u,l,d,f,p,h,m,g,v,y,b,_=null,C=t||{};void 0===C.moves&&(C.moves=always),void 0===C.accepts&&(C.accepts=always),void 0===C.invalid&&(C.invalid=invalidTarget),void 0===C.containers&&(C.containers=e||[]),void 0===C.isContainer&&(C.isContainer=never),void 0===C.copy&&(C.copy=!1),void 0===C.copySortSource&&(C.copySortSource=!1),void 0===C.revertOnSpill&&(C.revertOnSpill=!1),void 0===C.removeOnSpill&&(C.removeOnSpill=!1),void 0===C.direction&&(C.direction="vertical"),void 0===C.ignoreInputTextSelection&&(C.ignoreInputTextSelection=!0),void 0===C.mirrorContainer&&(C.mirrorContainer=a.body);var w=r({containers:C.containers,start:manualStart,end:end,cancel:cancel,remove:remove,destroy:destroy,canMove:canMove,dragging:!1});return C.removeOnSpill===!0&&w.on("over",spillOver).on("out",spillOut),events(),w}function touchy(e,n,r,i){var a={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},s={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?o[n](e,s[r],i):t.navigator.msPointerEnabled?o[n](e,c[r],i):(o[n](e,a[r],i),o[n](e,r,i))}function whichMouseButton(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+getScroll("scrollLeft","pageXOffset"),top:t.top+getScroll("scrollTop","pageYOffset")}}function getScroll(e,n){return"undefined"!=typeof t[n]?t[n]:s.clientHeight?s[e]:a.body[e]}function getElementBehindPoint(e,t,n){var r,o=e||{},i=o.className;return o.className+=" gu-hide",r=a.elementFromPoint(t,n),o.className=i,r}function never(){return!1}function always(){return!0}function getRectWidth(e){return e.width||e.right-e.left}function getRectHeight(e){return e.height||e.bottom-e.top}function getParent(e){return e.parentNode===a?null:e.parentNode}function isInput(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||isEditable(e)}function isEditable(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||isEditable(getParent(e))))}function nextEl(e){function manually(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||manually()}function getEventHost(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function getCoord(e,t){var n=getEventHost(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var r=n(96),o=n(102),i=n(105),a=document,s=a.documentElement;e.exports=dragula}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(97),o=n(98);e.exports=function(e,t){var n=t||{},i={};return void 0===e&&(e={}),e.on=function(t,n){return i[t]?i[t].push(n):i[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete i[t];else if(0===r)i={};else{var o=i[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(i[t]||[]).slice(0);return function(){var i=r(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!a.length)throw 1===i.length?i[0]:i;return a.forEach(function(r){n.async?o(r,i,s):r.apply(s,i),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(99);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(100).setImmediate)},,,function(e,t,n){(function(t){"use strict";function addEventEasy(e,t,n,r){return e.addEventListener(t,n,r)}function addEventHard(e,t,n){return e.attachEvent("on"+t,wrap(e,t,n))}function removeEventEasy(e,t,n,r){return e.removeEventListener(t,n,r)}function removeEventHard(e,t,n){var r=unwrap(e,t,n);if(r)return e.detachEvent("on"+t,r)}function fabricateEvent(e,t,n){function makeClassicEvent(){var e;return i.createEvent?(e=i.createEvent("Event"),e.initEvent(t,!0,!0)):i.createEventObject&&(e=i.createEventObject()),e}function makeCustomEvent(){return new r(t,{detail:n})}var a=o.indexOf(t)===-1?makeCustomEvent():makeClassicEvent();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function wrapperFactory(e,n,r){return function(n){var o=n||t.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}function wrap(e,t,n){var r=unwrap(e,t,n)||wrapperFactory(e,t,n);return c.push({wrapper:r,element:e,type:t,fn:n}),r}function unwrap(e,t,n){var r=find(e,t,n);if(r){var o=c[r].wrapper;return c.splice(r,1),o}}function find(e,t,n){var r,o;for(r=0;r<c.length;r++)if(o=c[r],o.element===e&&o.type===t&&o.fn===n)return r}var r=n(103),o=n(104),i=t.document,a=addEventEasy,s=removeEventEasy,c=[];t.addEventListener||(a=addEventHard,s=removeEventHard),e.exports={add:a,remove:s,fabricate:fabricateEvent}}).call(t,function(){return this}())},function(e,t){(function(t){function useNative(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var n=t.CustomEvent;e.exports=useNative()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=[],r="",o=/^on/;for(r in t)o.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function lookupClass(e){var t=n[e];return t?t.lastIndex=0:n[e]=t=new RegExp(r+e+o,"g"),t}function addClass(e,t){var n=e.className;n.length?lookupClass(t).test(n)||(e.className+=" "+t):e.className=t}function rmClass(e,t){e.className=e.className.replace(lookupClass(t)," ").trim()}var n={},r="(?:^|\\s)",o="(?:\\s|$)";e.exports={add:addClass,rm:rmClass}},function(e,t,n){var r;(function(e,o){(function(){function addMapEntry(e,t){return e.set(t[0],t[1]),e}function addSetEntry(e,t){return e.add(t),e}function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function arrayAggregator(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function arrayEachRight(e,t){for(var n=null==e?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function arrayEvery(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function arrayFilter(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function arrayIncludes(e,t){var n=null==e?0:e.length;return!!n&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function arrayMap(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function arrayPush(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function arrayReduce(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function arrayReduceRight(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function arraySome(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function asciiToArray(e){return e.split("")}function asciiWords(e){return e.match(We)||[]}function baseFindKey(e,t,n){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=n,!1}),r}function baseFindIndex(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function baseIndexOf(e,t,n){return t===t?strictIndexOf(e,t,n):baseFindIndex(e,baseIsNaN,n)}function baseIndexOfWith(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function baseIsNaN(e){return e!==e}function baseMean(e,t){var n=null==e?0:e.length;return n?baseSum(e,t)/n:L}function baseProperty(e){return function(t){return null==t?i:t[e]}}function basePropertyOf(e){return function(t){return null==e?i:e[t]}}function baseReduce(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function baseSortBy(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function baseSum(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function baseToPairs(e,t){return arrayMap(t,function(t){return[t,e[t]]})}function baseUnary(e){return function(t){return e(t)}}function baseValues(e,t){return arrayMap(t,function(t){return e[t]})}function cacheHas(e,t){return e.has(t)}function charsStartIndex(e,t){for(var n=-1,r=e.length;++n<r&&baseIndexOf(t,e[n],0)>-1;);return n}function charsEndIndex(e,t){for(var n=e.length;n--&&baseIndexOf(t,e[n],0)>-1;);return n}function countHolders(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function escapeStringChar(e){return"\\"+nn[e]}function getValue(e,t){return null==e?i:e[t]}function hasUnicode(e){return Ht.test(e)}function hasUnicodeWord(e){return Kt.test(e)}function iteratorToArray(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function overArg(e,t){return function(n){return e(t(n))}}function replaceHolders(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==f||(e[n]=f,i[o++]=n)}return i}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function setToPairs(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function strictIndexOf(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function strictLastIndexOf(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function stringSize(e){return hasUnicode(e)?unicodeSize(e):_n(e)}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function unicodeSize(e){for(var t=zt.lastIndex=0;zt.test(e);)++t;return t}function unicodeToArray(e){return e.match(zt)||[]}function unicodeWords(e){return e.match(Gt)||[]}var i,a="4.17.4",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,h=2,m=4,g=1,v=2,y=1,b=2,_=4,C=8,w=16,S=32,D=64,k=128,E=256,A=512,x=30,N="...",O=800,I=16,P=1,R=2,T=3,j=1/0,F=9007199254740991,M=1.7976931348623157e308,L=NaN,V=4294967295,B=V-1,q=V>>>1,$=[["ary",k],["bind",y],["bindKey",b],["curry",C],["curryRight",w],["flip",A],["partial",S],["partialRight",D],["rearg",E]],U="[object Arguments]",W="[object Array]",z="[object AsyncFunction]",G="[object Boolean]",H="[object Date]",K="[object DOMException]",J="[object Error]",Q="[object Function]",Y="[object GeneratorFunction]",X="[object Map]",Z="[object Number]",ee="[object Null]",te="[object Object]",ne="[object Promise]",re="[object Proxy]",oe="[object RegExp]",ie="[object Set]",ae="[object String]",se="[object Symbol]",ce="[object Undefined]",ue="[object WeakMap]",le="[object WeakSet]",de="[object ArrayBuffer]",fe="[object DataView]",pe="[object Float32Array]",he="[object Float64Array]",me="[object Int8Array]",ge="[object Int16Array]",ve="[object Int32Array]",ye="[object Uint8Array]",be="[object Uint8ClampedArray]",_e="[object Uint16Array]",Ce="[object Uint32Array]",we=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,De=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ke=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Ae=RegExp(ke.source),xe=RegExp(Ee.source),Ne=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Ie=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Te=/^\./,je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fe=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(Fe.source),Le=/^\s+|\s+$/g,Ve=/^\s+/,Be=/\s+$/,qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,We=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,He=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Je=/^0b[01]+$/i,Qe=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,et=/($^)/,tt=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",rt="\\u0300-\\u036f",ot="\\ufe20-\\ufe2f",it="\\u20d0-\\u20ff",at=rt+ot+it,st="\\u2700-\\u27bf",ct="a-z\\xdf-\\xf6\\xf8-\\xff",ut="\\xac\\xb1\\xd7\\xf7",lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dt="\\u2000-\\u206f",ft=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="A-Z\\xc0-\\xd6\\xd8-\\xde",ht="\\ufe0e\\ufe0f",mt=ut+lt+dt+ft,gt="[']",vt="["+nt+"]",yt="["+mt+"]",bt="["+at+"]",_t="\\d+",Ct="["+st+"]",wt="["+ct+"]",St="[^"+nt+mt+_t+st+ct+pt+"]",Dt="\\ud83c[\\udffb-\\udfff]",kt="(?:"+bt+"|"+Dt+")",Et="[^"+nt+"]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Nt="["+pt+"]",Ot="\\u200d",It="(?:"+wt+"|"+St+")",Pt="(?:"+Nt+"|"+St+")",Rt="(?:"+gt+"(?:d|ll|m|re|s|t|ve))?",Tt="(?:"+gt+"(?:D|LL|M|RE|S|T|VE))?",jt=kt+"?",Ft="["+ht+"]?",Mt="(?:"+Ot+"(?:"+[Et,At,xt].join("|")+")"+Ft+jt+")*",Lt="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Vt="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Bt=Ft+jt+Mt,qt="(?:"+[Ct,At,xt].join("|")+")"+Bt,$t="(?:"+[Et+bt+"?",bt,At,xt,vt].join("|")+")",Ut=RegExp(gt,"g"),Wt=RegExp(bt,"g"),zt=RegExp(Dt+"(?="+Dt+")|"+$t+Bt,"g"),Gt=RegExp([Nt+"?"+wt+"+"+Rt+"(?="+[yt,Nt,"$"].join("|")+")",Pt+"+"+Tt+"(?="+[yt,Nt+It,"$"].join("|")+")",Nt+"?"+It+"+"+Rt,Nt+"+"+Tt,Vt,Lt,_t,qt].join("|"),"g"),Ht=RegExp("["+Ot+nt+at+ht+"]"),Kt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qt=-1,Yt={};Yt[pe]=Yt[he]=Yt[me]=Yt[ge]=Yt[ve]=Yt[ye]=Yt[be]=Yt[_e]=Yt[Ce]=!0,Yt[U]=Yt[W]=Yt[de]=Yt[G]=Yt[fe]=Yt[H]=Yt[J]=Yt[Q]=Yt[X]=Yt[Z]=Yt[te]=Yt[oe]=Yt[ie]=Yt[ae]=Yt[ue]=!1;var Xt={};Xt[U]=Xt[W]=Xt[de]=Xt[fe]=Xt[G]=Xt[H]=Xt[pe]=Xt[he]=Xt[me]=Xt[ge]=Xt[ve]=Xt[X]=Xt[Z]=Xt[te]=Xt[oe]=Xt[ie]=Xt[ae]=Xt[se]=Xt[ye]=Xt[be]=Xt[_e]=Xt[Ce]=!0,Xt[J]=Xt[Q]=Xt[ue]=!1;var Zt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rn=parseFloat,on=parseInt,an="object"==typeof e&&e&&e.Object===Object&&e,sn="object"==typeof self&&self&&self.Object===Object&&self,cn=an||sn||Function("return this")(),un="object"==typeof t&&t&&!t.nodeType&&t,ln=un&&"object"==typeof o&&o&&!o.nodeType&&o,dn=ln&&ln.exports===un,fn=dn&&an.process,pn=function(){try{return fn&&fn.binding&&fn.binding("util")}catch(e){}}(),hn=pn&&pn.isArrayBuffer,mn=pn&&pn.isDate,gn=pn&&pn.isMap,vn=pn&&pn.isRegExp,yn=pn&&pn.isSet,bn=pn&&pn.isTypedArray,_n=baseProperty("length"),Cn=basePropertyOf(Zt),wn=basePropertyOf(en),Sn=basePropertyOf(tn),Dn=function runInContext(e){function lodash(e){if(isObjectLike(e)&&!Pr(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(dt.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}function baseLodash(){}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=copyArray(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=copyArray(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=copyArray(this.__views__),e}function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,n=Pr(e),r=t<0,o=n?e.length:0,i=getView(0,o,this.__views__),a=i.start,s=i.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,p=qt(c,this.__takeCount__);if(!n||!r&&o==c&&p==c)return baseWrapperValue(e,this.__actions__);var h=[];e:for(;c--&&f<p;){u+=t;for(var m=-1,g=e[u];++m<d;){var v=l[m],y=v.iteratee,b=v.type,_=y(g);if(b==R)g=_;else if(!_){if(b==P)continue e;break e}}h[f++]=g}return h}function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hashClear(){this.__data__=an?an(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet(e){var t=this.__data__;if(an){var n=t[e];return n===l?i:n}return dt.call(t,e)?t[e]:i}function hashHas(e){var t=this.__data__;return an?t[e]!==i:dt.call(t,e)}function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=an&&t===i?l:t,this}function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():kt.call(t,n,1),--this.size,!0}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?i:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,r=assocIndexOf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Zt||ListCache),string:new Hash}}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var n=getMapData(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,l),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!Zt||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(r)}return n.set(e,t),this.size=n.size,this}function arrayLikeKeys(e,t){var n=Pr(e),r=!n&&Ir(e),o=!n&&!r&&Tr(e),i=!n&&!r&&!o&&Vr(e),a=n||r||o||i,s=a?baseTimes(e.length,ot):[],c=s.length;for(var u in e)!t&&!dt.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||s.push(u);return s}function arraySample(e){var t=e.length;return t?e[baseRandom(0,t-1)]:i}function arraySampleSize(e,t){return shuffleSelf(copyArray(e),baseClamp(t,0,e.length))}function arrayShuffle(e){return shuffleSelf(copyArray(e))}function assignMergeValue(e,t,n){(n===i||eq(e[t],n))&&(n!==i||t in e)||baseAssignValue(e,t,n)}function assignValue(e,t,n){var r=e[t];dt.call(e,t)&&eq(r,n)&&(n!==i||t in e)||baseAssignValue(e,t,n)}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}function baseAggregator(e,t,n,r){return On(e,function(e,o,i){t(r,e,n(e),i)}),r}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}function baseAssignValue(e,t,n){"__proto__"==t&&Nt?Nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function baseAt(e,n){for(var r=-1,o=n.length,a=t(o),s=null==e;++r<o;)a[r]=s?i:get(e,n[r]);return a}function baseClamp(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function baseClone(e,t,n,r,o,a){var s,c=t&p,u=t&h,l=t&m;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!isObject(e))return e;var d=Pr(e);if(d){if(s=initCloneArray(e),!c)return copyArray(e,s)}else{var f=$n(e),g=f==Q||f==Y;if(Tr(e))return cloneBuffer(e,c);if(f==te||f==U||g&&!o){if(s=u||g?{}:initCloneObject(e),!c)return u?copySymbolsIn(e,baseAssignIn(s,e)):copySymbols(e,baseAssign(s,e))}else{if(!Xt[f])return o?e:{};s=initCloneByTag(e,f,baseClone,c)}}a||(a=new Stack);var v=a.get(e);if(v)return v;a.set(e,s);var y=l?u?getAllKeysIn:getAllKeys:u?keysIn:keys,b=d?i:y(e);return arrayEach(b||e,function(r,o){b&&(o=r,r=e[o]),assignValue(s,o,baseClone(r,t,n,o,e,a))}),s}function baseConforms(e){var t=keys(e);return function(n){return baseConformsTo(n,e,t)}}function baseConformsTo(e,t,n){var r=n.length;if(null==e)return!r;for(e=nt(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function baseDelay(e,t,n){if("function"!=typeof e)throw new it(u);return zn(function(){e.apply(i,n)},t)}function baseDifference(e,t,n,r){var o=-1,i=arrayIncludes,a=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=arrayMap(t,baseUnary(n))),r?(i=arrayIncludesWith,a=!1):t.length>=s&&(i=cacheHas,a=!1,t=new SetCache(t));e:for(;++o<c;){var d=e[o],f=null==n?d:n(d);if(d=r||0!==d?d:0,a&&f===f){for(var p=l;p--;)if(t[p]===f)continue e;u.push(d)}else i(t,f,r)||u.push(d)}return u}function baseEvery(e,t){var n=!0;return On(e,function(e,r,o){return n=!!t(e,r,o)}),n}function baseExtremum(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(c===i?s===s&&!isSymbol(s):n(s,c)))var c=s,u=a}return u}function baseFill(e,t,n,r){var o=e.length;for(n=toInteger(n),n<0&&(n=-n>o?0:o+n),r=r===i||r>o?o:toInteger(r),r<0&&(r+=o),r=n>r?0:toLength(r);n<r;)e[n++]=t;return e}function baseFilter(e,t){var n=[];return On(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function baseFlatten(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=isFlattenable),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?baseFlatten(s,t-1,n,r,o):arrayPush(o,s):r||(o[o.length]=s)}return o}function baseForOwn(e,t){return e&&Pn(e,t,keys)}function baseForOwnRight(e,t){return e&&Rn(e,t,keys)}function baseFunctions(e,t){return arrayFilter(t,function(t){return isFunction(e[t])})}function baseGet(e,t){t=castPath(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[toKey(t[n++])];return n&&n==r?e:i}function baseGetAllKeys(e,t,n){var r=t(e);return Pr(e)?r:arrayPush(r,n(e))}function baseGetTag(e){return null==e?e===i?ce:ee:xt&&xt in nt(e)?getRawTag(e):objectToString(e)}function baseGt(e,t){return e>t}function baseHas(e,t){return null!=e&&dt.call(e,t)}function baseHasIn(e,t){return null!=e&&t in nt(e)}function baseInRange(e,t,n){return e>=qt(t,n)&&e<Bt(t,n)}function baseIntersection(e,n,r){for(var o=r?arrayIncludesWith:arrayIncludes,a=e[0].length,s=e.length,c=s,u=t(s),l=1/0,d=[];c--;){var f=e[c];c&&n&&(f=arrayMap(f,baseUnary(n))),l=qt(f.length,l),u[c]=!r&&(n||a>=120&&f.length>=120)?new SetCache(c&&f):i}f=e[0];var p=-1,h=u[0];e:for(;++p<a&&d.length<l;){var m=f[p],g=n?n(m):m;if(m=r||0!==m?m:0,!(h?cacheHas(h,g):o(d,g,r))){for(c=s;--c;){var v=u[c];if(!(v?cacheHas(v,g):o(e[c],g,r)))continue e}h&&h.push(g),d.push(m)}}return d}function baseInverter(e,t,n,r){return baseForOwn(e,function(e,o,i){t(r,n(e),o,i)}),r}function baseInvoke(e,t,n){t=castPath(t,e),e=parent(e,t);var r=null==e?e:e[toKey(last(t))];return null==r?i:apply(r,e,n)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==U}function baseIsArrayBuffer(e){return isObjectLike(e)&&baseGetTag(e)==de}function baseIsDate(e){return isObjectLike(e)&&baseGetTag(e)==H}function baseIsEqual(e,t,n,r,o){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,n,r,baseIsEqual,o))}function baseIsEqualDeep(e,t,n,r,o,i){var a=Pr(e),s=Pr(t),c=a?W:$n(e),u=s?W:$n(t);c=c==U?te:c,u=u==U?te:u;var l=c==te,d=u==te,f=c==u;if(f&&Tr(e)){if(!Tr(t))return!1;a=!0,l=!1}if(f&&!l)return i||(i=new Stack),a||Vr(e)?equalArrays(e,t,n,r,o,i):equalByTag(e,t,c,n,r,o,i);if(!(n&g)){var p=l&&dt.call(e,"__wrapped__"),h=d&&dt.call(t,"__wrapped__");if(p||h){var m=p?e.value():e,v=h?t.value():t;return i||(i=new Stack),o(m,v,n,r,i)}}return!!f&&(i||(i=new Stack),equalObjects(e,t,n,r,o,i))}function baseIsMap(e){return isObjectLike(e)&&$n(e)==X}function baseIsMatch(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=nt(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){c=n[o];var u=c[0],l=e[u],d=c[1];if(s&&c[2]){if(l===i&&!(u in e))return!1}else{var f=new Stack;if(r)var p=r(l,d,u,e,t,f);if(!(p===i?baseIsEqual(d,l,g|v,r,f):p))return!1}}return!0}function baseIsNative(e){if(!isObject(e)||isMasked(e))return!1;var t=isFunction(e)?vt:Qe;return t.test(toSource(e))}function baseIsRegExp(e){return isObjectLike(e)&&baseGetTag(e)==oe}function baseIsSet(e){return isObjectLike(e)&&$n(e)==ie}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!Yt[baseGetTag(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?Pr(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return Vt(e);var t=[];for(var n in nt(e))dt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),n=[];for(var r in e)("constructor"!=r||!t&&dt.call(e,r))&&n.push(r);return n}function baseLt(e,t){return e<t}function baseMap(e,n){var r=-1,o=isArrayLike(e)?t(e.length):[];return On(e,function(e,t,i){o[++r]=n(e,t,i)}),o}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||baseIsMatch(n,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(n){var r=get(n,e);return r===i&&r===t?hasIn(n,e):baseIsEqual(t,r,g|v)}}function baseMerge(e,t,n,r,o){e!==t&&Pn(t,function(a,s){if(isObject(a))o||(o=new Stack),baseMergeDeep(e,t,s,n,baseMerge,r,o);else{var c=r?r(e[s],a,s+"",e,t,o):i;c===i&&(c=a),assignMergeValue(e,s,c)}},keysIn)}function baseMergeDeep(e,t,n,r,o,a,s){var c=e[n],u=t[n],l=s.get(u);if(l)return void assignMergeValue(e,n,l);var d=a?a(c,u,n+"",e,t,s):i,f=d===i;if(f){var p=Pr(u),h=!p&&Tr(u),m=!p&&!h&&Vr(u);d=u,p||h||m?Pr(c)?d=c:isArrayLikeObject(c)?d=copyArray(c):h?(f=!1,d=cloneBuffer(u,!0)):m?(f=!1,d=cloneTypedArray(u,!0)):d=[]:isPlainObject(u)||Ir(u)?(d=c,Ir(c)?d=toPlainObject(c):(!isObject(c)||r&&isFunction(c))&&(d=initCloneObject(u))):f=!1}f&&(s.set(u,d),o(d,u,r,a,s),s.delete(u)),assignMergeValue(e,n,d)}function baseNth(e,t){var n=e.length;if(n)return t+=t<0?n:0,isIndex(t,n)?e[t]:i}function baseOrderBy(e,t,n){var r=-1;t=arrayMap(t.length?t:[identity],baseUnary(getIteratee()));var o=baseMap(e,function(e,n,o){var i=arrayMap(t,function(t){return t(e)});return{criteria:i,index:++r,value:e}});return baseSortBy(o,function(e,t){return compareMultiple(e,t,n)})}function basePick(e,t){return basePickBy(e,t,function(t,n){return hasIn(e,n)})}function basePickBy(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=baseGet(e,a);n(s,a)&&baseSet(i,castPath(a,e),s)}return i}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function basePullAll(e,t,n,r){var o=r?baseIndexOfWith:baseIndexOf,i=-1,a=t.length,s=e;for(e===t&&(t=copyArray(t)),n&&(s=arrayMap(e,baseUnary(n)));++i<a;)for(var c=0,u=t[i],l=n?n(u):u;(c=o(s,l,c,r))>-1;)s!==e&&kt.call(s,c,1),kt.call(e,c,1);return e}function basePullAt(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;isIndex(o)?kt.call(e,o,1):baseUnset(e,o)}}return e}function baseRandom(e,t){return e+Tt(Gt()*(t-e+1))}function baseRange(e,n,r,o){for(var i=-1,a=Bt(Rt((n-e)/(r||1)),0),s=t(a);a--;)s[o?a:++i]=e,e+=r;return s}function baseRepeat(e,t){var n="";if(!e||t<1||t>F)return n;do t%2&&(n+=e),t=Tt(t/2),t&&(e+=e);while(t);return n}function baseRest(e,t){return Gn(overRest(e,t,identity),e+"")}function baseSample(e){return arraySample(values(e))}function baseSampleSize(e,t){
var n=values(e);return shuffleSelf(n,baseClamp(t,0,n.length))}function baseSet(e,t,n,r){if(!isObject(e))return e;t=castPath(t,e);for(var o=-1,a=t.length,s=a-1,c=e;null!=c&&++o<a;){var u=toKey(t[o]),l=n;if(o!=s){var d=c[u];l=r?r(d,u,c):i,l===i&&(l=isObject(d)?d:isIndex(t[o+1])?[]:{})}assignValue(c,u,l),c=c[u]}return e}function baseShuffle(e){return shuffleSelf(values(e))}function baseSlice(e,n,r){var o=-1,i=e.length;n<0&&(n=-n>i?0:i+n),r=r>i?i:r,r<0&&(r+=i),i=n>r?0:r-n>>>0,n>>>=0;for(var a=t(i);++o<i;)a[o]=e[o+n];return a}function baseSome(e,t){var n;return On(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function baseSortedIndex(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t===t&&o<=q){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!isSymbol(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return baseSortedIndexBy(e,t,identity,n)}function baseSortedIndexBy(e,t,n,r){t=n(t);for(var o=0,a=null==e?0:e.length,s=t!==t,c=null===t,u=isSymbol(t),l=t===i;o<a;){var d=Tt((o+a)/2),f=n(e[d]),p=f!==i,h=null===f,m=f===f,g=isSymbol(f);if(s)var v=r||m;else v=l?m&&(r||p):c?m&&p&&(r||!h):u?m&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);v?o=d+1:a=d}return qt(a,B)}function baseSortedUniq(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!eq(s,c)){var c=s;i[o++]=0===a?0:a}}return i}function baseToNumber(e){return"number"==typeof e?e:isSymbol(e)?L:+e}function baseToString(e){if("string"==typeof e)return e;if(Pr(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return xn?xn.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function baseUniq(e,t,n){var r=-1,o=arrayIncludes,i=e.length,a=!0,c=[],u=c;if(n)a=!1,o=arrayIncludesWith;else if(i>=s){var l=t?null:Ln(e);if(l)return setToArray(l);a=!1,o=cacheHas,u=new SetCache}else u=t?[]:c;e:for(;++r<i;){var d=e[r],f=t?t(d):d;if(d=n||0!==d?d:0,a&&f===f){for(var p=u.length;p--;)if(u[p]===f)continue e;t&&u.push(f),c.push(d)}else o(u,f,n)||(u!==c&&u.push(f),c.push(d))}return c}function baseUnset(e,t){return t=castPath(t,e),e=parent(e,t),null==e||delete e[toKey(last(t))]}function baseUpdate(e,t,n,r){return baseSet(e,t,n(baseGet(e,t)),r)}function baseWhile(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?baseSlice(e,r?0:i,r?i+1:o):baseSlice(e,r?i+1:0,r?o:i)}function baseWrapperValue(e,t){var n=e;return n instanceof LazyWrapper&&(n=n.value()),arrayReduce(t,function(e,t){return t.func.apply(t.thisArg,arrayPush([e],t.args))},n)}function baseXor(e,n,r){var o=e.length;if(o<2)return o?baseUniq(e[0]):[];for(var i=-1,a=t(o);++i<o;)for(var s=e[i],c=-1;++c<o;)c!=i&&(a[i]=baseDifference(a[i]||s,e[c],n,r));return baseUniq(baseFlatten(a,1),n,r)}function baseZipObject(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var c=r<a?t[r]:i;n(s,e[r],c)}return s}function castArrayLikeObject(e){return isArrayLikeObject(e)?e:[]}function castFunction(e){return"function"==typeof e?e:identity}function castPath(e,t){return Pr(e)?e:isKey(e,t)?[e]:Hn(toString(e))}function castSlice(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:baseSlice(e,t,n)}function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=Ct?Ct(n):new e.constructor(n);return e.copy(r),r}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _t(t).set(new _t(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function cloneMap(e,t,n){var r=t?n(mapToArray(e),p):mapToArray(e);return arrayReduce(r,addMapEntry,new e.constructor)}function cloneRegExp(e){var t=new e.constructor(e.source,He.exec(e));return t.lastIndex=e.lastIndex,t}function cloneSet(e,t,n){var r=t?n(setToArray(e),p):setToArray(e);return arrayReduce(r,addSetEntry,new e.constructor)}function cloneSymbol(e){return An?nt(An.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function compareAscending(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,a=isSymbol(e),s=t!==i,c=null===t,u=t===t,l=isSymbol(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}function compareMultiple(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var c=compareAscending(o[r],i[r]);if(c){if(r>=s)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}function composeArgs(e,n,r,o){for(var i=-1,a=e.length,s=r.length,c=-1,u=n.length,l=Bt(a-s,0),d=t(u+l),f=!o;++c<u;)d[c]=n[c];for(;++i<s;)(f||i<a)&&(d[r[i]]=e[i]);for(;l--;)d[c++]=e[i++];return d}function composeArgsRight(e,n,r,o){for(var i=-1,a=e.length,s=-1,c=r.length,u=-1,l=n.length,d=Bt(a-c,0),f=t(d+l),p=!o;++i<d;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=n[u];for(;++s<c;)(p||i<a)&&(f[h+r[s]]=e[i++]);return f}function copyArray(e,n){var r=-1,o=e.length;for(n||(n=t(o));++r<o;)n[r]=e[r];return n}function copyObject(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?baseAssignValue(n,c,u):assignValue(n,c,u)}return n}function copySymbols(e,t){return copyObject(e,Bn(e),t)}function copySymbolsIn(e,t){return copyObject(e,qn(e),t)}function createAggregator(e,t){return function(n,r){var o=Pr(n)?arrayAggregator:baseAggregator,i=t?t():{};return o(n,e,getIteratee(r,2),i)}}function createAssigner(e){return baseRest(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&isIterateeCall(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=nt(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t})}function createBaseEach(e,t){return function(n,r){if(null==n)return n;if(!isArrayLike(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=nt(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function createBaseFor(e){return function(t,n,r){for(var o=-1,i=nt(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(n(i[c],c,i)===!1)break}return t}}function createBind(e,t,n){function wrapper(){var t=this&&this!==cn&&this instanceof wrapper?o:e;return t.apply(r?n:this,arguments)}var r=t&y,o=createCtor(e);return wrapper}function createCaseFirst(e){return function(t){t=toString(t);var n=hasUnicode(t)?stringToArray(t):i,r=n?n[0]:t.charAt(0),o=n?castSlice(n,1).join(""):t.slice(1);return r[e]()+o}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(Ut,"")),e,"")}}function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),r=e.apply(n,t);return isObject(r)?r:n}}function createCurry(e,n,r){function wrapper(){for(var a=arguments.length,s=t(a),c=a,u=getHolder(wrapper);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==u&&s[a-1]!==u?[]:replaceHolders(s,u);if(a-=l.length,a<r)return createRecurry(e,n,createHybrid,wrapper.placeholder,i,s,l,i,i,r-a);var d=this&&this!==cn&&this instanceof wrapper?o:e;return apply(d,this,s)}var o=createCtor(e);return wrapper}function createFind(e){return function(t,n,r){var o=nt(t);if(!isArrayLike(t)){var a=getIteratee(n,3);t=keys(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function createFlow(e){return flatRest(function(t){var n=t.length,r=n,o=LodashWrapper.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new it(u);if(o&&!s&&"wrapper"==getFuncName(a))var s=new LodashWrapper([],!0)}for(r=s?r:n;++r<n;){a=t[r];var c=getFuncName(a),l="wrapper"==c?Vn(a):i;s=l&&isLaziable(l[0])&&l[1]==(k|C|S|E)&&!l[4].length&&1==l[9]?s[getFuncName(l[0])].apply(s,l[3]):1==a.length&&isLaziable(a)?s[c]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Pr(r))return s.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}})}function createHybrid(e,n,r,o,a,s,c,u,l,d){function wrapper(){for(var i=arguments.length,y=t(i),b=i;b--;)y[b]=arguments[b];if(m)var _=getHolder(wrapper),C=countHolders(y,_);if(o&&(y=composeArgs(y,o,a,m)),s&&(y=composeArgsRight(y,s,c,m)),i-=C,m&&i<d){var w=replaceHolders(y,_);return createRecurry(e,n,createHybrid,wrapper.placeholder,r,y,w,u,l,d-i)}var S=p?r:this,D=h?S[e]:e;return i=y.length,u?y=reorder(y,u):g&&i>1&&y.reverse(),f&&l<i&&(y.length=l),this&&this!==cn&&this instanceof wrapper&&(D=v||createCtor(D)),D.apply(S,y)}var f=n&k,p=n&y,h=n&b,m=n&(C|w),g=n&A,v=h?i:createCtor(e);return wrapper}function createInverter(e,t){return function(n,r){return baseInverter(n,e,t(r),{})}}function createMathOperation(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=baseToString(n),r=baseToString(r)):(n=baseToNumber(n),r=baseToNumber(r)),o=e(n,r)}return o}}function createOver(e){return flatRest(function(t){return t=arrayMap(t,baseUnary(getIteratee())),baseRest(function(n){var r=this;return e(t,function(e){return apply(e,r,n)})})})}function createPadding(e,t){t=t===i?" ":baseToString(t);var n=t.length;if(n<2)return n?baseRepeat(t,e):t;var r=baseRepeat(t,Rt(e/stringSize(t)));return hasUnicode(t)?castSlice(stringToArray(r),0,e).join(""):r.slice(0,e)}function createPartial(e,n,r,o){function wrapper(){for(var n=-1,s=arguments.length,c=-1,u=o.length,l=t(u+s),d=this&&this!==cn&&this instanceof wrapper?a:e;++c<u;)l[c]=o[c];for(;s--;)l[c++]=arguments[++n];return apply(d,i?r:this,l)}var i=n&y,a=createCtor(e);return wrapper}function createRange(e){return function(t,n,r){return r&&"number"!=typeof r&&isIterateeCall(t,n,r)&&(n=r=i),t=toFinite(t),n===i?(n=t,t=0):n=toFinite(n),r=r===i?t<n?1:-1:toFinite(r),baseRange(t,n,r,e)}}function createRelationalOperation(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=toNumber(t),n=toNumber(n)),e(t,n)}}function createRecurry(e,t,n,r,o,a,s,c,u,l){var d=t&C,f=d?s:i,p=d?i:s,h=d?a:i,m=d?i:a;t|=d?S:D,t&=~(d?D:S),t&_||(t&=~(y|b));var g=[e,t,o,h,f,m,p,c,u,l],v=n.apply(i,g);return isLaziable(e)&&Wn(v,g),v.placeholder=r,setWrapToString(v,e,t)}function createRound(e){var t=We[e];return function(e,n){if(e=toNumber(e),n=null==n?0:qt(toInteger(n),292)){var r=(toString(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return r=(toString(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function createToPairs(e){return function(t){var n=$n(t);return n==X?mapToArray(t):n==ie?setToPairs(t):baseToPairs(t,e(t))}}function createWrap(e,t,n,r,o,a,s,c){var l=t&b;if(!l&&"function"!=typeof e)throw new it(u);var d=r?r.length:0;if(d||(t&=~(S|D),r=o=i),s=s===i?s:Bt(toInteger(s),0),c=c===i?c:toInteger(c),d-=o?o.length:0,t&D){var f=r,p=o;r=o=i}var h=l?i:Vn(e),m=[e,t,n,r,o,f,p,a,s,c];if(h&&mergeData(m,h),e=m[0],t=m[1],n=m[2],r=m[3],o=m[4],c=m[9]=m[9]===i?l?0:e.length:Bt(m[9]-d,0),!c&&t&(C|w)&&(t&=~(C|w)),t&&t!=y)g=t==C||t==w?createCurry(e,t,c):t!=S&&t!=(y|S)||o.length?createHybrid.apply(i,m):createPartial(e,t,n,r);else var g=createBind(e,t,n);var v=h?Tn:Wn;return setWrapToString(v(g,m),e,t)}function customDefaultsAssignIn(e,t,n,r){return e===i||eq(e,ct[n])&&!dt.call(r,n)?t:e}function customDefaultsMerge(e,t,n,r,o,a){return isObject(e)&&isObject(t)&&(a.set(t,e),baseMerge(e,t,i,customDefaultsMerge,a),a.delete(t)),e}function customOmitClone(e){return isPlainObject(e)?i:e}function equalArrays(e,t,n,r,o,a){var s=n&g,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,f=!0,p=n&v?new SetCache:i;for(a.set(e,t),a.set(t,e);++d<c;){var h=e[d],m=t[d];if(r)var y=s?r(m,h,d,t,e,a):r(h,m,d,e,t,a);if(y!==i){if(y)continue;f=!1;break}if(p){if(!arraySome(t,function(e,t){if(!cacheHas(p,t)&&(h===e||o(h,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(h!==m&&!o(h,m,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function equalByTag(e,t,n,r,o,i,a){switch(n){case fe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case de:return!(e.byteLength!=t.byteLength||!i(new _t(e),new _t(t)));case G:case H:case Z:return eq(+e,+t);case J:return e.name==t.name&&e.message==t.message;case oe:case ae:return e==t+"";case X:var s=mapToArray;case ie:var c=r&g;if(s||(s=setToArray),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=v,a.set(e,t);var l=equalArrays(s(e),s(t),r,o,i,a);return a.delete(e),l;case se:if(An)return An.call(e)==An.call(t)}return!1}function equalObjects(e,t,n,r,o,a){var s=n&g,c=getAllKeys(e),u=c.length,l=getAllKeys(t),d=l.length;if(u!=d&&!s)return!1;for(var f=u;f--;){var p=c[f];if(!(s?p in t:dt.call(t,p)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var m=!0;a.set(e,t),a.set(t,e);for(var v=s;++f<u;){p=c[f];var y=e[p],b=t[p];if(r)var _=s?r(b,y,p,t,e,a):r(y,b,p,e,t,a);if(!(_===i?y===b||o(y,b,n,r,a):_)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var C=e.constructor,w=t.constructor;C!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof C&&C instanceof C&&"function"==typeof w&&w instanceof w)&&(m=!1)}return a.delete(e),a.delete(t),m}function flatRest(e){return Gn(overRest(e,i,flatten),e+"")}function getAllKeys(e){return baseGetAllKeys(e,keys,Bn)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,qn)}function getFuncName(e){for(var t=e.name+"",n=un[t],r=dt.call(un,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function getHolder(e){var t=dt.call(lodash,"placeholder")?lodash:e;return t.placeholder}function getIteratee(){var e=lodash.iteratee||iteratee;return e=e===iteratee?baseIteratee:e,arguments.length?e(arguments[0],arguments[1]):e}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function getMatchData(e){for(var t=keys(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,isStrictComparable(o)]}return t}function getNative(e,t){var n=getValue(e,t);return baseIsNative(n)?n:i}function getRawTag(e){var t=dt.call(e,xt),n=e[xt];try{e[xt]=i;var r=!0}catch(e){}var o=ht.call(e);return r&&(t?e[xt]=n:delete e[xt]),o}function getView(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=qt(t,e+a);break;case"takeRight":e=Bt(e,t-a)}}return{start:e,end:t}}function getWrapDetails(e){var t=e.match($e);return t?t[1].split(Ue):[]}function hasPath(e,t,n){t=castPath(t,e);for(var r=-1,o=t.length,i=!1;++r<o;){var a=toKey(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:(o=null==e?0:e.length,!!o&&isLength(o)&&isIndex(a,o)&&(Pr(e)||Ir(e)))}function initCloneArray(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&dt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:Nn(wt(e))}function initCloneByTag(e,t,n,r){var o=e.constructor;switch(t){case de:return cloneArrayBuffer(e);case G:case H:return new o(+e);case fe:return cloneDataView(e,r);case pe:case he:case me:case ge:case ve:case ye:case be:case _e:case Ce:return cloneTypedArray(e,r);case X:return cloneMap(e,r,n);case Z:case ae:return new o(e);case oe:return cloneRegExp(e);case ie:return cloneSet(e,r,n);case se:return cloneSymbol(e)}}function insertWrapDetails(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(qe,"{\n/* [wrapped with "+t+"] */\n")}function isFlattenable(e){return Pr(e)||Ir(e)||!!(Et&&e&&e[Et])}function isIndex(e,t){return t=null==t?F:t,!!t&&("number"==typeof e||Xe.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;return!!("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n)&&eq(n[t],e)}function isKey(e,t){if(Pr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!isSymbol(e))||(Re.test(e)||!Pe.test(e)||null!=t&&e in nt(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isLaziable(e){var t=getFuncName(e),n=lodash[t];if("function"!=typeof n||!(t in LazyWrapper.prototype))return!1;if(e===n)return!0;var r=Vn(n);return!!r&&e===r[0]}function isMasked(e){return!!pt&&pt in e}function isPrototype(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ct;return e===n}function isStrictComparable(e){return e===e&&!isObject(e)}function matchesStrictComparable(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in nt(n)))}}function memoizeCapped(e){var t=memoize(e,function(e){return n.size===d&&n.clear(),e}),n=t.cache;return t}function mergeData(e,t){var n=e[1],r=t[1],o=n|r,i=o<(y|b|k),a=r==k&&n==C||r==k&&n==E&&e[7].length<=t[8]||r==(k|E)&&t[7].length<=t[8]&&n==C;if(!i&&!a)return e;r&y&&(e[2]=t[2],o|=n&y?0:_);var s=t[3];if(s){var c=e[3];e[3]=c?composeArgs(c,s,t[4]):s,e[4]=c?replaceHolders(e[3],f):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?composeArgsRight(c,s,t[6]):s,e[6]=c?replaceHolders(e[5],f):t[6]),s=t[7],s&&(e[7]=s),r&k&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function nativeKeysIn(e){var t=[];if(null!=e)for(var n in nt(e))t.push(n);return t}function objectToString(e){return ht.call(e)}function overRest(e,n,r){return n=Bt(n===i?e.length-1:n,0),function(){for(var o=arguments,i=-1,a=Bt(o.length-n,0),s=t(a);++i<a;)s[i]=o[n+i];i=-1;for(var c=t(n+1);++i<n;)c[i]=o[i];return c[n]=r(s),apply(e,this,c)}}function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function reorder(e,t){for(var n=e.length,r=qt(t.length,n),o=copyArray(e);r--;){var a=t[r];e[r]=isIndex(a,n)?o[a]:i}return e}function setWrapToString(e,t,n){var r=t+"";return Gn(e,insertWrapDetails(r,updateWrapDetails(getWrapDetails(r),n)))}function shortOut(e){var t=0,n=0;return function(){var r=$t(),o=I-(r-n);if(n=r,o>0){if(++t>=O)return arguments[0]}else t=0;return e.apply(i,arguments)}}function shuffleSelf(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=baseRandom(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-j?"-0":t}function toSource(e){if(null!=e){try{return lt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function updateWrapDetails(e,t){return arrayEach($,function(n){var r="_."+n[0];t&n[1]&&!arrayIncludes(e,r)&&e.push(r)}),e.sort()}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function chunk(e,n,r){n=(r?isIterateeCall(e,n,r):n===i)?1:Bt(toInteger(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var a=0,s=0,c=t(Rt(o/n));a<o;)c[s++]=baseSlice(e,a,a+=n);return c}function compact(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}function concat(){var e=arguments.length;if(!e)return[];for(var n=t(e-1),r=arguments[0],o=e;o--;)n[o-1]=arguments[o];return arrayPush(Pr(r)?copyArray(r):[r],baseFlatten(n,1))}function drop(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:toInteger(t),baseSlice(e,t<0?0:t,r)):[]}function dropRight(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:toInteger(t),t=r-t,baseSlice(e,0,t<0?0:t)):[]}function dropRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0,!0):[]}function dropWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0):[]}function fill(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(n=0,r=o),baseFill(e,t,n,r)):[]}function findIndex(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:toInteger(n);return o<0&&(o=Bt(r+o,0)),baseFindIndex(e,getIteratee(t,3),o)}function findLastIndex(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=toInteger(n),o=n<0?Bt(r+o,0):qt(o,r-1)),baseFindIndex(e,getIteratee(t,3),o,!0)}function flatten(e){var t=null==e?0:e.length;return t?baseFlatten(e,1):[]}function flattenDeep(e){var t=null==e?0:e.length;return t?baseFlatten(e,j):[]}function flattenDepth(e,t){var n=null==e?0:e.length;return n?(t=t===i?1:toInteger(t),baseFlatten(e,t)):[]}function fromPairs(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}function head(e){return e&&e.length?e[0]:i}function indexOf(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:toInteger(n);return o<0&&(o=Bt(r+o,0)),baseIndexOf(e,t,o)}function initial(e){var t=null==e?0:e.length;return t?baseSlice(e,0,-1):[]}function join(e,t){return null==e?"":Lt.call(e,t)}function last(e){var t=null==e?0:e.length;return t?e[t-1]:i}function lastIndexOf(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=toInteger(n),o=o<0?Bt(r+o,0):qt(o,r-1)),t===t?strictLastIndexOf(e,t,o):baseFindIndex(e,baseIsNaN,o,!0)}function nth(e,t){return e&&e.length?baseNth(e,toInteger(t)):i}function pullAll(e,t){return e&&e.length&&t&&t.length?basePullAll(e,t):e}function pullAllBy(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,getIteratee(n,2)):e}function pullAllWith(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,i,n):e}function remove(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=getIteratee(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return basePullAt(e,o),n}function reverse(e){return null==e?e:Ht.call(e)}function slice(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)?(t=0,n=r):(t=null==t?0:toInteger(t),n=n===i?r:toInteger(n)),baseSlice(e,t,n)):[]}function sortedIndex(e,t){return baseSortedIndex(e,t)}function sortedIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2))}function sortedIndexOf(e,t){var n=null==e?0:e.length;if(n){var r=baseSortedIndex(e,t);if(r<n&&eq(e[r],t))return r}return-1}function sortedLastIndex(e,t){return baseSortedIndex(e,t,!0)}function sortedLastIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2),!0)}function sortedLastIndexOf(e,t){var n=null==e?0:e.length;if(n){var r=baseSortedIndex(e,t,!0)-1;if(eq(e[r],t))return r}return-1}function sortedUniq(e){return e&&e.length?baseSortedUniq(e):[]}function sortedUniqBy(e,t){return e&&e.length?baseSortedUniq(e,getIteratee(t,2)):[]}function tail(e){var t=null==e?0:e.length;return t?baseSlice(e,1,t):[]}function take(e,t,n){return e&&e.length?(t=n||t===i?1:toInteger(t),baseSlice(e,0,t<0?0:t)):[]}function takeRight(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:toInteger(t),t=r-t,baseSlice(e,t<0?0:t,r)):[]}function takeRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!1,!0):[]}function takeWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3)):[]}function uniq(e){return e&&e.length?baseUniq(e):[]}function uniqBy(e,t){return e&&e.length?baseUniq(e,getIteratee(t,2)):[]}function uniqWith(e,t){return t="function"==typeof t?t:i,e&&e.length?baseUniq(e,i,t):[]}function unzip(e){if(!e||!e.length)return[];var t=0;return e=arrayFilter(e,function(e){if(isArrayLikeObject(e))return t=Bt(e.length,t),!0}),baseTimes(t,function(t){return arrayMap(e,baseProperty(t))})}function unzipWith(e,t){if(!e||!e.length)return[];var n=unzip(e);return null==t?n:arrayMap(n,function(e){return apply(t,i,e)})}function zipObject(e,t){return baseZipObject(e||[],t||[],assignValue)}function zipObjectDeep(e,t){return baseZipObject(e||[],t||[],baseSet)}function chain(e){var t=lodash(e);return t.__chain__=!0,t}function tap(e,t){return t(e),e}function thru(e,t){return t(e)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===i&&(this.__values__=toArray(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function wrapperToIterator(){return this}function wrapperPlant(e){for(var t,n=this;n instanceof baseLodash;){var r=wrapperClone(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function wrapperReverse(){var e=this.__wrapped__;if(e instanceof LazyWrapper){var t=e;return this.__actions__.length&&(t=new LazyWrapper(this)),t=t.reverse(),t.__actions__.push({func:thru,args:[reverse],thisArg:i}),new LodashWrapper(t,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(e,t,n){var r=Pr(e)?arrayEvery:baseEvery;return n&&isIterateeCall(e,t,n)&&(t=i),r(e,getIteratee(t,3))}function filter(e,t){var n=Pr(e)?arrayFilter:baseFilter;return n(e,getIteratee(t,3))}function flatMap(e,t){return baseFlatten(map(e,t),1)}function flatMapDeep(e,t){return baseFlatten(map(e,t),j)}function flatMapDepth(e,t,n){return n=n===i?1:toInteger(n),baseFlatten(map(e,t),n)}function forEach(e,t){var n=Pr(e)?arrayEach:On;return n(e,getIteratee(t,3))}function forEachRight(e,t){var n=Pr(e)?arrayEachRight:In;return n(e,getIteratee(t,3))}function includes(e,t,n,r){e=isArrayLike(e)?e:values(e),n=n&&!r?toInteger(n):0;var o=e.length;return n<0&&(n=Bt(o+n,0)),isString(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&baseIndexOf(e,t,n)>-1}function map(e,t){var n=Pr(e)?arrayMap:baseMap;return n(e,getIteratee(t,3))}function orderBy(e,t,n,r){return null==e?[]:(Pr(t)||(t=null==t?[]:[t]),n=r?i:n,Pr(n)||(n=null==n?[]:[n]),baseOrderBy(e,t,n))}function reduce(e,t,n){var r=Pr(e)?arrayReduce:baseReduce,o=arguments.length<3;return r(e,getIteratee(t,4),n,o,On)}function reduceRight(e,t,n){var r=Pr(e)?arrayReduceRight:baseReduce,o=arguments.length<3;return r(e,getIteratee(t,4),n,o,In)}function reject(e,t){var n=Pr(e)?arrayFilter:baseFilter;return n(e,negate(getIteratee(t,3)))}function sample(e){var t=Pr(e)?arraySample:baseSample;return t(e)}function sampleSize(e,t,n){t=(n?isIterateeCall(e,t,n):t===i)?1:toInteger(t);var r=Pr(e)?arraySampleSize:baseSampleSize;return r(e,t)}function shuffle(e){var t=Pr(e)?arrayShuffle:baseShuffle;return t(e)}function size(e){if(null==e)return 0;if(isArrayLike(e))return isString(e)?stringSize(e):e.length;var t=$n(e);return t==X||t==ie?e.size:baseKeys(e).length}function some(e,t,n){var r=Pr(e)?arraySome:baseSome;return n&&isIterateeCall(e,t,n)&&(t=i),r(e,getIteratee(t,3))}function after(e,t){if("function"!=typeof t)throw new it(u);return e=toInteger(e),function(){if(--e<1)return t.apply(this,arguments)}}function ary(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,createWrap(e,k,i,i,i,i,t)}function before(e,t){var n;if("function"!=typeof t)throw new it(u);return e=toInteger(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}function curry(e,t,n){t=n?i:t;var r=createWrap(e,C,i,i,i,i,i,t);return r.placeholder=curry.placeholder,r}function curryRight(e,t,n){t=n?i:t;var r=createWrap(e,w,i,i,i,i,i,t);return r.placeholder=curryRight.placeholder,r}function debounce(e,t,n){function invokeFunc(t){var n=r,a=o;return r=o=i,d=t,s=e.apply(a,n)}function leadingEdge(e){return d=e,c=zn(timerExpired,t),f?invokeFunc(e):s}function remainingWait(e){var n=e-l,r=e-d,o=t-n;return p?qt(o,a-r):o}function shouldInvoke(e){var n=e-l,r=e-d;return l===i||n>=t||n<0||p&&r>=a}function timerExpired(){var e=_r();return shouldInvoke(e)?trailingEdge(e):void(c=zn(timerExpired,remainingWait(e)))}function trailingEdge(e){return c=i,h&&r?invokeFunc(e):(r=o=i,s)}function cancel(){c!==i&&Mn(c),d=0,r=l=o=c=i}function flush(){return c===i?s:trailingEdge(_r())}function debounced(){var e=_r(),n=shouldInvoke(e);if(r=arguments,o=this,l=e,n){if(c===i)return leadingEdge(l);if(p)return c=zn(timerExpired,t),invokeFunc(l)}return c===i&&(c=zn(timerExpired,t)),s}var r,o,a,s,c,l,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new it(u);return t=toNumber(t)||0,isObject(n)&&(f=!!n.leading,p="maxWait"in n,a=p?Bt(toNumber(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),debounced.cancel=cancel,debounced.flush=flush,debounced}function flip(e){return createWrap(e,A)}function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(u);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(memoize.Cache||MapCache),n}function negate(e){if("function"!=typeof e)throw new it(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function once(e){return before(2,e)}function rest(e,t){if("function"!=typeof e)throw new it(u);return t=t===i?t:toInteger(t),baseRest(e,t)}function spread(e,t){if("function"!=typeof e)throw new it(u);return t=null==t?0:Bt(toInteger(t),0),baseRest(function(n){var r=n[t],o=castSlice(n,0,t);return r&&arrayPush(o,r),apply(e,this,o)})}function throttle(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new it(u);return isObject(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),debounce(e,t,{leading:r,maxWait:t,trailing:o})}function unary(e){return ary(e,1)}function wrap(e,t){return Er(castFunction(t),e)}function castArray(){if(!arguments.length)return[];var e=arguments[0];return Pr(e)?e:[e]}function clone(e){return baseClone(e,m)}function cloneWith(e,t){return t="function"==typeof t?t:i,baseClone(e,m,t)}function cloneDeep(e){return baseClone(e,p|m)}function cloneDeepWith(e,t){return t="function"==typeof t?t:i,baseClone(e,p|m,t)}function conformsTo(e,t){return null==t||baseConformsTo(e,t,keys(t))}function eq(e,t){return e===t||e!==e&&t!==t}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isBoolean(e){return e===!0||e===!1||isObjectLike(e)&&baseGetTag(e)==G}function isElement(e){return isObjectLike(e)&&1===e.nodeType&&!isPlainObject(e)}function isEmpty(e){if(null==e)return!0;if(isArrayLike(e)&&(Pr(e)||"string"==typeof e||"function"==typeof e.splice||Tr(e)||Vr(e)||Ir(e)))return!e.length;var t=$n(e);if(t==X||t==ie)return!e.size;if(isPrototype(e))return!baseKeys(e).length;for(var n in e)if(dt.call(e,n))return!1;return!0}function isEqual(e,t){return baseIsEqual(e,t)}function isEqualWith(e,t,n){n="function"==typeof n?n:i;var r=n?n(e,t):i;return r===i?baseIsEqual(e,t,i,n):!!r}function isError(e){if(!isObjectLike(e))return!1;var t=baseGetTag(e);return t==J||t==K||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}function isFinite(e){return"number"==typeof e&&Mt(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==Q||t==Y||t==z||t==re}function isInteger(e){return"number"==typeof e&&e==toInteger(e)}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=F}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}function isMatch(e,t){return e===t||baseIsMatch(e,t,getMatchData(t))}function isMatchWith(e,t,n){return n="function"==typeof n?n:i,baseIsMatch(e,t,getMatchData(t),n)}function isNaN(e){return isNumber(e)&&e!=+e}function isNative(e){if(Un(e))throw new r(c);return baseIsNative(e)}function isNull(e){return null===e}function isNil(e){return null==e}function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==Z}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=te)return!1;var t=wt(e);if(null===t)return!0;var n=dt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lt.call(n)==mt}function isSafeInteger(e){return isInteger(e)&&e>=-F&&e<=F}function isString(e){return"string"==typeof e||!Pr(e)&&isObjectLike(e)&&baseGetTag(e)==ae}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==se}function isUndefined(e){return e===i}function isWeakMap(e){return isObjectLike(e)&&$n(e)==ue}function isWeakSet(e){return isObjectLike(e)&&baseGetTag(e)==le}function toArray(e){if(!e)return[];if(isArrayLike(e))return isString(e)?stringToArray(e):copyArray(e);if(At&&e[At])return iteratorToArray(e[At]());
var t=$n(e),n=t==X?mapToArray:t==ie?setToArray:values;return n(e)}function toFinite(e){if(!e)return 0===e?e:0;if(e=toNumber(e),e===j||e===-j){var t=e<0?-1:1;return t*M}return e===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toLength(e){return e?baseClamp(toInteger(e),0,V):0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return L;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Le,"");var n=Je.test(e);return n||Ye.test(e)?on(e.slice(2),n?2:8):Ke.test(e)?L:+e}function toPlainObject(e){return copyObject(e,keysIn(e))}function toSafeInteger(e){return e?baseClamp(toInteger(e),-F,F):0===e?e:0}function toString(e){return null==e?"":baseToString(e)}function create(e,t){var n=Nn(e);return null==t?n:baseAssign(n,t)}function findKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwn)}function findLastKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwnRight)}function forIn(e,t){return null==e?e:Pn(e,getIteratee(t,3),keysIn)}function forInRight(e,t){return null==e?e:Rn(e,getIteratee(t,3),keysIn)}function forOwn(e,t){return e&&baseForOwn(e,getIteratee(t,3))}function forOwnRight(e,t){return e&&baseForOwnRight(e,getIteratee(t,3))}function functions(e){return null==e?[]:baseFunctions(e,keys(e))}function functionsIn(e){return null==e?[]:baseFunctions(e,keysIn(e))}function get(e,t,n){var r=null==e?i:baseGet(e,t);return r===i?n:r}function has(e,t){return null!=e&&hasPath(e,t,baseHas)}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}function mapKeys(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,function(e,r,o){baseAssignValue(n,t(e,r,o),e)}),n}function mapValues(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,function(e,r,o){baseAssignValue(n,r,t(e,r,o))}),n}function omitBy(e,t){return pickBy(e,negate(getIteratee(t)))}function pickBy(e,t){if(null==e)return{};var n=arrayMap(getAllKeysIn(e),function(e){return[e]});return t=getIteratee(t),basePickBy(e,n,function(e,n){return t(e,n[0])})}function result(e,t,n){t=castPath(t,e);var r=-1,o=t.length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[toKey(t[r])];a===i&&(r=o,a=n),e=isFunction(a)?a.call(e):a}return e}function set(e,t,n){return null==e?e:baseSet(e,t,n)}function setWith(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:baseSet(e,t,n,r)}function transform(e,t,n){var r=Pr(e),o=r||Tr(e)||Vr(e);if(t=getIteratee(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:isObject(e)&&isFunction(i)?Nn(wt(e)):{}}return(o?arrayEach:baseForOwn)(e,function(e,r,o){return t(n,e,r,o)}),n}function unset(e,t){return null==e||baseUnset(e,t)}function update(e,t,n){return null==e?e:baseUpdate(e,t,castFunction(n))}function updateWith(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:baseUpdate(e,t,castFunction(n),r)}function values(e){return null==e?[]:baseValues(e,keys(e))}function valuesIn(e){return null==e?[]:baseValues(e,keysIn(e))}function clamp(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=toNumber(n),n=n===n?n:0),t!==i&&(t=toNumber(t),t=t===t?t:0),baseClamp(toNumber(e),t,n)}function inRange(e,t,n){return t=toFinite(t),n===i?(n=t,t=0):n=toFinite(n),e=toNumber(e),baseInRange(e,t,n)}function random(e,t,n){if(n&&"boolean"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=toFinite(e),t===i?(t=e,e=0):t=toFinite(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Gt();return qt(e+o*(t-e+rn("1e-"+((o+"").length-1))),t)}return baseRandom(e,t)}function capitalize(e){return fo(toString(e).toLowerCase())}function deburr(e){return e=toString(e),e&&e.replace(Ze,Cn).replace(Wt,"")}function endsWith(e,t,n){e=toString(e),t=baseToString(t);var r=e.length;n=n===i?r:baseClamp(toInteger(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function escape(e){return e=toString(e),e&&xe.test(e)?e.replace(Ee,wn):e}function escapeRegExp(e){return e=toString(e),e&&Me.test(e)?e.replace(Fe,"\\$&"):e}function pad(e,t,n){e=toString(e),t=toInteger(t);var r=t?stringSize(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return createPadding(Tt(o),n)+e+createPadding(Rt(o),n)}function padEnd(e,t,n){e=toString(e),t=toInteger(t);var r=t?stringSize(e):0;return t&&r<t?e+createPadding(t-r,n):e}function padStart(e,t,n){e=toString(e),t=toInteger(t);var r=t?stringSize(e):0;return t&&r<t?createPadding(t-r,n)+e:e}function parseInt(e,t,n){return n||null==t?t=0:t&&(t=+t),zt(toString(e).replace(Ve,""),t||0)}function repeat(e,t,n){return t=(n?isIterateeCall(e,t,n):t===i)?1:toInteger(t),baseRepeat(toString(e),t)}function replace(){var e=arguments,t=toString(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function split(e,t,n){return n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=i),(n=n===i?V:n>>>0)?(e=toString(e),e&&("string"==typeof t||null!=t&&!Mr(t))&&(t=baseToString(t),!t&&hasUnicode(e))?castSlice(stringToArray(e),0,n):e.split(t,n)):[]}function startsWith(e,t,n){return e=toString(e),n=null==n?0:baseClamp(toInteger(n),0,e.length),t=baseToString(t),e.slice(n,n+t.length)==t}function template(e,t,n){var r=lodash.templateSettings;n&&isIterateeCall(e,t,n)&&(t=i),e=toString(e),t=Wr({},t,r,customDefaultsAssignIn);var a,s,c=Wr({},t.imports,r.imports,customDefaultsAssignIn),u=keys(c),l=baseValues(c,u),d=0,f=t.interpolate||et,p="__p += '",h=rt((t.escape||et).source+"|"+f.source+"|"+(f===Ie?Ge:et).source+"|"+(t.evaluate||et).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Qt+"]")+"\n";e.replace(h,function(t,n,r,o,i,c){return r||(r=o),p+=e.slice(d,c).replace(tt,escapeStringChar),n&&(a=!0,p+="' +\n__e("+n+") +\n'"),i&&(s=!0,p+="';\n"+i+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t}),p+="';\n";var g=t.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(we,""):p).replace(Se,"$1").replace(De,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=po(function(){return o(u,m+"return "+p).apply(i,l)});if(v.source=p,isError(v))throw v;return v}function toLower(e){return toString(e).toLowerCase()}function toUpper(e){return toString(e).toUpperCase()}function trim(e,t,n){if(e=toString(e),e&&(n||t===i))return e.replace(Le,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e),o=stringToArray(t),a=charsStartIndex(r,o),s=charsEndIndex(r,o)+1;return castSlice(r,a,s).join("")}function trimEnd(e,t,n){if(e=toString(e),e&&(n||t===i))return e.replace(Be,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e),o=charsEndIndex(r,stringToArray(t))+1;return castSlice(r,0,o).join("")}function trimStart(e,t,n){if(e=toString(e),e&&(n||t===i))return e.replace(Ve,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e),o=charsStartIndex(r,stringToArray(t));return castSlice(r,o).join("")}function truncate(e,t){var n=x,r=N;if(isObject(t)){var o="separator"in t?t.separator:o;n="length"in t?toInteger(t.length):n,r="omission"in t?baseToString(t.omission):r}e=toString(e);var a=e.length;if(hasUnicode(e)){var s=stringToArray(e);a=s.length}if(n>=a)return e;var c=n-stringSize(r);if(c<1)return r;var u=s?castSlice(s,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(s&&(c+=u.length-c),Mr(o)){if(e.slice(c).search(o)){var l,d=u;for(o.global||(o=rt(o.source,toString(He.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var f=l.index;u=u.slice(0,f===i?c:f)}}else if(e.indexOf(baseToString(o),c)!=c){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+r}function unescape(e){return e=toString(e),e&&Ae.test(e)?e.replace(ke,Sn):e}function words(e,t,n){return e=toString(e),t=n?i:t,t===i?hasUnicodeWord(e)?unicodeWords(e):asciiWords(e):e.match(t)||[]}function cond(e){var t=null==e?0:e.length,n=getIteratee();return e=t?arrayMap(e,function(e){if("function"!=typeof e[1])throw new it(u);return[n(e[0]),e[1]]}):[],baseRest(function(n){for(var r=-1;++r<t;){var o=e[r];if(apply(o[0],this,n))return apply(o[1],this,n)}})}function conforms(e){return baseConforms(baseClone(e,p))}function constant(e){return function(){return e}}function defaultTo(e,t){return null==e||e!==e?t:e}function identity(e){return e}function iteratee(e){return baseIteratee("function"==typeof e?e:baseClone(e,p))}function matches(e){return baseMatches(baseClone(e,p))}function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,p))}function mixin(e,t,n){var r=keys(t),o=baseFunctions(t,r);null!=n||isObject(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=baseFunctions(t,keys(t)));var i=!(isObject(n)&&"chain"in n&&!n.chain),a=isFunction(e);return arrayEach(o,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=copyArray(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,arrayPush([this.value()],arguments))})}),e}function noConflict(){return cn._===this&&(cn._=gt),this}function noop(){}function nthArg(e){return e=toInteger(e),baseRest(function(t){return baseNth(t,e)})}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function propertyOf(e){return function(t){return null==e?i:baseGet(e,t)}}function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(e,t){if(e=toInteger(e),e<1||e>F)return[];var n=V,r=qt(e,V);t=getIteratee(t),e-=V;for(var o=baseTimes(r,t);++n<e;)t(n);return o}function toPath(e){return Pr(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray(Hn(toString(e)))}function uniqueId(e){var t=++ft;return toString(e)+t}function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):i}function maxBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseGt):i}function mean(e){return baseMean(e,identity)}function meanBy(e,t){return baseMean(e,getIteratee(t,2))}function min(e){return e&&e.length?baseExtremum(e,identity,baseLt):i}function minBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseLt):i}function sum(e){return e&&e.length?baseSum(e,identity):0}function sumBy(e,t){return e&&e.length?baseSum(e,getIteratee(t,2)):0}e=null==e?cn:kn.defaults(cn.Object(),e,kn.pick(cn,Jt));var t=e.Array,n=e.Date,r=e.Error,o=e.Function,We=e.Math,nt=e.Object,rt=e.RegExp,ot=e.String,it=e.TypeError,at=t.prototype,st=o.prototype,ct=nt.prototype,ut=e["__core-js_shared__"],lt=st.toString,dt=ct.hasOwnProperty,ft=0,pt=function(){var e=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ht=ct.toString,mt=lt.call(nt),gt=cn._,vt=rt("^"+lt.call(dt).replace(Fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=dn?e.Buffer:i,bt=e.Symbol,_t=e.Uint8Array,Ct=yt?yt.allocUnsafe:i,wt=overArg(nt.getPrototypeOf,nt),St=nt.create,Dt=ct.propertyIsEnumerable,kt=at.splice,Et=bt?bt.isConcatSpreadable:i,At=bt?bt.iterator:i,xt=bt?bt.toStringTag:i,Nt=function(){try{var e=getNative(nt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ot=e.clearTimeout!==cn.clearTimeout&&e.clearTimeout,It=n&&n.now!==cn.Date.now&&n.now,Pt=e.setTimeout!==cn.setTimeout&&e.setTimeout,Rt=We.ceil,Tt=We.floor,jt=nt.getOwnPropertySymbols,Ft=yt?yt.isBuffer:i,Mt=e.isFinite,Lt=at.join,Vt=overArg(nt.keys,nt),Bt=We.max,qt=We.min,$t=n.now,zt=e.parseInt,Gt=We.random,Ht=at.reverse,Kt=getNative(e,"DataView"),Zt=getNative(e,"Map"),en=getNative(e,"Promise"),tn=getNative(e,"Set"),nn=getNative(e,"WeakMap"),an=getNative(nt,"create"),sn=nn&&new nn,un={},ln=toSource(Kt),fn=toSource(Zt),pn=toSource(en),_n=toSource(tn),Dn=toSource(nn),En=bt?bt.prototype:i,An=En?En.valueOf:i,xn=En?En.toString:i,Nn=function(){function object(){}return function(e){if(!isObject(e))return{};if(St)return St(e);object.prototype=e;var t=new object;return object.prototype=i,t}}();lodash.templateSettings={escape:Ne,evaluate:Oe,interpolate:Ie,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=Nn(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=Nn(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var On=createBaseEach(baseForOwn),In=createBaseEach(baseForOwnRight,!0),Pn=createBaseFor(),Rn=createBaseFor(!0),Tn=sn?function(e,t){return sn.set(e,t),e}:identity,jn=Nt?function(e,t){return Nt(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,Fn=baseRest,Mn=Ot||function(e){return cn.clearTimeout(e)},Ln=tn&&1/setToArray(new tn([,-0]))[1]==j?function(e){return new tn(e)}:noop,Vn=sn?function(e){return sn.get(e)}:noop,Bn=jt?function(e){return null==e?[]:(e=nt(e),arrayFilter(jt(e),function(t){return Dt.call(e,t)}))}:stubArray,qn=jt?function(e){for(var t=[];e;)arrayPush(t,Bn(e)),e=wt(e);return t}:stubArray,$n=baseGetTag;(Kt&&$n(new Kt(new ArrayBuffer(1)))!=fe||Zt&&$n(new Zt)!=X||en&&$n(en.resolve())!=ne||tn&&$n(new tn)!=ie||nn&&$n(new nn)!=ue)&&($n=function(e){var t=baseGetTag(e),n=t==te?e.constructor:i,r=n?toSource(n):"";if(r)switch(r){case ln:return fe;case fn:return X;case pn:return ne;case _n:return ie;case Dn:return ue}return t});var Un=ut?isFunction:stubFalse,Wn=shortOut(Tn),zn=Pt||function(e,t){return cn.setTimeout(e,t)},Gn=shortOut(jn),Hn=memoizeCapped(function(e){var t=[];return Te.test(e)&&t.push(""),e.replace(je,function(e,n,r,o){t.push(r?o.replace(ze,"$1"):n||e)}),t}),Kn=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]}),Jn=baseRest(function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=i),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),getIteratee(n,2)):[]}),Qn=baseRest(function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=i),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),i,n):[]}),Yn=baseRest(function(e){var t=arrayMap(e,castArrayLikeObject);return t.length&&t[0]===e[0]?baseIntersection(t):[]}),Xn=baseRest(function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return t===last(n)?t=i:n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,getIteratee(t,2)):[]}),Zn=baseRest(function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return t="function"==typeof t?t:i,t&&n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,i,t):[]}),er=baseRest(pullAll),tr=flatRest(function(e,t){var n=null==e?0:e.length,r=baseAt(e,t);return basePullAt(e,arrayMap(t,function(e){return isIndex(e,n)?+e:e}).sort(compareAscending)),r}),nr=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))}),rr=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=i),baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),getIteratee(t,2))}),or=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:i,baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),i,t)}),ir=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]}),ar=baseRest(function(e){return baseXor(arrayFilter(e,isArrayLikeObject))}),sr=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=i),baseXor(arrayFilter(e,isArrayLikeObject),getIteratee(t,2))}),cr=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:i,baseXor(arrayFilter(e,isArrayLikeObject),i,t)}),ur=baseRest(unzip),lr=baseRest(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,unzipWith(e,n)}),dr=flatRest(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return baseAt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof LazyWrapper&&isIndex(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:thru,args:[o],thisArg:i}),new LodashWrapper(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)}),fr=createAggregator(function(e,t,n){dt.call(e,n)?++e[n]:baseAssignValue(e,n,1)}),pr=createFind(findIndex),hr=createFind(findLastIndex),mr=createAggregator(function(e,t,n){dt.call(e,n)?e[n].push(t):baseAssignValue(e,n,[t])}),gr=baseRest(function(e,n,r){var o=-1,i="function"==typeof n,a=isArrayLike(e)?t(e.length):[];return On(e,function(e){a[++o]=i?apply(n,e,r):baseInvoke(e,n,r)}),a}),vr=createAggregator(function(e,t,n){baseAssignValue(e,n,t)}),yr=createAggregator(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),br=baseRest(function(e,t){if(null==e)return[];var n=t.length;return n>1&&isIterateeCall(e,t[0],t[1])?t=[]:n>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])}),_r=It||function(){return cn.Date.now()},Cr=baseRest(function(e,t,n){var r=y;if(n.length){var o=replaceHolders(n,getHolder(Cr));r|=S}return createWrap(e,r,t,n,o)}),wr=baseRest(function(e,t,n){var r=y|b;if(n.length){var o=replaceHolders(n,getHolder(wr));r|=S}return createWrap(t,r,e,n,o)}),Sr=baseRest(function(e,t){return baseDelay(e,1,t)}),Dr=baseRest(function(e,t,n){return baseDelay(e,toNumber(t)||0,n)});memoize.Cache=MapCache;var kr=Fn(function(e,t){t=1==t.length&&Pr(t[0])?arrayMap(t[0],baseUnary(getIteratee())):arrayMap(baseFlatten(t,1),baseUnary(getIteratee()));var n=t.length;return baseRest(function(r){for(var o=-1,i=qt(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return apply(e,this,r)})}),Er=baseRest(function(e,t){var n=replaceHolders(t,getHolder(Er));return createWrap(e,S,i,t,n)}),Ar=baseRest(function(e,t){var n=replaceHolders(t,getHolder(Ar));return createWrap(e,D,i,t,n)}),xr=flatRest(function(e,t){return createWrap(e,E,i,i,i,t)}),Nr=createRelationalOperation(baseGt),Or=createRelationalOperation(function(e,t){return e>=t}),Ir=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&dt.call(e,"callee")&&!Dt.call(e,"callee")},Pr=t.isArray,Rr=hn?baseUnary(hn):baseIsArrayBuffer,Tr=Ft||stubFalse,jr=mn?baseUnary(mn):baseIsDate,Fr=gn?baseUnary(gn):baseIsMap,Mr=vn?baseUnary(vn):baseIsRegExp,Lr=yn?baseUnary(yn):baseIsSet,Vr=bn?baseUnary(bn):baseIsTypedArray,Br=createRelationalOperation(baseLt),qr=createRelationalOperation(function(e,t){return e<=t}),$r=createAssigner(function(e,t){if(isPrototype(t)||isArrayLike(t))return void copyObject(t,keys(t),e);for(var n in t)dt.call(t,n)&&assignValue(e,n,t[n])}),Ur=createAssigner(function(e,t){copyObject(t,keysIn(t),e)}),Wr=createAssigner(function(e,t,n,r){copyObject(t,keysIn(t),e,r)}),zr=createAssigner(function(e,t,n,r){copyObject(t,keys(t),e,r)}),Gr=flatRest(baseAt),Hr=baseRest(function(e){return e.push(i,customDefaultsAssignIn),apply(Wr,i,e)}),Kr=baseRest(function(e){return e.push(i,customDefaultsMerge),apply(Zr,i,e)}),Jr=createInverter(function(e,t,n){e[t]=n},constant(identity)),Qr=createInverter(function(e,t,n){dt.call(e,t)?e[t].push(n):e[t]=[n]},getIteratee),Yr=baseRest(baseInvoke),Xr=createAssigner(function(e,t,n){baseMerge(e,t,n)}),Zr=createAssigner(function(e,t,n,r){baseMerge(e,t,n,r)}),eo=flatRest(function(e,t){var n={};if(null==e)return n;var r=!1;t=arrayMap(t,function(t){return t=castPath(t,e),r||(r=t.length>1),t}),copyObject(e,getAllKeysIn(e),n),r&&(n=baseClone(n,p|h|m,customOmitClone));for(var o=t.length;o--;)baseUnset(n,t[o]);return n}),to=flatRest(function(e,t){return null==e?{}:basePick(e,t)}),no=createToPairs(keys),ro=createToPairs(keysIn),oo=createCompounder(function(e,t,n){return t=t.toLowerCase(),e+(n?capitalize(t):t)}),io=createCompounder(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ao=createCompounder(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),so=createCaseFirst("toLowerCase"),co=createCompounder(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),uo=createCompounder(function(e,t,n){return e+(n?" ":"")+fo(t)}),lo=createCompounder(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),fo=createCaseFirst("toUpperCase"),po=baseRest(function(e,t){try{return apply(e,i,t)}catch(e){return isError(e)?e:new r(e)}}),ho=flatRest(function(e,t){return arrayEach(t,function(t){t=toKey(t),baseAssignValue(e,t,Cr(e[t],e))}),e}),mo=createFlow(),go=createFlow(!0),vo=baseRest(function(e,t){return function(n){return baseInvoke(n,e,t)}}),yo=baseRest(function(e,t){return function(n){return baseInvoke(e,n,t)}}),bo=createOver(arrayMap),_o=createOver(arrayEvery),Co=createOver(arraySome),wo=createRange(),So=createRange(!0),Do=createMathOperation(function(e,t){return e+t},0),ko=createRound("ceil"),Eo=createMathOperation(function(e,t){return e/t},1),Ao=createRound("floor"),xo=createMathOperation(function(e,t){return e*t},1),No=createRound("round"),Oo=createMathOperation(function(e,t){return e-t},0);return lodash.after=after,lodash.ary=ary,lodash.assign=$r,lodash.assignIn=Ur,lodash.assignInWith=Wr,lodash.assignWith=zr,lodash.at=Gr,lodash.before=before,lodash.bind=Cr,lodash.bindAll=ho,lodash.bindKey=wr,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=fr,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=Hr,lodash.defaultsDeep=Kr,lodash.defer=Sr,lodash.delay=Dr,lodash.difference=Kn,lodash.differenceBy=Jn,lodash.differenceWith=Qn,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=mo,lodash.flowRight=go,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=mr,lodash.initial=initial,lodash.intersection=Yn,lodash.intersectionBy=Xn,lodash.intersectionWith=Zn,lodash.invert=Jr,lodash.invertBy=Qr,lodash.invokeMap=gr,lodash.iteratee=iteratee,lodash.keyBy=vr,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=Xr,lodash.mergeWith=Zr,lodash.method=vo,lodash.methodOf=yo,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=eo,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=bo,lodash.overArgs=kr,lodash.overEvery=_o,lodash.overSome=Co,lodash.partial=Er,lodash.partialRight=Ar,lodash.partition=yr,lodash.pick=to,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=er,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=tr,lodash.range=wo,lodash.rangeRight=So,lodash.rearg=xr,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=br,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=no,lodash.toPairsIn=ro,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=nr,lodash.unionBy=rr,lodash.unionWith=or,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=ir,lodash.words=words,lodash.wrap=wrap,lodash.xor=ar,lodash.xorBy=sr,lodash.xorWith=cr,lodash.zip=ur,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=lr,lodash.entries=no,lodash.entriesIn=ro,lodash.extend=Ur,lodash.extendWith=Wr,mixin(lodash,lodash),lodash.add=Do,lodash.attempt=po,lodash.camelCase=oo,lodash.capitalize=capitalize,lodash.ceil=ko,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=Eo,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=pr,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=hr,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=Ao,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=Nr,lodash.gte=Or,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=Yr,lodash.isArguments=Ir,lodash.isArray=Pr,lodash.isArrayBuffer=Rr,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=Tr,lodash.isDate=jr,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=Fr,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=Mr,lodash.isSafeInteger=isSafeInteger,lodash.isSet=Lr,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=Vr,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=io,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=ao,lodash.lowerFirst=so,lodash.lt=Br,lodash.lte=qr,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=xo,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=_r,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=No,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=co,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=uo,lodash.startsWith=startsWith,lodash.subtract=Oo,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=lo,lodash.upperFirst=fo,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var e={};return baseForOwn(lodash,function(t,n){dt.call(lodash.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),lodash.VERSION=a,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){lodash[e].placeholder=lodash}),arrayEach(["drop","take"],function(e,t){LazyWrapper.prototype[e]=function(n){n=n===i?1:Bt(toInteger(n),0);var r=this.__filtered__&&!t?new LazyWrapper(this):this.clone();return r.__filtered__?r.__takeCount__=qt(n,r.__takeCount__):r.__views__.push({size:qt(n,V),type:e+(r.__dir__<0?"Right":"")}),r},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),arrayEach(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==P||n==T;LazyWrapper.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:getIteratee(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),arrayEach(["head","last"],function(e,t){var n="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[n](1).value()[0]}}),arrayEach(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[n](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(e){return this.filter(e).head()},LazyWrapper.prototype.findLast=function(e){return this.reverse().find(e)},LazyWrapper.prototype.invokeMap=baseRest(function(e,t){return"function"==typeof e?new LazyWrapper(this):this.map(function(n){return baseInvoke(n,e,t)})}),LazyWrapper.prototype.reject=function(e){return this.filter(negate(getIteratee(e)))},LazyWrapper.prototype.slice=function(e,t){e=toInteger(e);var n=this;return n.__filtered__&&(e>0||t<0)?new LazyWrapper(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(t=toInteger(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},LazyWrapper.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(V)},baseForOwn(LazyWrapper.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=lodash[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(lodash.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof LazyWrapper,u=s[0],l=c||Pr(t),d=function(e){var t=o.apply(lodash,arrayPush([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,m=c&&!p;if(!a&&l){t=m?t:new LazyWrapper(this);var g=e.apply(t,s);return g.__actions__.push({func:thru,args:[d],thisArg:i}),new LodashWrapper(g,f)}return h&&m?e.apply(this,s):(g=this.thru(d),h?r?g.value()[0]:g.value():g)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(e){var t=at[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);lodash.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Pr(o)?o:[],e)}return this[n](function(n){return t.apply(Pr(n)?n:[],e)})}}),baseForOwn(LazyWrapper.prototype,function(e,t){var n=lodash[t];if(n){var r=n.name+"",o=un[r]||(un[r]=[]);o.push({name:t,func:n})}}),un[createHybrid(i,b).name]=[{name:"wrapper",func:i}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=dr,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,
At&&(lodash.prototype[At]=wrapperToIterator),lodash},kn=Dn();cn._=kn,r=function(){return kn}.call(t,n,t,o),!(r!==i&&(o.exports=r))}).call(this)}).call(t,function(){return this}(),n(107)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports='<div class="">\n  <div class="navbar navbar-danger">\n    <div class="container-fluid">\n      <div class="navbar-header">\n        <ul class="navbar-toggle">\n          <li class="dropdown">\n            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-option-vertical"></i></a>\n            <ul class="dropdown-menu">\n\n              <li class="dropdown-header">Preferences</li>\n              <li><a [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li role="separator" class="divider"></li>\n              <li>\n                <a href="javascript:void(0)" (click)="displayTypeChange()">\n                  {{displayList ? \'Grid View\' : \'List View\'}}\n                </a>\n              </li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/about\']">About</a></li>\n            </ul>\n          </li>\n        </ul>\n        <a href="javascript:void(0)" class="navbar-brand" [routerLink]="[\'/notes\']">Preserver </a>\n        <span class="navbar-brand"><i class="fa fa-angle-right" aria-hidden="true"></i>&nbsp;&nbsp;Recycle Bin</span>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="nav navbar-nav navbar-right">\n          <li>\n            <a href="javascript:void(0)" (click)="displayTypeChange()">\n              <i class="{{displayList ? \'fa fa-bars\' : \'fa fa-th\'}}"></i>\n            </a>\n          </li>\n          <li class="dropdown">\n            <a href="javascript:void(0)" data-target="#" class="dropdown-toggle" data-toggle="dropdown">\n              <i class="glyphicon glyphicon-option-vertical"></i>\n            </a>\n            <ul class="dropdown-menu">\n              <li class="dropdown-header">Preferences</li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li class="divider"></li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/about\']">About</a></li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <spinner *ngIf="spinner"></spinner>\n  <div class="{{ displayList ? \'container note animate\' : \'container note grid-container animate\'}}">\n    <div *ngFor=\'let text of notes\' class="{{ displayList ? \'panel panel-default \' + text.doc.color : \'panel panel-default grid-item \' + text.doc.color}}" #noteRow [attr.id]="text.doc._id">\n      <div class="panel-body my-note module line-clamp">\n        <p><strong>{{text.doc?.title}}</strong></p>\n        <p>{{text.doc?.note}}</p>\n      </div>\n      <div class="{{ \'panel-footer \' + text.doc.color}}">\n        <ul class="note-footer">\n          <li class="dropup">\n            <a class="btn btn-link btn-raised"\n              title="Delete forever" data-target="#deleteNote" data-toggle="modal" (click)="setDeleteNote(text, noteRow)">\n              <i class="fa fa-trash"></i>\n            </a>\n          </li>\n          <li>\n            <a class="btn btn-link btn-raised"\n              title="Restore" (click)="restoreNote(text, noteRow)">\n              <i class="fa fa-undo"></i>\n            </a>\n          </li>\n        </ul>\n      </div>\n      <div class="modal fade" id="{{\'note\' + text.doc._id}}" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n          <div class="{{\'modal-content \' + text.doc.color}}">\n            <div class="modal-header">\n              <h4 class="modal-title">\n                <p class=""><strong>{{text.doc.title}}</strong></p>\n              </h4>\n            </div>\n            <div class="modal-body">\n              <p class="edit-saved-textera">{{text.doc.note}}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="deleteNote">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n          <h4 class="modal-title">Delete note forever?</h4>\n        </div>\n        <div class="modal-body">\n          <p></p>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">CANCEL</button>\n          <button type="button" class="btn btn-primary btn-sm delete-model-btn" data-dismiss="modal" (click)="deleteNote()">DELETE</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <simple-notifications [options]="notificationOptions"></simple-notifications>\n  <div class="container empty-notes-container" *ngIf="emptyHtmlMsg">\n    <div class="empty-notes-icon empty-bin"></div>\n    <div class="empty-notes">No notes in Recycle Bin</div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(29),s=n(74),c=n(106),u=function(){function HomeComponent(e,t,n){var r=this;this._dragulaService=e,this._notesService=t,this._notificationsService=n,this.spinner=!0,this.displayList=!1,this.inputFocusClass=!1,this.notes_table=l,this.emptyHtmlMsg=!1,this.notes=[],this.draft={},this.editNoteDraft={},this.toEditNote=null,this.remindMe={date:null,repeat:"doesnotrepeat",noteToSet:null},this.order=[],this.orderNotes=[],this.notificationOptions={timeOut:2e3,lastOnBottom:!0,clickToClose:!0,showProgressBar:!1,pauseOnHover:!0,preventDuplicates:!1,theClass:"notes-notifications notes",rtl:!1};var o=new Date;o.setDate(o.getDate()-1),this.date2MinDate=o,e.dropModel.subscribe(function(e){r.onDropModel(e.slice(1))}),this.displayList="true"==localStorage.getItem("displayNotesTypeList")}return HomeComponent.prototype.ngOnInit=function(){var e=this;this.subscription=this._notesService.notes_tables$.subscribe(function(t){return e.notes_table=t}),this.refreshNotesTables()},HomeComponent.prototype._setInputFocus=function(e){this.inputFocusClass=e},HomeComponent.prototype.onDropModel=function(e){var t=(e[0],e[1],e[2],[]);this.notes.forEach(function(e){t.push(e.doc._id)}),localStorage.setItem("order",JSON.stringify(t))},HomeComponent.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},HomeComponent.prototype.refreshNotesTables=function(){var e=this;this._notesService.getNotes("notes").then(function(t){e.notes_table=t.rows;var n=[];n=e.notes_table,localStorage.getItem("order")&&(e.order=JSON.parse(localStorage.getItem("order"))),e.notes=[],e.order.forEach(function(t){n.forEach(function(n){String(n.doc._id)===String(t)&&e.notes.push(n)})}),c.isEmpty(e.notes)?e.emptyHtmlMsg=!0:e.emptyHtmlMsg=!1,e.spinner=!1},function(t){e.spinner=!1})},HomeComponent.prototype.saveNote=function(e,t){var n=this;c.trim(this.draft.title)||c.trim(this.draft.note)?(this.draft._id="note_"+Math.floor(Date.now()/1e3),this.draft.color="label-default",this.draft.time=(new Date).toISOString(),this.draft.label="",this.draft.reminder=null,this.draft.restore="note",this._notesService.saveNote("notes",this.draft).then(function(e){t.placeholder="Write a note",t.style.height="auto",t.style.height="48px",n.updateOrder(n.draft),n.inputFocusClass=!1,n.draft={},n.refreshNotesTables()},function(e){n.draft={},t.placeholder="Write a note",t.style.height="auto",t.style.height="48px"})):(t.placeholder="Write a note",t.style.height="auto",t.style.height="48px",t.value=null,this.inputFocusClass=!1)},HomeComponent.prototype.deleteNote=function(e,t){var n=this;t.className+=this.displayList?" animated bounceOutRight":" animated zoomOut",setTimeout(function(){n._notesService.deleteNote("notes",e.doc).then(function(t){n._notificationsService.success("Done","Note moved to Recycle Bin"),n.deleteFromOrder(e),n.refreshNotesTables()});var t=e.doc;delete t._rev,n._notesService.saveNote("binNotes",t)},200)},HomeComponent.prototype.setNoteColor=function(e,t){var n=this;t.doc.color!=e&&(t.doc.color=e,this._notesService.updateNote("notes",t.doc).then(function(e){n.refreshNotesTables()}))},HomeComponent.prototype.setRemindMeNote=function(e){this.remindMe.noteToSet=e},HomeComponent.prototype.setReminderClick=function(){var e=this;this.remindMe.date&&(this.remindMe.noteToSet.doc.reminder={date:this.remindMe.date.toString(),repeat:this.remindMe.repeat},this._notesService.updateNote("notes",this.remindMe.noteToSet.doc).then(function(t){e.remindMe.date=null,e.remindMe.repeat="doesnotrepeat",e.remindMe.noteToSet=null,e._notesService.updateReminderTable("notes"),e.refreshNotesTables(),e._notificationsService.alert("Done","Reminder set")},function(t){e.editNoteDraft={}}))},HomeComponent.prototype.removeReminder=function(e){e.doc.reminder=null,this._notesService.updateNote("notes",e.doc),this._notesService.updateReminderTable("notes"),this.refreshNotesTables()},HomeComponent.prototype.updateModalNote=function(e){var t=this;e.doc.note=this.editNoteDraft.note,e.doc.title=this.editNoteDraft.title,this._notesService.updateNote("notes",e.doc).then(function(e){t.editNoteDraft={},t.refreshNotesTables()},function(e){t.editNoteDraft={}})},HomeComponent.prototype.editModalNoteClick=function(e){this.toEditNote=e,this.editNoteDraft.title=e.doc.title,this.editNoteDraft.note=e.doc.note},HomeComponent.prototype.makeArchive=function(e,t){var n=this;t.className+=this.displayList?" animated bounceOutLeft":" animated flipOutY",setTimeout(function(){n._notesService.deleteNote("notes",e.doc).then(function(t){n._notificationsService.success("Done","Note archived"),n.deleteFromOrder(e),n.refreshNotesTables()});var t=e;delete t.doc._rev,t.doc.restore="archive",n._notesService.saveNote("archiveNotes",t.doc).then(function(e){n.updateArchiveOrder(t.doc)})},200)},HomeComponent.prototype.displayTypeChange=function(){this.displayList=!this.displayList,localStorage.setItem("displayNotesTypeList",String(this.displayList))},HomeComponent.prototype.deleteFromOrder=function(e){var t=this.order.indexOf(this.order.filter(function(t){return String(t)===String(e.doc._id)})[0]);t!==-1&&(this.order.splice(t,1),localStorage.setItem("order",JSON.stringify(this.order)))},HomeComponent.prototype.updateOrder=function(e){var t=[];localStorage.getItem("order")?(t=JSON.parse(localStorage.getItem("order")),t.unshift(e._id)):t.push(e._id),localStorage.setItem("order",JSON.stringify(t))},HomeComponent.prototype.updateArchiveOrder=function(e){var t=[];localStorage.getItem("archiveOrder")?(t=JSON.parse(localStorage.getItem("archiveOrder")),t.unshift(e._id)):t.push(e._id),localStorage.setItem("archiveOrder",JSON.stringify(t))},HomeComponent=r([i.Component({selector:"Home",template:n(110)}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.DragulaService&&s.DragulaService)&&e||Object,"function"==typeof(t="undefined"!=typeof s.NotesTableService&&s.NotesTableService)&&t||Object,"function"==typeof(u="undefined"!=typeof a.NotificationsService&&a.NotificationsService)&&u||Object])],HomeComponent);var e,t,u}();t.HomeComponent=u;var l=[]},function(e,t){e.exports='<div class="">\n  <div class="navbar navbar-default">\n    <div class="container-fluid">\n      <div class="navbar-header">\n        <ul class="navbar-toggle">\n          <li class="dropdown">\n            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-option-vertical"></i></a>\n            <ul class="dropdown-menu">\n              <li class="dropdown-header">Preferences</li>\n              <li><a [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li role="separator" class="divider"></li>\n              <li>\n                <!-- <a href="javascript:void(0)" (click)="displayTypeChange()">\n                  {{displayList ? \'Grid View\' : \'List View\'}}\n                </a> -->\n              </li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/about\']">About</a></li>\n            </ul>\n          </li>\n        </ul>\n        <a href="javascript:void(0)" class="navbar-brand" [routerLink]="[\'/notes\']">Keeper </a>\n        <span class="navbar-brand"><i class="fa fa-angle-right" aria-hidden="true"></i>&nbsp;&nbsp;Notes</span>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="nav navbar-nav navbar-right">\n          <li>\n            <a href="javascript:void(0)" (click)="displayTypeChange()">\n              <i class="{{displayList ? \'fa fa-th\' : \'fa fa-bars\'}}"></i>\n            </a>\n          </li>\n          <!-- <li class="dropdown">\n            <a href="javascript:void(0)" data-target="#" class="dropdown-toggle" data-toggle="dropdown">\n              <i class="glyphicon glyphicon-option-vertical"></i>\n            </a>\n            <ul class="dropdown-menu">\n              <li class="dropdown-header">Preferences</li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li class="divider"></li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/about\']">About</a></li>\n            </ul>\n          </li> -->\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class="container">\n      <div class="panel panel-default note-editor animated bounceInDown">\n        <div class="panel-body">\n          <div class="form-group label-floating" *ngIf="inputFocusClass">\n             <input type="text" class="form-control" placeholder="Title" [(ngModel)]="draft.title" >\n          </div>\n          <div class="form-group label-floating">\n             <textarea class="form-control" #textarea autosize placeholder="Write a note" [(ngModel)]="draft.note" (focus)="_setInputFocus(true)"></textarea>\n          </div>\n          <div class="form-group" *ngIf="inputFocusClass">\n            <button class="btn btn-primary btn-sm pull-right" (click)="saveNote($event, textarea)">Save</button>\n          </div>\n        </div>\n      </div>\n  </div>\n  <spinner *ngIf="spinner"></spinner>\n  <div class="{{ displayList ? \'container note animate\' : \'container note grid-container animate\'}}" [dragula]=\'"another-bag"\' [dragulaModel]=\'notes\'>\n    <div *ngFor=\'let text of notes\' class="{{ displayList ? \'panel panel-default \' + text.doc.color : \'panel panel-default grid-item \' + text.doc.color}}" #noteRow [attr.id]="text.doc._id">\n      <div data-toggle="modal" data-target="#note_edit_modal" (click)="editModalNoteClick(text)">\n        <div class="panel-body my-note module line-clamp">\n          <p><strong>{{text.doc.title}}</strong></p>\n          <p>{{text.doc.note}}</p>\n        </div>\n      </div>\n      <div class="{{ \'panel-footer \' + text.doc.color}}">\n        <ul class="note-footer">\n          <!-- <li><a data-toggle="modal"\n                 data-target="#remind_me_modal"\n                 (click)="setRemindMeNote(text)"\n                 class="btn btn-link btn-raised"\n                 title="Remind">\n                <i class="fa fa-bell"></i>\n              </a>\n          </li> -->\n          <!-- <li><a href="javascript:void(0)" class="btn btn-link btn-raised"\n             title="Archive" (click)="makeArchive(text, noteRow)">\n            <i class="fa fa-download"></i>\n          </a></li> -->\n          <li class="dropup">\n            <a data-target="#" class="btn btn-link btn-raised dropup"\n              title="Color" data-toggle="dropdown">\n              <i class="fa fa-th-large"></i>\n            </a>\n            <ul class="dropdown-menu">\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-default\', text)" class="btn btn-default btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-primary\', text)" class="btn btn-primary btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-success\', text)" class="btn btn-success btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-info\', text)" class="btn btn-info btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-warning\', text)" class="btn btn-warning btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-danger\', text)" class="btn btn-danger btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-darkgray\', text)" class="btn btn-darkgray btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-primary-old\', text)" class="btn btn-primary-old btn-fab-mini"><i class=""></i></a></li>\n            </ul>\n          </li>\n          <li>\n            <a href="javascript:void(0)" class="btn btn-link btn-raised"\n                title="Delete" (click)="deleteNote(text, noteRow)">\n                <i class="fa fa-trash"></i>\n              </a>\n          </li>\n        </ul>\n      </div>\n      <div class="{{text.doc.color + \' reminder-info\'}}" *ngIf="text.doc.reminder">\n        <i class="fa fa-clock-o"></i> {{text.doc.reminder?.date}}<span class="pull-right"><a href="javascript:void(0)" (click)="removeReminder(text)"><i class="fa fa-times-circle"></i></a></span>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="note_edit_modal" tabindex="-1" role="dialog" aria-hidden="true" *ngIf="toEditNote">\n    <div class="modal-dialog">\n      <div class="{{\'modal-content edit-saved \' + toEditNote?.doc?.color}}">\n        <div class="modal-header">\n          <h4 class="modal-title">\n            <div class="form-group label-floating">\n            <input type="text" class="form-control edit-saved-input" placeholder="Title" [(ngModel)]="editNoteDraft.title" [value]="toEditNote?.doc?.title" >\n            </div>\n          </h4>\n        </div>\n        <div class="modal-body">\n          <textarea class="form-control edit-saved-textera" #editSavedTextarea modaleditorautosize placeholder="Write a note" [(ngModel)]="editNoteDraft.note" [value]="editNoteDraft?.doc?.note"></textarea>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" (click)="updateModalNote(toEditNote)">Done</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="remind_me_modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n          <h4 class="modal-title">Remind Me</h4>\n        </div>\n        <div class="modal-body">\n          <label><i class="fa fa-clock-o"></i> Set date and time</label>\n          <div class="form-group">\n              <input class="form-control"\n                    readonly="readonly"\n                    required\n                    placeholder="Set your schedule here"\n                    [(ngModel)]="remindMe.date"\n                    [min-date]="date2MinDate"\n                    ngui-datetime-picker>\n          </div>\n          <div class="form-group">\n            <select id="s1" class="form-control" [(ngModel)]="remindMe.repeat">\n              <option value="doesnotrepeat">Doesn\'t repeat</option>\n              <option value="daily">Daily</option>\n              <option value="weekly">Weekly</option>\n              <option value="monthly">Monthly</option>\n              <option value="yearly">Yearly</option>\n            </select>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" (click)="remindMe.date = null">CANCEL</button>\n          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" (click)="setReminderClick()">SET</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <simple-notifications [options]="notificationOptions"></simple-notifications>\n  <div class="container empty-notes-container" *ngIf="emptyHtmlMsg">\n    <h3 class="empty-notes-icon empty-notes-main"><i class="fa fa-file-text-o fa-5x"></i></h3>\n    <div class="empty-notes">Notes that you add appear here</div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function AboutComponent(){}return AboutComponent=r([i.Component({selector:"about",template:n(112),styles:[n(113)]}),o("design:paramtypes",[])],AboutComponent)}();t.AboutComponent=a},function(e,t){e.exports='<div class="about">\n\n  <div class="profile-card">\n\n    <div class="header">\n\n      <a href="#" [routerLink]="[\'/notes\']">\n        <img [src]="\'/public/images/logo.png\'" />\n      </a>\n\n      <h1>Keeper</h1>\n\n    </div>\n\n    <div class="profile-bio">\n\n      <p>Organize your life with preserver application for keeping track of notes, tasks, and to-do lists.</p>\n\n    </div>\n\n    <ul class="profile-social-links">\n\n      <li>\n        <a href="#" [routerLink]="[\'/notes\']">\n          <i class="fa fa-arrow-left"></i>\n        </a>\n      </li>\n\n      <!-- <li>\n        <a href="https://github.com/hsbalar/Preserver" target="_blank">\n          <i class="fa fa-github"></i>\n        </a>\n      </li>\n\n      <li>\n        <a href="https://twitter.com/Hsbalar" target="_blank">\n          <i class="fa fa-twitter"></i>\n        </a>\n      </li> -->\n\n    </ul>\n  </div>\n</div>\n'},function(e,t){e.exports='.about {\n\tbackground: #bcdee7 url("/public/images/bg.png") no-repeat center center fixed;\n    background-size: 120% auto;\n    position: fixed;\n\tpadding: 0px;\n\tmargin: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tfont: normal 14px/1.618em "Hind", sans-serif;\n\t-webkit-font-smoothing: antialiased;\n}\n\nh1, h2 {\n    font-weight: 400;\n    margin: 0px 0px 5px 0px;\n}\nh1 {\n    font-size: 24px;\n}\nh2 {\n    font-size: 16px;\n}\np {\n    margin: 0px;\n}\n\n.back {\n    bottom: 0;\n    padding: 40px 0px 0px 20px;\n}\n\n.profile-card {\n\tbackground: #FFB300;\n\twidth: 56px;\n\theight: 56px;\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n    z-index: 2;\n\toverflow: hidden;\n    opacity: 0;\n    margin-top: 70px;\n\t-webkit-transform: translate(-50%, -50%);\n\ttransform: translate(-50%, -50%);\n\t-webkit-border-radius: 50%;\n\tborder-radius: 50%;\n\t-webkit-box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16), 0px 3px 6px rgba(0, 0, 0, 0.23);\n\tbox-shadow: 0px 3px 6px rgba(0 ,0, 0, 0.16), 0px 3px 6px rgba(0, 0, 0, 0.23);\n    -webkit-animation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 1.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_landscape 0.5s 1.2s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n    animation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 1.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_landscape 0.5s 1.2s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n}\n.profile-card .header {\n    padding: 40px 20px 30px 20px;\n    display: inline-block;\n\tbackground: #FFFFFF;\n    color: #000000;\n    margin-top: 50px;\n    opacity: 0;\n    text-align: center;\n    -webkit-animation: moveIn 1s 1.1s ease forwards;\n    animation: moveIn 1s 1.1s ease forwards;\n}\n.profile-card .header h1 {\n    color: #FF5722;\n}\n.profile-card .header a {\n    display: inline-block;\n    text-align: center;\n    position: relative;\n    margin: 25px 30px;\n}\n\n.profile-card .header a > img {\n    width: 120px;\n    max-width: 100%;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n    -webkit-transition: -webkit-box-shadow 0.3s ease;\n    transition: box-shadow 0.3s ease;\n}\n.profile-card .header a:hover > img {\n    -webkit-box-shadow: 0px 0px 0px 12px rgba(0, 0, 0, 0.1);\n    box-shadow: 0px 0px 0px 12px rgba(0, 0, 0, 0.1);\n}\n.profile-card .profile-bio {\n    width: 175px;\n    height: 180px;\n    display: inline-block;\n    padding: 50px 20px 30px 20px;\n\tbackground: #FFFFFF;\n    color: #333333;\n    margin-top: 50px;\n    text-align: center;\n    opacity: 0;\n    -webkit-animation: moveIn 1s 1s ease forwards;\n    animation: moveIn 1s 1s ease forwards;\n}\n.profile-social-links {\n    width: 218px;\n    display: inline-block;\n    margin: 0px;\n    padding: 15px 20px;\n\tbackground: #FFFFFF;\n    margin-top: 50px;\n    text-align: center;\n    opacity: 0;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    -webkit-animation: moveIn 1s 1.1s ease forwards;\n    animation: moveIn 1s 1.1s ease forwards;\n}\n.profile-social-links li {\n    list-style: none;\n    margin: -5px 0px 0px 0px;\n    padding: 0px;\n    float: left;\n    width: 33.3%;\n    text-align: center;\n}\n.profile-social-links li a {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    padding: 6px;\n    position: relative;\n    overflow: hidden!important;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n}\n.profile-social-links li a {\n    position: relative;\n    z-index: 1;\n}\n.profile-social-links li a:before {\n    display: block;\n    content: "";\n    background: rgba(0, 0, 0, 0.3);\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 36px;\n    height: 36px;\n    opacity: 1;\n    -webkit-transition: transform 0.4s ease, opacity 1s ease-out;\n    transition: transform 0.4s ease, opacity 1s ease-out;\n    -webkit-transform: scale3d(0, 0, 1);\n    transform: scale3d(0, 0, 1);\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n}\n.profile-social-links li a:hover:before {\n    -webkit-animation: ripple 1s ease forwards;\n    animation: ripple 1s ease forwards;\n}\n.profile-social-links li a,\n.profile-social-links li a {\n    width: 24px;\n}\n\n\n@media screen and (min-aspect-ratio: 4/3) {\n    body {\n        background-size: 100% auto;\n    }\n    body:before {\n        width: 0px;\n    }\n    @-webkit-keyframes puff {\n        0% {\n            top: 100%;\n            width: 0px;\n            padding-bottom: 0px;\n        }\n    \t100% {\n            top: 50%;\n            width: 100%;\n            padding-bottom: 100%;\n        }\n    }\n    @keyframes puff {\n        0% {\n            top: 100%;\n            width: 0px;\n            padding-bottom: 0px;\n        }\n    \t100% {\n            top: 50%;\n            width: 100%;\n            padding-bottom: 100%;\n        }\n    }\n}\n@media screen and (min-height: 480px) {\n\t.profile-card {\n\t\t-webkit-animation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_portrait 0.5s 1s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n\t\tanimation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_portrait 0.5s 1s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n\t}\n\t.profile-card header {\n        width: auto;\n        height: auto;\n        padding: 30px 20px;\n        display: block;\n        float: none;\n        border-right: none;\n    }\n    .profile-card .profile-bio {\n        width: auto;\n        height: auto;\n        padding: 15px 20px 30px 20px;\n        display: block;\n        float: none;\n    }\n    .profile-social-links {\n        width: 100%;\n        display: block;\n        float: none;\n    }\n}\n@media screen and (min-aspect-ratio: 4/3) {\n    body {\n        background-size: 100% auto;\n    }\n    body:before {\n        width: 0px;\n\t\t-webkit-animation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_portrait 0.5s 2.7s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n\t\tanimation: init 0.1s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 0.3s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 0.5s 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia_portrait 0.5s 2.7s cubic-bezier(0.86, 0, 0.07, 1) forwards;\n\t}\n}\n@-webkit-keyframes init {\n    0% {\n    \twidth: 0px;\n    \theight: 0px;\n    }\n\t100% {\n        width: 56px;\n        height: 56px;\n        margin-top: 0px;\n        opacity: 1;\n    }\n}\n@keyframes init {\n    0% {\n    \twidth: 0px;\n    \theight: 0px;\n    }\n\t100% {\n        width: 56px;\n        height: 56px;\n        margin-top: 0px;\n        opacity: 1;\n    }\n}\n@-webkit-keyframes puff_portrait {\n    0% {\n        top: 100%;\n        height: 0px;\n        padding: 0px;\n    }\n\t100% {\n        top: 50%;\n        height: 100%;\n        padding: 0px 100%;\n    }\n}\n@keyframes puff_portrait {\n    0% {\n        top: 100%;\n        height: 0px;\n        padding: 0px;\n    }\n\t100% {\n        top: 50%;\n        height: 100%;\n        padding: 0px 100%;\n    }\n}\n@-webkit-keyframes puff_landscape {\n\t0% {\n\t\ttop: 100%;\n\t\twidth: 0px;\n\t\tpadding-bottom: 0px;\n\t}\n\t100% {\n\t\ttop: 50%;\n\t\twidth: 100%;\n\t\tpadding-bottom: 100%;\n\t}\n}\n@keyframes puff_landscape {\n\t0% {\n\t\ttop: 100%;\n\t\twidth: 0px;\n\t\tpadding-bottom: 0px;\n\t}\n\t100% {\n\t\ttop: 50%;\n\t\twidth: 100%;\n\t\tpadding-bottom: 100%;\n\t}\n}\n@-webkit-keyframes borderRadius {\n    0% {\n        -webkit-border-radius: 50%;\n    }\n\t100% {\n        -webkit-border-radius: 0px;\n    }\n}\n@keyframes borderRadius {\n    0% {\n        -webkit-border-radius: 50%;\n    }\n\t100% {\n        border-radius: 0px;\n    }\n}\n@-webkit-keyframes moveDown {\n    0% {\n   \t    top: 50%;\n    }\n\t50% {\n\t   top: 40%;\n    }\n    100% {\n       top: 100%;\n    }\n}\n@keyframes moveDown {\n    0% {\n   \t    top: 50%;\n    }\n\t50% {\n\t   top: 40%;\n    }\n    100% {\n       top: 100%;\n    }\n}\n@-webkit-keyframes moveUp {\n    0% {\n        background: #FFB300;\n        top: 100%;\n    }\n\t50% {\n\t   top: 40%;\n    }\n    100% {\n       top: 50%;\n       background: #E0E0E0;\n    }\n}\n@keyframes moveUp {\n    0% {\n        background: #FFB300;\n        top: 100%;\n    }\n\t50% {\n\t   top: 40%;\n    }\n    100% {\n       top: 50%;\n       background: #E0E0E0;\n    }\n}\n@-webkit-keyframes materia_landscape {\n    0% {\n        background: #E0E0E0;\n    }\n    50% {\n        -webkit-border-radius: 4px;\n    }\n    100% {\n        width: 440px;\n        height: 280px;\n        background: #FFFFFF;\n        -webkit-border-radius: 4px;\n    }\n}\n@keyframes materia_landscape {\n    0% {\n        background: #E0E0E0;\n    }\n    50% {\n        border-radius: 4px;\n    }\n    100% {\n        width: 440px;\n        height: 280px;\n        background: #FFFFFF;\n        border-radius: 4px;\n    }\n}\n@-webkit-keyframes materia_portrait {\n\t0% {\n\t\tbackground: #E0E0E0;\n\t}\n\t50% {\n\t\t-webkit-border-radius: 4px;\n\t}\n\t100% {\n\t\twidth: 280px;\n\t\theight: 440px;\n\t\tbackground: #FFFFFF;\n\t\t-webkit-border-radius: 4px;\n\t}\n}\n@keyframes materia_portrait {\n\t0% {\n\t\tbackground: #E0E0E0;\n\t}\n\t50% {\n\t\tborder-radius: 4px;\n\t}\n\t100% {\n\t\twidth: 280px;\n\t\theight: 440px;\n\t\tbackground: #FFFFFF;\n\t\tborder-radius: 4px;\n\t}\n}\n@-webkit-keyframes moveIn {\n    0% {\n        margin-top: 50px;\n        opacity: 0;\n    }\n\t100% {\n        opacity: 1;\n        margin-top: -20px;\n    }\n}\n@keyframes moveIn {\n    0% {\n        margin-top: 50px;\n        opacity: 0;\n    }\n\t100% {\n        opacity: 1;\n        margin-top: -20px;\n    }\n}\n@-webkit-keyframes scaleIn {\n    0% {\n        -webkit-transform: scale(0);\n    }\n\t100% {\n        -webkit-transform: scale(1);\n    }\n}\n@keyframes scaleIn {\n    0% {\n        transform: scale(0);\n    }\n\t100% {\n        transform: scale(1);\n    }\n}\n@-webkit-keyframes ripple {\n    0% {\n        transform: scale3d(0, 0, 0);\n    }\n    50%, 100% {\n        -webkit-transform: scale3d(1, 1, 1);\n    }\n    100% {\n        opacity: 0;\n    }\n}\n@keyframes ripple {\n    0% {\n        transform: scale3d(0, 0, 0);\n    }\n    50%, 100% {\n        transform: scale3d(1, 1, 1);\n    }\n    100% {\n        opacity: 0;\n    }\n}\n';
},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(29),s=n(74),c=n(106),u=function(){function ArchiveComponent(e,t,n){var r=this;this._dragulaService=e,this._notesService=t,this._notificationsService=n,this.spinner=!0,this.displayList=!1,this.emptyHtmlMsg=!1,this.notes_table=l,this.notes=[],this.editNoteDraft={},this.toEditNote=null,this.remindMe={date:null,repeat:"doesnotrepeat",noteToSet:null},this.order=[],this.orderNotes=[],this.notificationOptions={timeOut:2e3,lastOnBottom:!0,clickToClose:!0,showProgressBar:!1,pauseOnHover:!0,preventDuplicates:!1,theClass:"notes-notifications archive",rtl:!1};var o=new Date;o.setDate(o.getDate()-1),this.date2MinDate=o,e.dropModel.subscribe(function(e){r.onDropModel(e.slice(1))}),this.displayList="true"==localStorage.getItem("displayArchiveTypeList")}return ArchiveComponent.prototype.ngOnInit=function(){var e=this;this.subscription=this._notesService.notes_tables$.subscribe(function(t){return e.notes_table=t}),this.refreshNotesTables()},ArchiveComponent.prototype.onDropModel=function(e){var t=(e[0],e[1],e[2],[]);this.notes.forEach(function(e){t.push(e.doc._id)}),localStorage.setItem("archiveOrder",JSON.stringify(t))},ArchiveComponent.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},ArchiveComponent.prototype.refreshNotesTables=function(){var e=this;this._notesService.getNotes("archiveNotes").then(function(t){e.notes_table=t.rows;var n=[];n=e.notes_table,localStorage.getItem("archiveOrder")&&(e.order=JSON.parse(localStorage.getItem("archiveOrder"))),e.notes=[],e.order.forEach(function(t){n.forEach(function(n){String(n.doc._id)===String(t)&&e.notes.push(n)})}),c.isEmpty(e.notes)?e.emptyHtmlMsg=!0:e.emptyHtmlMsg=!1,e.spinner=!1},function(t){e.spinner=!1})},ArchiveComponent.prototype.deleteNote=function(e,t){var n=this;t.className+=this.displayList?" animated bounceOutRight":" animated zoomOut",setTimeout(function(){n._notesService.deleteNote("archiveNotes",e.doc).then(function(t){n._notificationsService.success("Done","Note moved to Recycle Bin"),n.deleteFromOrder(e),n.refreshNotesTables()},function(e){console.log("Error",e)});var t=e.doc;delete t._rev,n._notesService.saveNote("binNotes",t)},150)},ArchiveComponent.prototype.setNoteColor=function(e,t){var n=this;t.doc.color!=e&&(t.doc.color=e,this._notesService.updateNote("archiveNotes",t.doc).then(function(e){n.refreshNotesTables()}))},ArchiveComponent.prototype.setRemindMeNote=function(e){this.remindMe.noteToSet=e},ArchiveComponent.prototype.setReminderClick=function(){var e=this;this.remindMe.date&&(this.remindMe.noteToSet.doc.reminder={date:this.remindMe.date.toString(),repeat:this.remindMe.repeat},this._notesService.updateNote("archiveNotes",this.remindMe.noteToSet.doc).then(function(t){e.remindMe.date=null,e.remindMe.repeat="doesnotrepeat",e.remindMe.noteToSet=null,e._notesService.updateReminderTable("archiveNotes"),e.refreshNotesTables(),e._notificationsService.alert("Done","Reminder set")},function(t){e.editNoteDraft={}}))},ArchiveComponent.prototype.removeReminder=function(e){e.doc.reminder=null,this._notesService.updateNote("archiveNotes",e.doc),this._notesService.updateReminderTable("archiveNotes"),this.refreshNotesTables()},ArchiveComponent.prototype.updateModalNote=function(e){var t=this;e.doc.note=this.editNoteDraft.note,e.doc.title=this.editNoteDraft.title,this._notesService.updateNote("archiveNotes",e.doc).then(function(e){t.editNoteDraft={},t.refreshNotesTables()},function(e){t.editNoteDraft={}})},ArchiveComponent.prototype.editModalNoteClick=function(e){this.toEditNote=e,this.editNoteDraft.title=e.doc.title,this.editNoteDraft.note=e.doc.note},ArchiveComponent.prototype.unArchive=function(e,t){var n=this;t.className+=this.displayList?" animated bounceOutLeft":" animated flipOutY",setTimeout(function(){n._notesService.deleteNote("archiveNotes",e.doc).then(function(t){n._notificationsService.success("Done","Note unarchived"),n.deleteFromOrder(e),n.refreshNotesTables()});var t=e;delete t.doc._rev,t.doc.restore="note",n._notesService.saveNote("notes",t.doc).then(function(e){n.updateNotesOrder(t.doc)})},100)},ArchiveComponent.prototype.displayTypeChange=function(){this.displayList=!this.displayList,localStorage.setItem("displayArchiveTypeList",String(this.displayList))},ArchiveComponent.prototype.deleteFromOrder=function(e){var t=this.order.indexOf(this.order.filter(function(t){return String(t)===String(e.doc._id)})[0]);t!==-1&&(this.order.splice(t,1),localStorage.setItem("archiveOrder",JSON.stringify(this.order)))},ArchiveComponent.prototype.updateNotesOrder=function(e){var t=[];localStorage.getItem("order")?(t=JSON.parse(localStorage.getItem("order")),t.unshift(e._id)):t.push(e._id),localStorage.setItem("order",JSON.stringify(t))},ArchiveComponent=r([i.Component({selector:"archive",template:n(115)}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.DragulaService&&s.DragulaService)&&e||Object,"function"==typeof(t="undefined"!=typeof s.NotesTableService&&s.NotesTableService)&&t||Object,"function"==typeof(u="undefined"!=typeof a.NotificationsService&&a.NotificationsService)&&u||Object])],ArchiveComponent);var e,t,u}();t.ArchiveComponent=u;var l=[]},function(e,t){e.exports='<div class="">\n  <div class="navbar navbar-info">\n    <div class="container-fluid">\n      <div class="navbar-header">\n        <ul class="navbar-toggle">\n          <li class="dropdown">\n            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-option-vertical"></i></a>\n            <ul class="dropdown-menu">\n              <li class="dropdown-header">Preferences</li>\n              <li><a [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li role="separator" class="divider"></li>\n              <li>\n                <a href="javascript:void(0)" (click)="displayTypeChange()">\n                  {{displayList ? \'Grid View\' : \'List View\'}}\n                </a>\n              </li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/About\']">About</a></li>\n            </ul>\n          </li>\n        </ul>\n        <a href="javascript:void(0)" class="navbar-brand" [routerLink]="[\'/notes\']">Preserver </a>\n        <span class="navbar-brand"><i class="fa fa-angle-right" aria-hidden="true"></i>&nbsp;&nbsp;Archive</span>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="nav navbar-nav navbar-right">\n          <li>\n            <a href="javascript:void(0)" (click)="displayTypeChange()">\n              <i class="{{displayList ? \'fa fa-th\' : \'fa fa-bars\'}}"></i>\n            </a>\n          </li>\n          <li class="dropdown">\n            <a href="javascript:void(0)" data-target="#" class="dropdown-toggle" data-toggle="dropdown">\n              <i class="glyphicon glyphicon-option-vertical"></i>\n            </a>\n            <ul class="dropdown-menu">\n              <li class="dropdown-header">Preferences</li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/notes\']">My Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/archive-notes\']">Archive Notes</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/recycle-bin\']">Recycle Bin</a></li>\n              <li class="divider"></li>\n              <li><a href="javascript:void(0)">Settings</a></li>\n              <li><a href="javascript:void(0)" [routerLink]="[\'/About\']">About</a></li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <spinner *ngIf="spinner"></spinner>\n  <div class="{{ displayList ? \'container note animate\' : \'container note grid-container animate\'}}" [dragula]=\'"another-bag"\' [dragulaModel]=\'notes\'>\n    <div *ngFor=\'let text of notes\' class="{{ displayList ? \'panel panel-default \' + text.doc.color : \'panel panel-default grid-item \' + text.doc.color}}" #noteRow [attr.id]="text.doc._id">\n      <div data-toggle="modal" data-target="#note_edit_modal" (click)="editModalNoteClick(text)">\n        <div class="panel-body my-note module line-clamp">\n          <p><strong>{{text.doc.title}}</strong></p>\n          <p>{{text.doc.note}}</p>\n        </div>\n      </div>\n      <div class="{{ \'panel-footer \' + text.doc.color}}">\n        <ul class="note-footer">\n          <li>\n            <a data-toggle="modal"\n               data-target="#remind_me_modal"\n               (click)="setRemindMeNote(text)"\n               class="btn btn-link btn-raised"\n               title="Remind">\n               <i class="fa fa-bell"></i>\n            </a>\n          </li>\n          <li><a href="javascript:void(0)" class="btn btn-link btn-raised"\n             title="Unarchive" (click)="unArchive(text, noteRow)">\n            <i class="fa fa-upload"></i>\n          </a></li>\n          <li class="dropup">\n            <a data-target="#" class="btn btn-link btn-raised dropup"\n              title="Color" data-toggle="dropdown">\n              <i class="fa fa-th-large"></i>\n            </a>\n            <ul class="dropdown-menu">\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-default\', text)" class="btn btn-default btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-primary\', text)" class="btn btn-primary btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-success\', text)" class="btn btn-success btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-info\', text)" class="btn btn-info btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-warning\', text)" class="btn btn-warning btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-danger\', text)" class="btn btn-danger btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-darkgray\', text)" class="btn btn-darkgray btn-fab-mini"><i class=""></i></a></li>\n              <li><a href="javascript:void(0)" (click)="setNoteColor(\'label-primary-old\', text)" class="btn btn-primary-old btn-fab-mini"><i class=""></i></a></li>\n            </ul>\n          </li>\n          <li><a href="javascript:void(0)" class="btn btn-link btn-raised"\n             title="Delete" (click)="deleteNote(text, noteRow)">\n            <i class="fa fa-trash"></i>\n          </a></li>\n        </ul>\n      </div>\n      <div class="{{text.doc.color + \' reminder-info\'}}" *ngIf="text.doc.reminder">\n        <i class="fa fa-clock-o"></i> {{text.doc.reminder?.date}}<span class="pull-right"><a href="javascript:void(0)" (click)="removeReminder(text)"><i class="fa fa-times-circle"></i></a></span>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="note_edit_modal" tabindex="-1" role="dialog" aria-hidden="true">\n    <div class="modal-dialog">\n      <div class="{{\'modal-content edit-saved \' + toEditNote?.doc?.color}}">\n        <div class="modal-header">\n          <h4 class="modal-title">\n            <div class="form-group label-floating">\n            <input type="text" class="form-control edit-saved-input" placeholder="Title" [(ngModel)]="editNoteDraft.title" [value]="toEditNote?.doc.title" >\n            </div>\n          </h4>\n        </div>\n        <div class="modal-body">\n          <textarea class="form-control edit-saved-textera" #editSavedTextarea modaleditorautosize placeholder="Write a note" [(ngModel)]="editNoteDraft.note" [value]="toEditNote?.doc.note"></textarea>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" (click)="updateModalNote(toEditNote)">Done</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="remind_me_modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n          <h4 class="modal-title">Remind Me</h4>\n        </div>\n        <div class="modal-body">\n          <label><i class="fa fa-clock-o"></i> Set date and time</label>\n          <div class="form-group">\n              <input class="form-control"\n                    readonly="readonly"\n                    required\n                    placeholder="Set your schedule here"\n                    [(ngModel)]="remindMe.date"\n                    [min-date]="date2MinDate"\n                    ngui-datetime-picker>\n          </div>\n          <div class="form-group">\n            <select id="s1" class="form-control" [(ngModel)]="remindMe.repeat">\n              <option value="doesnotrepeat">Doesn\'t repeat</option>\n              <option value="daily">Daily</option>\n              <option value="weekly">Weekly</option>\n              <option value="monthly">Monthly</option>\n              <option value="yearly">Yearly</option>\n            </select>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal" (click)="remindMe.date = null">CANCEL</button>\n          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" (click)="setReminderClick()">SET</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <simple-notifications [options]="notificationOptions"></simple-notifications>\n  <div class="container empty-notes-container" *ngIf="emptyHtmlMsg">\n    <div class="empty-notes-icon empty-archive"></div>\n    <div class="empty-notes">Your archived notes appear here</div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(74),s=function(){function AppComponent(e){this._notesService=e,this._notesService.updateReminderTable("notes"),this._notesService.updateReminderTable("archiveNotes"),this._notesService.reminderTickStart()}return AppComponent.prototype.ngAfterViewInit=function(){$.material.init()},AppComponent=r([i.Component({selector:"my-app",template:"<router-outlet></router-outlet>"}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof a.NotesTableService&&a.NotesTableService)&&e||Object])],AppComponent);var e}();t.AppComponent=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(95),s=n(74),c=function(){function Dragula(e,t){this.el=e,this.dragulaService=t,this.container=e.nativeElement}return Dragula.prototype.ngOnInit=function(){var e=this,t=this.dragulaService.find(this.bag),n=function(){e.dragulaModel&&(e.drake.models?e.drake.models.push(e.dragulaModel):e.drake.models=[e.dragulaModel])};t?(this.drake=t.drake,n(),this.drake.containers.push(this.container)):(this.drake=a({containers:[this.container]}),n(),this.dragulaService.add(this.bag,this.drake))},Dragula.prototype.ngOnChanges=function(e){if(e&&e.dragulaModel&&this.drake)if(this.drake.models){var t=this.drake.models.indexOf(e.dragulaModel.previousValue);this.drake.models.splice(t,1,e.dragulaModel.currentValue)}else this.drake.models=[e.dragulaModel.currentValue]},r([i.Input("dragula"),o("design:type",String)],Dragula.prototype,"bag",void 0),r([i.Input(),o("design:type",Object)],Dragula.prototype,"dragulaModel",void 0),Dragula=r([i.Directive({selector:"[dragula]"}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.ElementRef&&i.ElementRef)&&e||Object,"function"==typeof(t="undefined"!=typeof s.DragulaService&&s.DragulaService)&&t||Object])],Dragula);var e,t}();t.Dragula=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function FluidHeightDirective(e){this.element=e}return FluidHeightDirective.prototype.onInput=function(e){this.adjust()},FluidHeightDirective.prototype.ngOnInit=function(){this.adjust()},FluidHeightDirective.prototype.adjust=function(){this.element.nativeElement.style.overflow="hidden",this.element.nativeElement.style.height="auto",this.element.nativeElement.style.height=this.element.nativeElement.scrollHeight+"px"},r([i.HostListener("input",["$event.target"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],FluidHeightDirective.prototype,"onInput",null),FluidHeightDirective=r([i.Directive({selector:"textarea[autosize]"}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.ElementRef&&i.ElementRef)&&e||Object])],FluidHeightDirective);var e}();t.FluidHeightDirective=a}]);
//# sourceMappingURL=app.js.map